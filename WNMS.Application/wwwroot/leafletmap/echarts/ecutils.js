!function(e){var a={};e.ECU=a,a.options={timeprecision:"5分钟"},a.trafficIndexRgbas=["rgba(1,184,92,1)","rgba(0,255,1,1)","rgba(255,255,1,1)","rgba(255,127,0,1)","rgba(254,0,0,1)"],a.SetTimePrecision=function(i){a.options.timeprecision=i,"5分钟"==i&&(this.sxaxisMin=72,this.xaxisMax=288,this.xInterval=12),"15分钟"==i&&(this.sxaxisMin=24,this.xaxisMax=96,this.xInterval=4),"时"==i&&(this.sxaxisMin=1,this.xaxisMax=24,this.xInterval=1)},a.parseToEc3FormatSingleData=function(i,e,r,t){this.xaxisMax||a.SetTimePrecision(a.options.timeprecision),e||(e="x"),r||(r="y"),t||(t=0);for(var s=[],n=0,o=t;o<=this.xaxisMax;o++){var u=[],l={};n<i.length&&i[n][e]==o?(u.push(i[n][e]),u.push(i[n][r]),n++):(u.push(o),u.push(null)),l.value=u,s.push(l)}return s},a.parseToEc3FormatMultiData=function(e){var r=e.xName,t=e.yName,s=e.zName,n=e.list,o=e.type;o||(o="value");var u;if(e.defaultSelectedArray)for(u=e.defaultSelectedArray,i=0;i<e.defaultSelectedArray.length;i++)u[e.defaultSelectedArray[i]]=1;r||(r="x"),t||(t="y"),s||(s="name");var l={},p={},x=[],h=[],c={},f={},v=[];for(i=0;i<n.length;i++){var m={};m[r]=n[i][r],m[t]=n[i][t],p[n[i][s]]||(p[n[i][s]]={},p[n[i][s]].sar=[]),f[n[i][r]]=1,p[n[i][s]].sar.push(m)}for(var g in f)v.push(g);v.sort();var d=0;for(var g in p){var M=[];if("value"==o)M=a.parseToEc3FormatSingleData(p[g].sar,r,t);else for(j=0;j<v.length;j++){var y=v[j],S=null;for(i=0;i<p[g].sar.length;i++)p[g].sar[i][r]==y&&(S=p[g].sar[i][t]);M.push(S)}x.push({name:g,data:M}),h.push(g),u?u[g]||(c[g]=!1):c[g]=0==d,d++}return l.selectedMap=c,l.series=x,l.nameArray=h,l.xSeries=v,l},a.getTimeStringByPeriod=function(i){var e,r,t,s="",n="",o="";return"5分钟"==a.options.timeprecision&&(e=parseInt(i/12),r=i%12,t=5*r),"15分钟"==a.options.timeprecision&&(e=parseInt(i/4),r=i%4,t=15*r),"时"==a.options.timeprecision&&(e=parseInt(i/1),r=i%1,t=60*r),n=e+"",o=t<10?"0"+t:t+"",s=0==r?n:n+":"+o},a.getEchartDataTooltips=function(i){for(var e=i.length,r=a.getTimeStringByPeriod(i[0].value[0]),t=a.getTimeFullMinute(r),s=0;s<e;s++){t+="<br/>";var n=i[s].value[1];n=n?n:"",t+=i[s].seriesName+"："+n}return t},a.getTimeFullMinute=function(i){return i.indexOf(":")==-1&&(i+=":00"),i}}(window);
