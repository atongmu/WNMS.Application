/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import e from"../core/Error.js";import{s as t}from"./object.js";import{p as r,i as s}from"./parser.js";function n(e,t,r){try{return function(e){if(!e||0===e.length)return null;if(function(e){const t=e[0];if(!t)return!1;return"scale"in t}(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:o(r.value)});return t}return o(e)}(e)}catch(e){var s;null==r||null==(s=r.messages)||s.push(e)}return null}function a(e,n,a,o){try{const o=function(e){const t=r(e);if(!t)return null;if(s(t))return t.map((e=>e.toJSON()));return t.map((({scale:e,effects:t})=>({scale:e,value:t.map((e=>e.toJSON()))})))}(e);t(a,o,n)}catch(e){o.messages&&o.messages.push(e)}}function o(e){if(!e||!e.length)return"";const t=[];for(const s of e){let e=[];switch(s.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":e=[c(s,"amount")];break;case"blur":e=[c(s,"radius","pt")];break;case"hue-rotate":e=[c(s,"angle","deg")];break;case"drop-shadow":e=[c(s,"xoffset","pt"),c(s,"yoffset","pt"),c(s,"blurRadius","pt"),u(s,"color")];break;case"bloom":e=[c(s,"strength"),c(s,"radius","pt"),c(s,"threshold")]}const n=`${s.type}(${e.filter(Boolean).join(" ")})`;r(n),t.push(n)}return t.join(" ")}function c(t,r,s){if(null==t[r])throw new e("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});return s?t[r]+s:""+t[r]}function u(t,r){if(null==t[r])throw new e("effect:missing-parameter",`Missing parameter '${r}' in ${t.type} effect`,{effect:t});const s=t[r];return`rgba(${s[0]||0}, ${s[1]||0}, ${s[2]||0}, ${s[3]/255||0})`}export{o as e,n as r,a as w};
