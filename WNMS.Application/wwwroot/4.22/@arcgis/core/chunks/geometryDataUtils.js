/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{e as t,f as n,g as r,ab as e,b as s}from"./mathUtils.js";import{b as a}from"./triangle.js";let i=(()=>{const t=new Uint32Array(131072);for(let n=0;n<t.length;++n)t[n]=n;return t})();const o=new Uint16Array([0]),f=(()=>{const t=new Uint16Array(65536);for(let n=0;n<t.length;++n)t[n]=n;return t})();function l(t){if(1===t)return o;if(t<f.length)return new Uint16Array(f.buffer,0,t);if(t>i.length){const n=Math.max(2*i.length,t);i=new Uint32Array(n);for(let t=0;t<i.length;t++)i[t]=t}return new Uint32Array(i.buffer,0,t)}function c(t){if(1===t)return new Uint16Array(o);if(t<f.length)return new Uint16Array(f.slice(0,t));if(t>i.length){const n=new Uint32Array(t);for(let t=0;t<n.length;t++)n[t]=t;return n}return new Uint32Array(i.slice(0,t))}function u(e,s,i){if(!e)return!1;const{size:o,data:f}=e;t(i,0,0,0),t(A,0,0,0);let l=0,c=0;for(let e=0;e<s.length-2;e+=3){const u=s[e+0]*o,g=s[e+1]*o,h=s[e+2]*o;t(U,f[u+0],f[u+1],f[u+2]),t(w,f[g+0],f[g+1],f[g+2]),t(y,f[h+0],f[h+1],f[h+2]);const b=a(U,w,y);b?(r(U,U,w),r(U,U,y),n(U,U,1/3*b),r(i,i,U),l+=b):(r(A,A,U),r(A,A,w),r(A,A,y),c+=3)}return(0!==c||0!==l)&&(0!==l?(n(i,i,1/l),!0):0!==c&&(n(i,A,1/c),!0))}function g(r,e,s){if(!r||!e)return!1;const{size:a,data:i}=r;t(s,0,0,0);let o=-1,f=0;for(let t=0;t<e.length;t++){const n=e[t]*a;o!==n&&(s[0]+=i[n+0],s[1]+=i[n+1],s[2]+=i[n+2],f++),o=n}return f>1&&n(s,s,1/f),f>0}function h(s,a,i,o){if(!s)return!1;const{size:f,data:l}=s;t(o,0,0,0),t(A,0,0,0);let c=0,u=0;const g=a?a.length-1:l.length/f-1,h=g+(i?2:0);for(let t=0;t<h;t+=2){const s=t<g?t:g,i=t<g?t+1:0,h=(a?a[s]:s)*f,y=(a?a[i]:i)*f;U[0]=l[h+0],U[1]=l[h+1],U[2]=l[h+2],w[0]=l[y+0],w[1]=l[y+1],w[2]=l[y+2],n(U,r(U,U,w),.5);const b=e(U,w);b>0?(r(o,o,n(U,U,b)),c+=b):(r(A,A,U),u++)}return 0!==c?(n(o,o,1/c),!0):0!==u&&(n(o,A,1/u),!0)}const U=s(),w=s(),y=s(),A=s();export{u as a,g as b,h as c,c as d,l as g};
