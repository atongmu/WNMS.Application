/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{L as e}from"./Logger.js";import{y as t,b as i,i as r}from"../core/lang.js";import{P as s}from"../core/scheduling.js";import{a as n,T as a}from"./Texture.js";import{P as o,V as c,B as l}from"./Program.js";import{t as u,u as d}from"./mat4.js";import{a as h}from"./parser.js";import{b as f,k as m,q as p,h as g,_ as v,K as _,o as b,c as x,e as P,a as y,n as F,s as S,Z as T}from"./mathUtils.js";import{d as M}from"./Util2.js";import{g as A,a as I,b as w}from"./geometryDataUtils.js";import{g as O}from"../core/Accessor.js";import{c as D,j as B,k as L}from"./aaBoundingBox.js";import{i as z}from"./utils14.js";import{g as C,b as E,e as U,a as $}from"./BufferView.js";import{f as H}from"./vec4f64.js";function k(e,...t){let i="";for(let r=0;r<t.length;r++)i+=e[r]+t[r];return i+=e[e.length-1],i}function R(e){e.code.add(k`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)}function G(e){e.include(R),e.code.add(k`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)}!function(e){e.int=function(e){return Math.round(e).toString()},e.float=function(e){return e.toPrecision(8)}}(k||(k={}));const j=e.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class V{constructor(){this.includedModules=new Map}include(e,t){this.includedModules.has(e)?this.includedModules.get(e)!==t&&j.error("Trying to include shader module multiple times with different sets of options."):(this.includedModules.set(e,t),e(this.builder,t))}}class q extends V{constructor(){super(...arguments),this.vertex=new Y,this.fragment=new Y,this.attributes=new K,this.varyings=new X,this.extensions=new Z,this.constants=new J}get fragmentUniforms(){return this.fragment.uniforms}get builder(){return this}generateSource(e){const t=this.extensions.generateSource(e),i=this.attributes.generateSource(e),r=this.varyings.generateSource(),s="vertex"===e?this.vertex:this.fragment,n=s.uniforms.generateSource(),a=s.code.generateSource(),o="vertex"===e?ee:Q,c=this.constants.generateSource().concat(s.constants.generateSource());return`\n${t.join("\n")}\n\n${o}\n\n${c.join("\n")}\n\n${n.join("\n")}\n\n${i.join("\n")}\n\n${r.join("\n")}\n\n${a.join("\n")}`}}class N{constructor(){this._entries=new Map}add(e,t,i){const r=`${e}_${t}_${i}`;return this._entries.set(r,{name:e,type:t,arraySize:i}),this}generateSource(){return Array.from(this._entries.values()).map((e=>{return`uniform ${e.type} ${e.name}${t=e.arraySize,t?`[${t}]`:""};`;var t}))}get entries(){return Array.from(this._entries.values())}}class W{constructor(){this._entries=new Array}add(e){this._entries.push(e)}generateSource(){return this._entries}}class Y extends V{constructor(){super(...arguments),this.uniforms=new N,this.code=new W,this.constants=new J}get builder(){return this}}class K{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(e){return"fragment"===e?[]:this._entries.map((e=>`attribute ${e[1]} ${e[0]};`))}}class X{constructor(){this._entries=new Array}add(e,t){this._entries.push([e,t])}generateSource(){return this._entries.map((e=>`varying ${e[1]} ${e[0]};`))}}class Z{constructor(){this._entries=new Set}add(e){this._entries.add(e)}generateSource(e){const t="vertex"===e?Z.ALLOWLIST_VERTEX:Z.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((e=>t.includes(e))).map((e=>`#extension ${e} : enable`))}}Z.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],Z.ALLOWLIST_VERTEX=[];class J{constructor(){this._entries=[]}add(e,t,i){let r="ERROR_CONSTRUCTOR_STRING";switch(t){case"float":r=J.numberToFloatStr(i);break;case"int":r=J.numberToIntStr(i);break;case"bool":r=i.toString();break;case"vec2":r=`vec2(${J.numberToFloatStr(i[0])},                            ${J.numberToFloatStr(i[1])})`;break;case"vec3":r=`vec3(${J.numberToFloatStr(i[0])},                            ${J.numberToFloatStr(i[1])},                            ${J.numberToFloatStr(i[2])})`;break;case"vec4":r=`vec4(${J.numberToFloatStr(i[0])},                            ${J.numberToFloatStr(i[1])},                            ${J.numberToFloatStr(i[2])},                            ${J.numberToFloatStr(i[3])})`;break;case"ivec2":r=`ivec2(${J.numberToIntStr(i[0])},                             ${J.numberToIntStr(i[1])})`;break;case"ivec3":r=`ivec3(${J.numberToIntStr(i[0])},                             ${J.numberToIntStr(i[1])},                             ${J.numberToIntStr(i[2])})`;break;case"ivec4":r=`ivec4(${J.numberToIntStr(i[0])},                             ${J.numberToIntStr(i[1])},                             ${J.numberToIntStr(i[2])},                             ${J.numberToIntStr(i[3])})`;break;case"mat2":case"mat3":case"mat4":r=`${t}(${Array.prototype.map.call(i,(e=>J.numberToFloatStr(e))).join(", ")})`}return this._entries.push(`const ${t} ${e} = ${r};`),this}static numberToIntStr(e){return e.toFixed(0)}static numberToFloatStr(e){return Number.isInteger(e)?e.toFixed(1):e.toString()}generateSource(){return Array.from(this._entries)}}const Q="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",ee="precision highp float;\nprecision highp sampler2D;";class te{constructor(e,t){this._module=e,this._loadModule=t}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}class ie{constructor(e,t,i=(()=>this.dispose())){this.release=i,t&&(this._config=t.snapshot()),this._program=this.initializeProgram(e),this._pipeline=this.initializePipeline(e)}dispose(){this._program=t(this._program),this._pipeline=this._config=null}reload(e){t(this._program),this._program=this.initializeProgram(e)}get program(){return this._program}get key(){return this._config.key}get configuration(){return this._config}bindPass(e,t){}bindMaterial(e,t){}bindDraw(e){}bindPipelineState(e,t=null,i){e.setPipelineState(this.getPipelineState(t,i))}ensureAttributeLocations(e){this.program.assertCompatibleVertexAttributeLocations(e)}get primitiveType(){return 4}getPipelineState(e,t){return this._pipeline}}class re{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits?this._parameterBits.map((()=>0)):[],this._parameterNames||(this._parameterNames=[])}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const e=this._parameterNames,t={key:this.key};for(const i of e)t[i]=this[i];return t}}function se(e={}){return(t,i)=>{var r,s;t._parameterNames=null!=(r=t._parameterNames)?r:[],t._parameterNames.push(i);const n=t._parameterNames.length-1,a=e.count||2,o=Math.ceil(Math.log2(a)),c=null!=(s=t._parameterBits)?s:[0];let l=0;for(;c[l]+o>16;)l++,l>=c.length&&c.push(0);t._parameterBits=c;const u=c[l],d=(1<<o)-1<<u;c[l]+=o,Object.defineProperty(t,i,{get(){return this[n]},set(e){if(this[n]!==e&&(this[n]=e,this._keyDirty=!0,this._parameterBits[l]=this._parameterBits[l]&~d|+e<<u&d,"number"!=typeof e&&"boolean"!=typeof e))throw"Configuration value for "+i+" must be boolean or number, got "+typeof e}})}}const ne=new Map([["position",0],["normal",1],["uv0",2],["color",3],["size",4],["tangent",4],["auxpos1",5],["symbolColor",5],["auxpos2",6],["featureAttribute",6],["instanceFeatureAttribute",6],["instanceColor",7],["model",8],["modelNormal",12],["modelOriginHi",11],["modelOriginLo",15]]);class ae extends o{constructor(e,t,i){super(e,t.generateSource("vertex"),t.generateSource("fragment"),i),this._textures=new Map,this._freeTextureUnits=new s({deallocator:null}),this._fragmentUniforms=n()?t.fragmentUniforms.entries:null}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(e,t){if(i(e)||null==e.glName){const e=this._textures.get(t);return e&&(this._context.bindTexture(null,e.unit),this._freeTextureUnit(e),this._textures.delete(t)),null}let r=this._textures.get(t);return null==r?(r=this._allocTextureUnit(e),this._textures.set(t,r)):r.texture=e,this._context.useProgram(this),this.setUniform1i(t,r.unit),this._context.bindTexture(e,r.unit),r.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach(((e,t)=>{this._context.bindTexture(e.texture,e.unit),this.setUniform1i(t,e.unit)})),r(this._fragmentUniforms)&&this._fragmentUniforms.forEach((e=>{if(("sampler2D"===e.type||"samplerCube"===e.type)&&!this._textures.has(e.name))throw new Error(`Texture sampler ${e.name} has no bound texture`)}))}_allocTextureUnit(e){return{texture:e,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(e){this._freeTextureUnits.push(e.unit)}}const oe=[{name:"position",count:2,type:5126,offset:0,stride:8,normalized:!1}],ce=[{name:"position",count:2,type:5126,offset:0,stride:16,normalized:!1},{name:"uv0",count:2,type:5126,offset:8,stride:16,normalized:!1}];function le(e,t=oe,i=ne,r=-1,s=1){let n=null;if(t===ce)n=new Float32Array([r,r,0,0,s,r,1,0,r,s,0,1,s,s,1,1]);else n=new Float32Array([r,r,s,r,r,s,s,s]);return new c(e,i,{geometry:t},{geometry:l.createVertex(e,35044,n)})}function ue(e,t=oe,i=ne){const r=new Float32Array([-1,-1,3,-1,-1,3]);return new c(e,i,{geometry:t},{geometry:l.createVertex(e,35044,r)})}function de(e,t=4){return new a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:t,height:t})}function he(e,t,i=4){const r=new Uint8Array(i*i*4);for(let e=0;e<r.length;e+=4)r[e+0]=255*t[0],r[e+1]=255*t[1],r[e+2]=255*t[2],r[e+3]=255*t[3];return new a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:i,height:i},r)}function fe(e){return new a(e,{target:3553,pixelFormat:6408,dataType:5121,samplingMode:9728,width:1,height:1},new Uint8Array([255,255,255,255]))}function me(e){e.code.add(k`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}function pe(e,t){t.linearDepth?e.vertex.code.add(k`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
return proj * eye;
}`):e.vertex.code.add(k`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}function ge(e,t,i){e.setUniform3f("camPos",i[3]-t[0],i[7]-t[1],i[11]-t[2])}function ve(e,t){e.setUniformMatrix4fv("proj",t)}function _e(e,t){e.setUniform2fv("nearFar",t)}function be(e,t,i){u(ye,i,t),e.setUniform3fv("localOrigin",t),e.setUniformMatrix4fv("view",ye)}function xe(e,t){be(e,t.origin,t.camera.viewMatrix)}function Pe(e,t){e.setUniform4fv("viewport",t.camera.fullViewport)}const ye=h();class Fe{constructor(e,t,i,r){this.primitiveIndices=e,this._numIndexPerPrimitive=t,this.indices=i,this.position=r,this.center=f(),M(e.length>=1),M(i.length%this._numIndexPerPrimitive==0),M(i.length>=e.length*this._numIndexPerPrimitive),M(3===r.size||4===r.size);const{data:s,size:n}=r,a=e.length;let o=n*i[this._numIndexPerPrimitive*e[0]];Se.clear(),Se.push(o),this.bbMin=m(s[o],s[o+1],s[o+2]),this.bbMax=p(this.bbMin);for(let t=0;t<a;++t){const r=this._numIndexPerPrimitive*e[t];for(let e=0;e<this._numIndexPerPrimitive;++e){o=n*i[r+e],Se.push(o);let t=s[o];this.bbMin[0]=Math.min(t,this.bbMin[0]),this.bbMax[0]=Math.max(t,this.bbMax[0]),t=s[o+1],this.bbMin[1]=Math.min(t,this.bbMin[1]),this.bbMax[1]=Math.max(t,this.bbMax[1]),t=s[o+2],this.bbMin[2]=Math.min(t,this.bbMin[2]),this.bbMax[2]=Math.max(t,this.bbMax[2])}}g(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let c=this.radius*this.radius;for(let e=0;e<Se.length;++e){o=Se.getItemAt(e);const t=s[o]-this.center[0],i=s[o+1]-this.center[1],r=s[o+2]-this.center[2],n=t*t+i*i+r*r;if(n<=c)continue;const a=Math.sqrt(n),l=.5*(a-this.radius);this.radius=this.radius+l,c=this.radius*this.radius;const u=l/a;this.center[0]+=t*u,this.center[1]+=i*u,this.center[2]+=r*u}Se.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if(v(this.bbMin,this.bbMax)>1){const e=g(f(),this.bbMin,this.bbMax,.5),t=this.primitiveIndices.length,i=new Uint8Array(t),r=new Array(8);for(let e=0;e<8;++e)r[e]=0;const{data:s,size:n}=this.position;for(let a=0;a<t;++a){let t=0;const o=this._numIndexPerPrimitive*this.primitiveIndices[a];let c=n*this.indices[o],l=s[c],u=s[c+1],d=s[c+2];for(let e=1;e<this._numIndexPerPrimitive;++e){c=n*this.indices[o+e];const t=s[c],i=s[c+1],r=s[c+2];t<l&&(l=t),i<u&&(u=i),r<d&&(d=r)}l<e[0]&&(t|=1),u<e[1]&&(t|=2),d<e[2]&&(t|=4),i[a]=t,++r[t]}let a=0;for(let e=0;e<8;++e)r[e]>0&&++a;if(a<2)return;const o=new Array(8);for(let e=0;e<8;++e)o[e]=r[e]>0?new Uint32Array(r[e]):void 0;for(let e=0;e<8;++e)r[e]=0;for(let e=0;e<t;++e){const t=i[e];o[t][r[t]++]=this.primitiveIndices[e]}this._children=new Array(8);for(let e=0;e<8;++e)void 0!==o[e]&&(this._children[e]=new Fe(o[e],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){Se.prune()}}const Se=new s({deallocator:null});class Te{constructor(){this.id=O()}unload(){}}class Me extends Te{constructor(e,t=[],i=0,r=-1){super(),this._primitiveType=i,this.edgeIndicesLength=r,this.type=2,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[t,i]of e)i&&this._vertexAttributes.set(t,{...i});if(null==t||0===t.length){const e=function(e){const t=e.values().next().value;if(null==t)return 0;return t.data.length/t.size}(this._vertexAttributes),t=A(e);this.edgeIndicesLength=this.edgeIndicesLength<0?e:this.edgeIndicesLength;for(const e of this._vertexAttributes.keys())this._indices.set(e,t)}else for(const[e,i]of t)i&&(this._indices.set(e,Ae(i)),"position"===e&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(e).length:this.edgeIndicesLength))}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(e){const t=this._vertexAttributes.get(e);return t&&!t.exclusive&&(t.data=Array.from(t.data),t.exclusive=!0),t}get indices(){return this._indices}get indexCount(){const e=this._indices.values().next().value;return e?e.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return i(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(e){return 0===this.primitiveType?this.computeAttachmentOriginTriangles(e):this.computeAttachmentOriginPoints(e)}computeAttachmentOriginTriangles(e){const t=this.indices.get("position"),i=this.vertexAttributes.get("position");return I(i,t,e)}computeAttachmentOriginPoints(e){const t=this.indices.get("position"),i=this.vertexAttributes.get("position");return w(i,t,e)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const e=this.indices.get("position");if(0===e.length)return null;const t=0===this.primitiveType?3:1;M(e.length%t==0,"Indexing error: "+e.length+" not divisible by "+t);const i=A(e.length/t),r=this.vertexAttributes.get("position");return new Fe(i,t,e,r)}}function Ae(e){if(e.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return e;for(const t of e)if(t>=65536)return e;return new Uint16Array(e)}function Ie(e,t){return new Ce(e,Ee,t)}function we(e,t){const{curvatureDependent:i,scaleStart:r,scaleFallOffRange:s}=Ee;return new Ce(e,{curvatureDependent:{min:{curvature:i.min.curvature,tiltAngle:i.min.tiltAngle,scaleFallOffFactor:Ue.curvatureDependent.min.scaleFallOffFactor},max:{curvature:i.max.curvature,tiltAngle:i.max.tiltAngle,scaleFallOffFactor:Ue.curvatureDependent.max.scaleFallOffFactor}},scaleStart:r,scaleFallOffRange:s,minPixelSize:Ue.minPixelSize},t)}function Oe(e,t,i){const r=i.parameters,s=i.paddingPixelsOverride;return $e.scale=Math.min(r.divisor/(t-r.offset),1),$e.factor=function(e){return Math.abs(e*e*e)}(e),$e.minPixelSize=r.minPixelSize,$e.paddingPixels=s,$e}function De(e,t){return 0===e?t.minPixelSize:t.minPixelSize*(1+2*t.paddingPixels/e)}function Be(e,t){return Math.max(_(e*t.scale,e,t.factor),De(e,t))}function Le(e,t,i,r){r.scale=function(e,t,i){const r=Oe(e,t,i);return r.minPixelSize=0,r.paddingPixels=0,Be(1,r)}(e,t,i),r.factor=0,r.minPixelSize=i.parameters.minPixelSize,r.paddingPixels=i.paddingPixelsOverride}function ze(e,t,i=[0,0]){const r=Math.min(Math.max(t.scale,De(e[1],t)/e[1]),1);return i[0]=e[0]*r,i[1]=e[1]*r,i}class Ce{constructor(e,t,i,r={camera:{distance:0,fovY:0},divisor:0,offset:0,minPixelSize:0,paddingPixels:0},s){this.viewingMode=e,this.description=t,this.ellipsoidRadius=i,this.parameters=r,this._paddingPixelsOverride=s,2===this.viewingMode?(this.coverageCompensation=this.surfaceCoverageCompensationLocal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersLocal):(this.coverageCompensation=this.surfaceCoverageCompensationGlobal,this.calculateCurvatureDependentParameters=this.calculateCurvatureDependentParametersGlobal)}get paddingPixelsOverride(){return this._paddingPixelsOverride||this.parameters.paddingPixels}update(e){return(!this.parameters||this.parameters.camera.fovY!==e.fovY||this.parameters.camera.distance!==e.distance)&&(this.calculateParameters(e,this.ellipsoidRadius,this.parameters),!0)}overridePadding(e){return e!==this.paddingPixelsOverride?new Ce(this.viewingMode,this.description,this.ellipsoidRadius,this.parameters,e):this}calculateParameters(e,t,i){const{scaleStart:r,scaleFallOffRange:s,minPixelSize:n}=this.description,{fovY:a,distance:o}=e,c=this.calculateCurvatureDependentParameters(e,t),l=this.coverageCompensation(e,t,c),{tiltAngle:u,scaleFallOffFactor:d}=c,h=Math.sin(u)*o,f=.5*Math.PI-u-a*(.5-r*l),m=h/Math.cos(f),p=f+a*s*l,g=(m-d*(h/Math.cos(p)))/(1-d);return i.camera.fovY=e.fovY,i.camera.distance=e.distance,i.offset=g,i.divisor=m-g,i.minPixelSize=n,i}calculateCurvatureDependentParametersLocal(e,t,i=He){return i.tiltAngle=this.description.curvatureDependent.min.tiltAngle,i.scaleFallOffFactor=this.description.curvatureDependent.min.scaleFallOffFactor,i}calculateCurvatureDependentParametersGlobal(e,t,i=He){const r=this.description.curvatureDependent,s=1+e.distance/t,n=Math.sqrt(s*s-1),[a,o]=[r.min.curvature,r.max.curvature],c=x((n-a)/(o-a),0,1),[l,u]=[r.min,r.max];return i.tiltAngle=_(l.tiltAngle,u.tiltAngle,c),i.scaleFallOffFactor=_(l.scaleFallOffFactor,u.scaleFallOffFactor,c),i}surfaceCoverageCompensationLocal(e,t,i){return(e.fovY-i.tiltAngle)/e.fovY}surfaceCoverageCompensationGlobal(e,t,i){const r=t*t,s=i.tiltAngle+.5*Math.PI,{fovY:n,distance:a}=e,o=a*a+r-2*Math.cos(s)*a*t,c=Math.sqrt(o),l=Math.sqrt(o-r);return(Math.acos(l/c)-Math.asin(t/(c/Math.sin(s)))+.5*n)/n}}const Ee={curvatureDependent:{min:{curvature:b(10),tiltAngle:b(12),scaleFallOffFactor:.5},max:{curvature:b(70),tiltAngle:b(40),scaleFallOffFactor:.8}},scaleStart:.3,scaleFallOffRange:.65,minPixelSize:0},Ue={curvatureDependent:{min:{scaleFallOffFactor:.7},max:{scaleFallOffFactor:.95}},minPixelSize:14};const $e={scale:0,factor:0,minPixelSize:0,paddingPixels:0},He={tiltAngle:0,scaleFallOffFactor:0};class ke{constructor(e){this._material=e.material,this._techniqueRep=e.techniqueRep,this._output=e.output}dispose(){this._techniqueRep.release(this._technique)}get technique(){return this._technique}ensureTechnique(e,t,i=this._output){return this._technique=this._techniqueRep.releaseAndAcquire(e,this._material.getTechniqueConfig(i,t),this._technique),this._technique}ensureResources(e){return 2}}const Re=D();function Ge(e,t,i,r,s,n,a){if(!z(t))if(e.boundingInfo){M(0===e.primitiveType);const t=i.tolerance;Ve(e.boundingInfo,r,s,t,n,a)}else{const t=e.indices.get("position"),i=e.vertexAttributes.get("position");Ne(r,s,0,t.length/3,t,i,void 0,n,a)}}const je=f();function Ve(e,t,s,n,a,o){if(i(e))return;const c=Xe(t,s,je);if(B(Re,e.getBBMin()),L(Re,e.getBBMax()),r(a)&&a.applyToAabb(Re),Ze(Re,t,c,n)){const{primitiveIndices:i,indices:r,position:c}=e,l=i?i.length:r.length/3;if(l>at){const i=e.getChildren();if(void 0!==i){for(let e=0;e<8;++e)void 0!==i[e]&&Ve(i[e],t,s,n,a,o);return}}Ne(t,s,0,l,r,c,i,a,o)}}const qe=f();function Ne(e,t,i,s,n,a,o,c,l){if(o)return function(e,t,i,s,n,a,o,c,l){const u=a.data,d=a.stride||a.size,h=e[0],f=e[1],m=e[2],p=t[0],g=t[1],v=t[2],_=p-h,b=g-f,x=v-m;for(let e=i;e<s;++e){const t=o[e];let i=3*t,s=d*n[i++],a=u[s++],p=u[s++],g=u[s];s=d*n[i++];let v=u[s++],P=u[s++],y=u[s];s=d*n[i];let F=u[s++],S=u[s++],T=u[s];r(c)&&([a,p,g]=c.applyToVertex(a,p,g,e),[v,P,y]=c.applyToVertex(v,P,y,e),[F,S,T]=c.applyToVertex(F,S,T,e));const M=v-a,A=P-p,I=y-g,w=F-a,O=S-p,D=T-g,B=b*D-O*x,L=x*w-D*_,z=_*O-w*b,C=M*B+A*L+I*z;if(Math.abs(C)<=Number.EPSILON)continue;const E=h-a,U=f-p,$=m-g,H=E*B+U*L+$*z;if(C>0){if(H<0||H>C)continue}else if(H>0||H<C)continue;const k=U*I-A*$,R=$*M-I*E,G=E*A-M*U,j=_*k+b*R+x*G;if(C>0){if(j<0||H+j>C)continue}else if(j>0||H+j<C)continue;const V=(w*k+O*R+D*G)/C;if(V>=0){l(V,Ke(M,A,I,w,O,D,qe),t,!1)}}}(e,t,i,s,n,a,o,c,l);const u=a.data,d=a.stride||a.size,h=e[0],f=e[1],m=e[2],p=t[0]-h,g=t[1]-f,v=t[2]-m;for(let e=i,t=3*i;e<s;++e){let i=d*n[t++],s=u[i++],a=u[i++],o=u[i];i=d*n[t++];let _=u[i++],b=u[i++],x=u[i];i=d*n[t++];let P=u[i++],y=u[i++],F=u[i];r(c)&&([s,a,o]=c.applyToVertex(s,a,o,e),[_,b,x]=c.applyToVertex(_,b,x,e),[P,y,F]=c.applyToVertex(P,y,F,e));const S=_-s,T=b-a,M=x-o,A=P-s,I=y-a,w=F-o,O=g*w-I*v,D=v*A-w*p,B=p*I-A*g,L=S*O+T*D+M*B;if(Math.abs(L)<=Number.EPSILON)continue;const z=h-s,C=f-a,E=m-o,U=z*O+C*D+E*B;if(L>0){if(U<0||U>L)continue}else if(U>0||U<L)continue;const $=C*M-T*E,H=E*S-M*z,k=z*T-S*C,R=p*$+g*H+v*k;if(L>0){if(R<0||U+R>L)continue}else if(R>0||U+R<L)continue;const G=(A*$+I*H+w*k)/L;if(G>=0){l(G,Ke(S,T,M,A,I,w,qe),e,!1)}}}const We=f(),Ye=f();function Ke(e,t,i,r,s,n,a){return P(We,e,t,i),P(Ye,r,s,n),y(a,We,Ye),F(a,a),a}function Xe(e,t,i){return P(i,1/(t[0]-e[0]),1/(t[1]-e[1]),1/(t[2]-e[2]))}function Ze(e,t,i,r){return Je(e,t,i,r,1/0)}function Je(e,t,i,r,s){const n=(e[0]-r-t[0])*i[0],a=(e[3]+r-t[0])*i[0];let o=Math.min(n,a),c=Math.max(n,a);const l=(e[1]-r-t[1])*i[1],u=(e[4]+r-t[1])*i[1];if(c=Math.min(c,Math.max(l,u)),c<0)return!1;if(o=Math.max(o,Math.min(l,u)),o>c)return!1;const d=(e[2]-r-t[2])*i[2],h=(e[5]+r-t[2])*i[2];return c=Math.min(c,Math.max(d,h)),!(c<0)&&(o=Math.max(o,Math.min(d,h)),!(o>c)&&o<s)}function Qe(e,t,i,r,s){let n=(i.screenLength||0)*e.pixelRatio;s&&(n=function(e,t,i,r){return Be(e,Oe(t,i,r))}(n,r,t,s));const a=n*Math.tan(.5*e.fovY)/(.5*e.fullHeight);return x(a*t,i.minWorldLength||0,null!=i.maxWorldLength?i.maxWorldLength:1/0)}function et(e,t,i){if(!e)return;const r=e.parameters,s=e.paddingPixelsOverride;t.setUniform4f(i,r.divisor,r.offset,r.minPixelSize,s)}function tt(e,t){const i=t?tt(t):{};for(const t in e){let r=e[t];r&&r.forEach&&(r=st(r)),null==r&&t in i||(i[t]=r)}return i}function it(e,t){let i=!1;for(const r in t){const s=t[r];void 0!==s&&(i=!0,Array.isArray(s)?e[r]=s.slice():e[r]=s)}return i}function rt(e,t,i,r,s,n){if(!t.options.selectionMode)return;const a=e.vertexAttributes.get("position").data,o=e.vertexAttributes.get("size"),c=o&&o.data[0],l=r[0],u=r[1],d=((c+s)/2+4)*e.screenToWorldRatio;let h=Number.MAX_VALUE,f=0;for(let e=0;e<a.length-5;e+=3){const t=a[e],i=a[e+1],r=l-t,s=u-i,n=a[e+3]-t,o=a[e+4]-i,c=x((n*r+o*s)/(n*n+o*o),0,1),d=n*c-r,m=o*c-s,p=d*d+m*m;p<h&&(h=p,f=e/3)}h<d*d&&n(i.dist,i.normal,f,!1)}function st(e){const t=[];return e.forEach((e=>t.push(e))),t}const nt={multiply:1,ignore:2,replace:3,tint:4},at=1e3;class ot extends Te{constructor(e,t){super(),this.type=3,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=ne,this._parameters=tt(e,t),this.validateParameters(this._parameters)}dispose(){}get parameters(){return this._parameters}update(e){return!1}setParameters(e){it(this._parameters,e)&&(this.validateParameters(this._parameters),this.parametersChanged())}validateParameters(e){}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this.parametersChanged())}shouldRender(e){return this.isVisible()&&this.isVisibleInPass(e.pass)&&0!=(this.renderOccluded&e.renderOccludedMask)}isVisibleInPass(e){return!0}get renderOccluded(){return this.parameters.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(e){e!==this._renderPriority&&(this._renderPriority=e,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(e){e!==this._insertOrder&&(this._insertOrder=e,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){r(this.repository)&&this.repository.materialChanged(this)}}const ct={renderOccluded:1};function lt(e,t,i,r){const s=i.typedBuffer,n=i.typedBufferStride,a=e.length;r*=n;for(let i=0;i<a;++i){const a=2*e[i];s[r]=t[a],s[r+1]=t[a+1],r+=n}}function ut(e,t,i,r,s){const n=i.typedBuffer,a=i.typedBufferStride,o=e.length;if(r*=a,null==s||1===s)for(let i=0;i<o;++i){const s=3*e[i];n[r]=t[s],n[r+1]=t[s+1],n[r+2]=t[s+2],r+=a}else for(let i=0;i<o;++i){const o=3*e[i];for(let e=0;e<s;++e)n[r]=t[o],n[r+1]=t[o+1],n[r+2]=t[o+2],r+=a}}function dt(e,t,i,r,s=1){const n=i.typedBuffer,a=i.typedBufferStride,o=e.length;if(r*=a,1===s)for(let i=0;i<o;++i){const s=4*e[i];n[r]=t[s],n[r+1]=t[s+1],n[r+2]=t[s+2],n[r+3]=t[s+3],r+=a}else for(let i=0;i<o;++i){const o=4*e[i];for(let e=0;e<s;++e)n[r]=t[o],n[r+1]=t[o+1],n[r+2]=t[o+2],n[r+3]=t[o+3],r+=a}}function ht(e,t,i,r,s,n=1){if(!i)return void ut(e,t,r,s,n);const a=r.typedBuffer,o=r.typedBufferStride,c=e.length,l=i[0],u=i[1],d=i[2],h=i[4],f=i[5],m=i[6],p=i[8],g=i[9],v=i[10],_=i[12],b=i[13],x=i[14];if(s*=o,1===n)for(let i=0;i<c;++i){const r=3*e[i],n=t[r],c=t[r+1],P=t[r+2];a[s]=l*n+h*c+p*P+_,a[s+1]=u*n+f*c+g*P+b,a[s+2]=d*n+m*c+v*P+x,s+=o}else for(let i=0;i<c;++i){const r=3*e[i],c=t[r],P=t[r+1],y=t[r+2],F=l*c+h*P+p*y+_,S=u*c+f*P+g*y+b,T=d*c+m*P+v*y+x;for(let e=0;e<n;++e)a[s]=F,a[s+1]=S,a[s+2]=T,s+=o}}function ft(e,t,i,r,s,n=1){if(!i)return void ut(e,t,r,s,n);const a=i,o=r.typedBuffer,c=r.typedBufferStride,l=e.length,u=a[0],h=a[1],f=a[2],m=a[4],p=a[5],g=a[6],v=a[8],_=a[9],b=a[10],x=!d(a),P=1e-6,y=.999999;if(s*=c,1===n)for(let i=0;i<l;++i){const r=3*e[i],n=t[r],a=t[r+1],l=t[r+2];let d=u*n+m*a+v*l,F=h*n+p*a+_*l,S=f*n+g*a+b*l;if(x){const e=d*d+F*F+S*S;if(e<y&&e>P){const t=1/Math.sqrt(e);d*=t,F*=t,S*=t}}o[s+0]=d,o[s+1]=F,o[s+2]=S,s+=c}else for(let i=0;i<l;++i){const r=3*e[i],a=t[r],l=t[r+1],d=t[r+2];let F=u*a+m*l+v*d,S=h*a+p*l+_*d,T=f*a+g*l+b*d;if(x){const e=F*F+S*S+T*T;if(e<y&&e>P){const t=1/Math.sqrt(e);F*=t,S*=t,T*=t}}for(let e=0;e<n;++e)o[s+0]=F,o[s+1]=S,o[s+2]=T,s+=c}}function mt(e,t,i,r,s,n=1){if(!i)return void dt(e,t,r,s,n);const a=i,o=r.typedBuffer,c=r.typedBufferStride,l=e.length,u=a[0],h=a[1],f=a[2],m=a[4],p=a[5],g=a[6],v=a[8],_=a[9],b=a[10],x=!d(a),P=1e-6,y=.999999;if(s*=c,1===n)for(let i=0;i<l;++i){const r=4*e[i],n=t[r],a=t[r+1],l=t[r+2],d=t[r+3];let F=u*n+m*a+v*l,S=h*n+p*a+_*l,T=f*n+g*a+b*l;if(x){const e=F*F+S*S+T*T;if(e<y&&e>P){const t=1/Math.sqrt(e);F*=t,S*=t,T*=t}}o[s+0]=F,o[s+1]=S,o[s+2]=T,o[s+3]=d,s+=c}else for(let i=0;i<l;++i){const r=4*e[i],a=t[r],l=t[r+1],d=t[r+2],F=t[r+3];let S=u*a+m*l+v*d,T=h*a+p*l+_*d,M=f*a+g*l+b*d;if(x){const e=S*S+T*T+M*M;if(e<y&&e>P){const t=1/Math.sqrt(e);S*=t,T*=t,M*=t}}for(let e=0;e<n;++e)o[s+0]=S,o[s+1]=T,o[s+2]=M,o[s+3]=F,s+=c}}function pt(e,t,i,r,s,n=1){const a=r.typedBuffer,o=r.typedBufferStride,c=e.length;if(s*=o,1===n){if(4===i)for(let i=0;i<c;++i){const r=4*e[i];a[s]=t[r],a[s+1]=t[r+1],a[s+2]=t[r+2],a[s+3]=t[r+3],s+=o}else if(3===i)for(let i=0;i<c;++i){const r=3*e[i];a[s]=t[r],a[s+1]=t[r+1],a[s+2]=t[r+2],a[s+3]=255,s+=o}}else if(4===i)for(let i=0;i<c;++i){const r=4*e[i];for(let e=0;e<n;++e)a[s]=t[r],a[s+1]=t[r+1],a[s+2]=t[r+2],a[s+3]=t[r+3],s+=o}else if(3===i)for(let i=0;i<c;++i){const r=3*e[i];for(let e=0;e<n;++e)a[s]=t[r],a[s+1]=t[r+1],a[s+2]=t[r+2],a[s+3]=255,s+=o}}function gt(e,t,i,r,s,n){for(const a of t.fieldNames){const t=e.vertexAttributes.get(a),o=e.indices.get(a);if(t&&o)switch(a){case"position":{M(3===t.size);const e=s.getField(a,$);e&&ht(o,t.data,i,e,n);break}case"normal":{M(3===t.size);const e=s.getField(a,$);e&&ft(o,t.data,r,e,n);break}case"uv0":{M(2===t.size);const e=s.getField(a,U);e&&lt(o,t.data,e,n);break}case"color":{M(3===t.size||4===t.size);const e=s.getField(a,E);e&&pt(o,t.data,t.size,e,n);break}case"symbolColor":{M(3===t.size||4===t.size);const e=s.getField(a,E);e&&pt(o,t.data,t.size,e,n);break}case"tangent":{M(4===t.size);const e=s.getField(a,C);e&&mt(o,t.data,r,e,n);break}}}}function vt(e,t){if(t.slicePlaneEnabled){e.extensions.add("GL_OES_standard_derivatives"),t.sliceEnabledForVertexPrograms&&(e.vertex.uniforms.add("slicePlaneOrigin","vec3"),e.vertex.uniforms.add("slicePlaneBasis1","vec3"),e.vertex.uniforms.add("slicePlaneBasis2","vec3")),e.fragment.uniforms.add("slicePlaneOrigin","vec3"),e.fragment.uniforms.add("slicePlaneBasis1","vec3"),e.fragment.uniforms.add("slicePlaneBasis2","vec3");const i=k`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,r=k`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
if (sliceByFactors(factors)) {
return color;
}
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`,s=t.sliceHighlightDisabled?k`#define highlightSlice(_color_, _pos_) (_color_)`:k`
        ${r}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `;t.sliceEnabledForVertexPrograms&&e.vertex.code.add(i),e.fragment.code.add(i),e.fragment.code.add(s)}else{const i=k`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`;t.sliceEnabledForVertexPrograms&&e.vertex.code.add(i),e.fragment.code.add(i)}}function _t(e,t,i){bt(e,t,i.slicePlane,i.origin)}function bt(e,t,i,s){t.slicePlaneEnabled&&(r(i)?(s?(S(xt,i.origin,s),e.setUniform3fv("slicePlaneOrigin",xt)):e.setUniform3fv("slicePlaneOrigin",i.origin),e.setUniform3fv("slicePlaneBasis1",i.basis1),e.setUniform3fv("slicePlaneBasis2",i.basis2)):(e.setUniform3fv("slicePlaneBasis1",T),e.setUniform3fv("slicePlaneBasis2",T),e.setUniform3fv("slicePlaneOrigin",T)))}const xt=f(),Pt=H(1,1,0,1),yt=H(1,0,1,1);function Ft(e){e.fragment.uniforms.add("depthTex","sampler2D"),e.fragment.uniforms.add("highlightViewportPixelSz","vec4"),e.fragment.constants.add("occludedHighlightFlag","vec4",Pt).add("unoccludedHighlightFlag","vec4",yt),e.fragment.code.add(k`void outputHighlight() {
vec4 fragCoord = gl_FragCoord;
float sceneDepth = texture2D(depthTex, (fragCoord.xy - highlightViewportPixelSz.xy) * highlightViewportPixelSz.zw).r;
if (fragCoord.z > sceneDepth + 5e-7) {
gl_FragColor = occludedHighlightFlag;
}
else {
gl_FragColor = unoccludedHighlightFlag;
}
}`)}function St(e,t){e.bindTexture(t.highlightDepthTexture,"depthTex"),e.setUniform4f("highlightViewportPixelSz",0,0,t.inverseViewport[0],t.inverseViewport[1])}const Tt=.1,Mt=.001;function At(e,t){const i=e.fragment;switch(t.alphaDiscardMode){case 0:i.code.add(k`
        #define discardOrAdjustAlpha(color) { if (color.a < ${k.float(.001)}) { discard; } }
      `);break;case 1:i.code.add(k`void discardOrAdjustAlpha(inout vec4 color) {
color.a = 1.0;
}`);break;case 2:i.uniforms.add("textureAlphaCutoff","float"),i.code.add(k`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } else { color.a = 1.0; } }`);break;case 3:e.fragment.uniforms.add("textureAlphaCutoff","float"),e.fragment.code.add(k`#define discardOrAdjustAlpha(color) { if (color.a < textureAlphaCutoff) { discard; } }`)}}function It(e,t){e.fragment.uniforms.add("terrainDepthTexture","sampler2D"),e.fragment.uniforms.add("cameraNearFar","vec2"),e.fragment.uniforms.add("inverseViewport","vec2"),e.fragment.code.add(k`
    // Compare the linearized depths of fragment and terrain. Discard fragments on the wrong side of the terrain.
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){

      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, cameraNearFar);
      if(fragmentDepth ${t.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `)}function wt(e,t){t.multipassTerrainEnabled&&t.terrainLinearDepthTexture&&e.bindTexture(t.terrainLinearDepthTexture,"terrainDepthTexture")}function Ot(e,t){e.fragment.include(R),3===t.output?(e.extensions.add("GL_OES_standard_derivatives"),e.fragment.code.add(k`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 2.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`)):1===t.output&&e.fragment.code.add(k`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)}const Dt={func:513},Bt={func:519},Lt={mask:255},zt={mask:0},Ct=e=>({function:{func:517,ref:e,mask:e},operation:{fail:7680,zFail:7680,zPass:7680}}),Et=e=>({function:{func:519,ref:e,mask:e},operation:{fail:7680,zFail:7680,zPass:7681}}),Ut={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:0}},$t={function:{func:519,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7681}},Ht={function:{func:514,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}},kt={function:{func:517,ref:2,mask:2},operation:{fail:7680,zFail:7680,zPass:7680}};export{Dt as $,It as A,St as B,me as C,ne as D,Lt as E,Et as F,Ut as G,Tt as H,oe as I,yt as J,ue as K,wt as L,Fe as M,fe as N,Ot as O,ae as P,xe as Q,G as R,q as S,pe as T,ge as U,_t as V,$t as W,Bt as X,kt as Y,zt as Z,Ht as _,te as a,ct as a0,ot as a1,ke as a2,Me as a3,Ge as a4,Pe as a5,ht as a6,ft as a7,dt as a8,nt as a9,_e as aa,gt as ab,pt as ac,Te as ad,be as ae,Qe as af,Be as ag,Le as ah,rt as ai,tt as aj,it as ak,re as b,ie as c,le as d,ce as e,R as f,k as g,ve as h,ze as i,Ie as j,we as k,Ke as l,Je as m,he as n,de as o,se as p,vt as q,Ft as r,Ct as s,et as t,bt as u,Ne as v,Xe as w,Ze as x,At as y,Mt as z};
