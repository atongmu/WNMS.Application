/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{i as n,b as t}from"../core/lang.js";import{isPoint as r,isPolyline as e,isPolygon as o,isMultipoint as u,isExtent as i}from"../geometry/support/jsonUtils.js";const s=(n,t,r)=>[t,r],l=(n,t,r)=>[t,r,n[2]],c=(n,t,r)=>[t,r,n[2],n[3]];function a(t){if(!t)return null;return{originPosition:"upper-left"===t.originPosition?"upperLeft":"lower-left"===t.originPosition?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance]:[1,1],translate:n(t.extent)?[t.extent.xmin,t.extent.ymax]:[0,0]}}function f({scale:n,translate:t},r){return Math.round((r-t[0])/n[0])}function m({scale:n,translate:t},r){return Math.round((t[1]-r)/n[1])}function g(n,t,r){const e=[];let o,u,i,s;for(let l=0;l<r.length;l++){const c=r[l];l>0?(i=f(n,c[0]),s=m(n,c[1]),i===o&&s===u||(e.push(t(c,i-o,s-u)),o=i,u=s)):(o=f(n,c[0]),u=m(n,c[1]),e.push(t(c,o,u)))}return e.length>0?e:null}function h({scale:n,translate:t},r){return r*n[0]+t[0]}function x({scale:n,translate:t},r){return t[1]-r*n[1]}function p(n,t,r){const e=new Array(r.length);if(!r.length)return e;const[o,u]=n.scale;let i=h(n,r[0][0]),s=x(n,r[0][1]);e[0]=t(r[0],i,s);for(let n=1;n<r.length;n++){const l=r[n];i+=l[0]*o,s-=l[1]*u,e[n]=t(l,i,s)}return e}function y(n,t,r){const e=new Array(r.length);for(let o=0;o<r.length;o++)e[o]=p(n,t,r[o]);return e}function z(n,t,r,e,o){return t.points=function(n,t,r,e){return g(n,r?e?c:l:e?l:s,t)}(n,r.points,e,o),t}function w(n,t,r,e,o){return t.x=f(n,r.x),t.y=m(n,r.y),t!==r&&(e&&(t.z=r.z),o&&(t.m=r.m)),t}function P(n,t,r,e,o){const u=function(n,t,r,e){const o=[],u=r?e?c:l:e?l:s;for(let r=0;r<t.length;r++){const e=g(n,u,t[r]);e&&e.length>=3&&o.push(e)}return o.length?o:null}(n,r.rings,e,o);return u?(t.rings=u,t):null}function d(n,t,r,e,o){const u=function(n,t,r,e){const o=[],u=r?e?c:l:e?l:s;for(let r=0;r<t.length;r++){const e=g(n,u,t[r]);e&&e.length>=2&&o.push(e)}return o.length?o:null}(n,r.paths,e,o);return u?(t.paths=u,t):null}function j(n,t){return n&&t?r(t)?w(n,{},t,!1,!1):e(t)?d(n,{},t,!1,!1):o(t)?P(n,{},t,!1,!1):u(t)?z(n,{},t,!1,!1):i(t)?function(n,t,r,e,o){return t.xmin=f(n,r.xmin),t.ymin=m(n,r.ymin),t.xmax=f(n,r.xmax),t.ymax=m(n,r.ymax),t!==r&&(e&&(t.zmin=r.zmin,t.zmax=r.zmax),o&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}(n,{},t,!1,!1):null:null}function b(t,r,e,o,u){return n(e)&&(r.points=function(n,t,r,e){return p(n,r?e?c:l:e?l:s,t)}(t,e.points,o,u)),r}function A(n,r,e,o,u){return t(e)||(r.x=h(n,e.x),r.y=x(n,e.y),r!==e&&(o&&(r.z=e.z),u&&(r.m=e.m))),r}function L(t,r,e,o,u){return n(e)&&(r.rings=function(n,t,r,e){return y(n,r?e?c:l:e?l:s,t)}(t,e.rings,o,u)),r}function M(t,r,e,o,u){return n(e)&&(r.paths=function(n,t,r,e){return y(n,r?e?c:l:e?l:s,t)}(t,e.paths,o,u)),r}export{L as a,b,A as c,j as d,w as q,a as t,M as u};
