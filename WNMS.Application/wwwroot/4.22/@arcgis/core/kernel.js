/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{h as e}from"./core/lang.js";import{getInterceptor as t,addQueryParameter as r}from"./core/urlUtils.js";import"./config.js";import"./chunks/object.js";import"./core/Error.js";import"./chunks/Logger.js";import"./chunks/string.js";const s="20211214",a="2f62aa11eb308d30278a805efbaca7231370b0d8",n="4.22",o={async request(e,r){var s;const{default:a}=await import("./request.js").then((e=>e.r)),n=e.options,o=n.responseType;n.signal=null==r?void 0:r.signal,n.responseType="native"===o||"native-request-init"===o?"native-request-init":["blob","json","text"].includes(o)&&null!=(s=t(e.url))&&s.after?o:"array-buffer";const i=await a(e.url,n),c={data:i.data,ssl:i.ssl};switch(i.requestOptions.responseType){case"native-request-init":return delete c.data.signal,c;case"blob":c.data=await c.data.arrayBuffer();break;case"json":c.data=(new TextEncoder).encode(JSON.stringify(c.data)).buffer;break;case"text":c.data=(new TextEncoder).encode(c.data).buffer}return{result:c,transferList:[c.data]}}};let i;function c(e){i=e}function l(e){const t=i&&i.findCredential(e);return t&&t.token?r(e,"token",t.token):e}e("host-webworker")||(console.debug(`Using ArcGIS API for JavaScript 4.22 [Date: 20211214, Revision: ${a.slice(0,8)}]`),console.warn("Only use ES modules from ArcGIS CDN for testing: https://arcg.is/1ii1Gb0"),(e("edge")||e("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser"));export{l as addTokenParameter,s as buildDate,i as id,a as revision,c as setId,n as version,o as workerMessages};
