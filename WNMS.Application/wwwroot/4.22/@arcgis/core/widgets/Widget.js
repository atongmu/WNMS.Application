/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import"../intl.js";import{d as t}from"../chunks/deprecate.js";import{b as s}from"../chunks/domUtils.js";import{E as n}from"../chunks/Evented.js";import r from"../core/Handles.js";import{k as o,clone as l}from"../core/lang.js";import{L as a}from"../chunks/Logger.js";import{a as i}from"../chunks/Promise.js";import{debounce as c,throwIfNotAbortError as $,eachAlways as d}from"../core/promiseUtils.js";import{g as h}from"../chunks/uuid.js";import{init as p,whenOnce as m}from"../core/watchUtils.js";import{property as u}from"../core/accessorSupport/decorators/property.js";import{cast as f}from"../core/accessorSupport/decorators/cast.js";import{r as g,subclass as y}from"../core/accessorSupport/decorators/subclass.js";import{S as v}from"../core/Accessor.js";import{d as w}from"../chunks/projector.js";import{g as b}from"../chunks/assets.js";import{makeAbsolute as k}from"../core/urlUtils.js";import{i as N,p as j,W as R}from"../chunks/jsxWidgetSupport.js";import{g as _,c as S}from"../chunks/widgetUtils.js";import{o as T}from"../chunks/locale.js";import{f as E}from"../chunks/messages.js";import"../chunks/number.js";import"../chunks/jsonMap.js";import"../chunks/object.js";import"../chunks/string.js";import"../request.js";import"../config.js";import"../kernel.js";import"../core/Error.js";import"../chunks/handleUtils.js";import"../core/Collection.js";import"../chunks/ArrayPool.js";import"../core/scheduling.js";import"../chunks/nextTick.js";import"../chunks/ensureType.js";import"../chunks/shared.js";import"../chunks/metadata.js";const x={handleInterceptedEvent:(e,t,s,n)=>(e.scheduleRender(),t.properties[`on${n.type}`].apply(t.properties.bind||s,[n]))},C={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,s)=>{e.style[t]=s}},L=(e,t,s=!1)=>{let n=e;return t.forEach(((e,r)=>{var o;const l=null!=(o=n)&&o.children?(a=n.children,i=t=>t.domNode===e,a.find(i)):void 0;var a,i;s&&!l&&r!==t.length-1||(n=l)})),n},P=!0,O=!0,A=!0,H=!0,M=!0,I=!0,U=!0,F=!0,B=!0,D=!0,W=!0,z=!0,V=!0,q=!0,G=!0,Y=!0,J=!1,K=!1,Q=!1,X=!1,Z=!0,ee=!1,te=!0,se=!0,ne=!1;let re,oe,le,ae=!1,ie=!1,ce=!1,$e=!1,de=null,he=!1;const pe="undefined"!=typeof window?window:{};!1&&pe.CSS;const me=pe.document||{head:{}};pe.HTMLElement;const ue={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,s,n)=>e.addEventListener(t,s,n),rel:(e,t,s,n)=>e.removeEventListener(t,s,n),ce:(e,t)=>new CustomEvent(e,t)},fe=!ee||!F||(()=>(me.head.attachShadow+"").indexOf("[native")>-1)(),ge=(()=>{let e=!1;try{me.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(e){}return e})(),ye=!!te&&(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),ve=(e,t,s,n)=>{s&&s.map((([s,n,r])=>{const o=be(e,s),l=we(t,r),a=ke(s);ue.ael(o,n,l,a),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>ue.rel(o,n,l,a)))}))},we=(e,t)=>s=>{try{X||e.$hostElement$[t](s)}catch(e){bt(e)}},be=(e,t)=>4&t?me:8&t?pe:16&t?me.body:e,ke=e=>ge?{passive:0!=(1&e),capture:0!=(2&e)}:0!=(2&e),Ne="http://www.w3.org/1999/xlink",je=new WeakMap,Re=e=>{const t=e.$cmpMeta$,s=e.$hostElement$,n=t.$flags$,r=(t.$tagName$,()=>{}),o=((e,t,s,n)=>{let r=_e(t,s),o=Rt.get(r);if(e=11===e.nodeType?e:me,o)if("string"==typeof o){e=e.head||e;let t,s=je.get(e);s||je.set(e,s=new Set),s.has(r)||(t=me.createElement("style"),t.innerHTML=o,e.insertBefore(t,e.querySelector("link")),s&&s.add(r))}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return r})(fe&&s.shadowRoot?s.shadowRoot:s.getRootNode(),t,e.$modeName$);10&n&&(s["s-sc"]=o,s.classList.add(o+"-h"),2&n&&s.classList.add(o+"-s")),r()},_e=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),Se={},Te=e=>"object"===(e=typeof e)||"function"===e,Ee=(e,t,...s)=>{let n=null,r=null,o=null,l=!1,a=!1,i=[];const c=t=>{for(let s=0;s<t.length;s++)n=t[s],Array.isArray(n)?c(n):null!=n&&"boolean"!=typeof n&&((l="function"!=typeof e&&!Te(n))&&(n=String(n)),l&&a?i[i.length-1].$text$+=n:i.push(l?xe(null,n):n),a=l)};if(c(s),t&&(J&&"input"===e&&He(t),V&&t.key&&(r=t.key),Z&&t.name&&(o=t.name),W)){const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}if(J&&i.some(Le)&&Nt("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),z&&"function"==typeof e)return e(null===t?{}:t,i,Pe);const $=xe(e,null);return $.$attrs$=t,i.length>0&&($.$children$=i),V&&($.$key$=r),Z&&($.$name$=o),$},xe=(e,t)=>{const s={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return D&&(s.$attrs$=null),V&&(s.$key$=null),Z&&(s.$name$=null),s},Ce={},Le=e=>e&&e.$tag$===Ce,Pe={forEach:(e,t)=>e.map(Oe).forEach(t),map:(e,t)=>e.map(Oe).map(t).map(Ae)},Oe=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Ae=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Ee(e.vtag,t,...e.vchildren||[])}const t=xe(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},He=e=>{const t=Object.keys(e),s=t.indexOf("type"),n=t.indexOf("min"),r=t.indexOf("max"),o=t.indexOf("min"),l=t.indexOf("value");-1!==l&&(l<s||l<n||l<r||l<o)&&jt('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},Me=(e,t,s,n,r,o)=>{if(s!==n){let l=wt(e,t),a=t.toLowerCase();if("class"===t){const t=e.classList,r=Ue(s),o=Ue(n);t.remove(...r.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!r.includes(e))))}else if("style"===t){for(const t in s)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)s&&n[t]===s[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const i=Te(n);if((l||i&&null!==n)&&!r)try{if(e.tagName.includes("-"))e[t]=n;else{let r=null==n?"":n;"list"===t?l=!1:null!=s&&e[t]==r||(e[t]=r)}}catch(e){}let c=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,c=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(c?e.removeAttributeNS(Ne,t):e.removeAttribute(t)):(!l||4&o||r)&&!i&&(n=!0===n?"":n,c?e.setAttributeNS(Ne,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):wt(pe,a)?a.slice(2):a[2]+t.slice(3),s&&ue.rel(e,t,s,!1),n&&ue.ael(e,t,n,!1)}},Ie=/\s/,Ue=e=>e?e.split(Ie):[],Fe=(e,t,s,n)=>{const r=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||Se,l=t.$attrs$||Se;for(n in o)n in l||Me(r,n,o[n],void 0,s,t.$flags$);for(n in l)Me(r,n,o[n],l[n],s,t.$flags$)},Be=(e,t,s,n)=>{let r,o,l,a=t.$children$[s],i=0;if(ae||(ce=!0,"slot"===a.$tag$&&(re&&n.classList.add(re+"-s"),a.$flags$|=a.$children$?2:1)),null!==a.$text$)r=a.$elm$=me.createTextNode(a.$text$);else if(1&a.$flags$)r=a.$elm$=me.createTextNode("");else{if($e||($e="svg"===a.$tag$),r=a.$elm$=me.createElementNS($e?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&a.$flags$?"slot-fb":a.$tag$),$e&&"foreignObject"===a.$tag$&&($e=!1),Fe(null,a,$e),null!=re&&r["s-si"]!==re&&r.classList.add(r["s-si"]=re),a.$children$)for(i=0;i<a.$children$.length;++i)o=Be(e,a,i,r),o&&r.appendChild(o);"svg"===a.$tag$?$e=!1:"foreignObject"===r.tagName&&($e=!0)}return r["s-hn"]=le,3&a.$flags$&&(r["s-sr"]=!0,r["s-cr"]=oe,r["s-sn"]=a.$name$||"",l=e&&e.$children$&&e.$children$[s],l&&l.$tag$===a.$tag$&&e.$elm$&&De(e.$elm$,!1)),r},De=(e,t)=>{ue.$flags$|=1;const s=e.childNodes;for(let e=s.length-1;e>=0;e--){const n=s[e];n["s-hn"]!==le&&n["s-ol"]&&(Ge(n).insertBefore(n,qe(n)),n["s-ol"].remove(),n["s-ol"]=void 0,ce=!0),t&&De(n,t)}ue.$flags$&=-2},We=(e,t,s,n,r,o)=>{let l,a=e["s-cr"]&&e["s-cr"].parentNode||e;for(a.shadowRoot&&a.tagName===le&&(a=a.shadowRoot);r<=o;++r)n[r]&&(l=Be(null,s,r,e),l&&(n[r].$elm$=l,a.insertBefore(l,qe(t))))},ze=(e,t,s,n,r)=>{for(;t<=s;++t)(n=e[t])&&(r=n.$elm$,Ze(n),ie=!0,r["s-ol"]?r["s-ol"].remove():De(r,!0),r.remove())},Ve=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),qe=e=>e&&e["s-ol"]||e,Ge=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Ye=(e,t)=>{const s=t.$elm$=e.$elm$,n=e.$children$,r=t.$children$,o=t.$tag$,l=t.$text$;let a;null===l?($e="svg"===o||"foreignObject"!==o&&$e,"slot"===o||Fe(e,t,$e),null!==n&&null!==r?((e,t,s,n)=>{let r,o,l=0,a=0,i=0,c=0,$=t.length-1,d=t[0],h=t[$],p=n.length-1,m=n[0],u=n[p];for(;l<=$&&a<=p;)if(null==d)d=t[++l];else if(null==h)h=t[--$];else if(null==m)m=n[++a];else if(null==u)u=n[--p];else if(Ve(d,m))Ye(d,m),d=t[++l],m=n[++a];else if(Ve(h,u))Ye(h,u),h=t[--$],u=n[--p];else if(Ve(d,u))"slot"!==d.$tag$&&"slot"!==u.$tag$||De(d.$elm$.parentNode,!1),Ye(d,u),e.insertBefore(d.$elm$,h.$elm$.nextSibling),d=t[++l],u=n[--p];else if(Ve(h,m))"slot"!==d.$tag$&&"slot"!==u.$tag$||De(h.$elm$.parentNode,!1),Ye(h,m),e.insertBefore(h.$elm$,d.$elm$),h=t[--$],m=n[++a];else{for(i=-1,c=l;c<=$;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){i=c;break}i>=0?(o=t[i],o.$tag$!==m.$tag$?r=Be(t&&t[a],s,i,e):(Ye(o,m),t[i]=void 0,r=o.$elm$),m=n[++a]):(r=Be(t&&t[a],s,a,e),m=n[++a]),r&&Ge(d.$elm$).insertBefore(r,qe(d.$elm$))}l>$?We(e,null==n[p+1]?null:n[p+1].$elm$,s,n,a,p):a>p&&ze(t,l,$)})(s,n,t,r):null!==r?(null!==e.$text$&&(s.textContent=""),We(s,null,t,r,0,r.length-1)):null!==n&&ze(n,0,n.length-1),$e&&"svg"===o&&($e=!1)):(a=s["s-cr"])?a.parentNode.textContent=l:e.$text$!==l&&(s.data=l)},Je=e=>{let t,s,n,r,o,l,a=e.childNodes;for(s=0,n=a.length;s<n;s++)if(t=a[s],1===t.nodeType){if(t["s-sr"])for(o=t["s-sn"],t.hidden=!1,r=0;r<n;r++)if(l=a[r].nodeType,a[r]["s-hn"]!==t["s-hn"]||""!==o){if(1===l&&o===a[r].getAttribute("slot")){t.hidden=!0;break}}else if(1===l||3===l&&""!==a[r].textContent.trim()){t.hidden=!0;break}Je(t)}},Ke=[],Qe=e=>{let t,s,n,r,o,l,a=0,i=e.childNodes,c=i.length;for(;a<c;a++){if(t=i[a],t["s-sr"]&&(s=t["s-cr"])&&s.parentNode)for(n=s.parentNode.childNodes,r=t["s-sn"],l=n.length-1;l>=0;l--)s=n[l],s["s-cn"]||s["s-nr"]||s["s-hn"]===t["s-hn"]||(Xe(s,r)?(o=Ke.find((e=>e.$nodeToRelocate$===s)),ie=!0,s["s-sn"]=s["s-sn"]||r,o?o.$slotRefNode$=t:Ke.push({$slotRefNode$:t,$nodeToRelocate$:s}),s["s-sr"]&&Ke.map((e=>{Xe(e.$nodeToRelocate$,s["s-sn"])&&(o=Ke.find((e=>e.$nodeToRelocate$===s)),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):Ke.some((e=>e.$nodeToRelocate$===s))||Ke.push({$nodeToRelocate$:s}));1===t.nodeType&&Qe(t)}},Xe=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,Ze=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(Ze)},et=(e,t,s)=>{const n=(e=>X?yt(e).$hostElement$:e)(e);return{emit:e=>(J&&!n.isConnected&&jt(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),tt(n,t,{bubbles:!!(4&s),composed:!!(2&s),cancelable:!!(1&s),detail:e}))}},tt=(e,t,s)=>{const n=ue.ce(t,s);return e.dispatchEvent(n),n},st=(e,t)=>{Y&&B&&(e.$flags$|=16),e.$ancestorComponent$;const s=()=>nt(e,t);return Y?Pt(s):s()},nt=(e,t)=>{const s=e.$hostElement$,n=(e.$cmpMeta$.$tagName$,()=>{}),r=s;let o;return o=it(r,t?"componentWillLoad":"componentWillUpdate"),o=ct(o,(()=>it(r,"componentWillRender"))),n(),ct(o,(()=>rt(e,r,t)))},rt=async(e,t,s)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{});n["s-rc"],s&&Re(e);const o=(e.$cmpMeta$.$tagName$,()=>{});ot(e,t,n),o(),r(),lt(e)},ot=(e,t,s)=>{try{de=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(A||U)&&(q||U)&&(Q||((e,t)=>{const s=e.$hostElement$,n=e.$cmpMeta$,r=e.$vnode$||xe(null,null),o=Le(t)?t:Ee(null,null,t);if(le=s.tagName,n.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},n.$attrsToReflect$.map((([e,t])=>o.$attrs$[t]=s[e]))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=r.$elm$=s.shadowRoot||s,re=s["s-sc"],oe=s["s-cr"],ae=fe&&0!=(1&n.$flags$),ie=!1,Ye(r,o),ue.$flags$|=1,ce){let e,t,s,n,r,l;Qe(o.$elm$);let a=0;for(;a<Ke.length;a++)e=Ke[a],t=e.$nodeToRelocate$,t["s-ol"]||(s=me.createTextNode(""),s["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=s,t));for(a=0;a<Ke.length;a++)if(e=Ke[a],t=e.$nodeToRelocate$,e.$slotRefNode$){for(n=e.$slotRefNode$.parentNode,r=e.$slotRefNode$.nextSibling,s=t["s-ol"];s=s.previousSibling;)if(l=s["s-nr"],l&&l["s-sn"]===t["s-sn"]&&n===l.parentNode&&(l=l.nextSibling,!l||!l["s-nr"])){r=l;break}(!r&&n!==t.parentNode||t.nextSibling!==r)&&t!==r&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),n.insertBefore(t,r))}else 1===t.nodeType&&(t.hidden=!0)}ie&&Je(o.$elm$),ue.$flags$&=-2,Ke.length=0})(e,t))}catch(t){bt(t,e.$hostElement$)}return de=null,null},lt=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},s=e.$hostElement$;e.$ancestorComponent$,it(s,"componentDidRender"),64&e.$flags$?(it(s,"componentDidUpdate"),t()):(e.$flags$|=64,it(s,"componentDidLoad"),t())},at=e=>{if(B){const t=yt(e),s=t.$hostElement$.isConnected;return s&&2==(18&t.$flags$)&&st(t,!1),s}return!1},it=(e,t,s)=>{if(e&&e[t])try{return e[t](s)}catch(e){bt(e)}},ct=(e,t)=>e&&e.then?e.then(t):t(),$t=(e,t,s,n)=>{const r=yt(e),o=e,l=r.$instanceValues$.get(t),a=r.$flags$,i=o;var c,$;if(c=s,$=n.$members$[t][0],(s=null==c||Te(c)?c:4&$?"false"!==c&&(""===c||!!c):2&$?parseFloat(c):1&$?String(c):c)!==l){if(r.$instanceValues$.set(t,s),n.$watchers$&&128&a){const e=n.$watchers$[t];e&&e.map((e=>{try{i[e](s,l,t)}catch(e){bt(e,o)}}))}if(2==(18&a)){if(i.componentShouldUpdate&&!1===i.componentShouldUpdate(s,l,t))return;st(r,!1)}}},dt=(e,t,s)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const s=Object.entries(t.$members$),n=e.prototype;s.map((([e,[s]])=>{(31&s||32&s)&&Object.defineProperty(n,e,{get(){return t=e,yt(this).$instanceValues$.get(t);var t},set(s){$t(this,e,s,t)},configurable:!0,enumerable:!0})}));{const r=new Map;n.attributeChangedCallback=function(e,t,s){ue.jmp((()=>{const t=r.get(e);if(this.hasOwnProperty(t))s=this[t],delete this[t];else if(n.hasOwnProperty(t)&&"number"==typeof this[t]&&this[t]==s)return;this[t]=(null!==s||"boolean"!=typeof this[t])&&s}))},e.observedAttributes=s.filter((([e,t])=>15&t[0])).map((([e,s])=>{const n=s[1]||e;return r.set(n,e),512&s[0]&&t.$attrsToReflect$.push([e,n]),n}))}}return e},ht=async(e,t,s,n,r)=>{if(0==(32&t.$flags$)&&(r=e.constructor,t.$flags$|=32,customElements.whenDefined(s.$tagName$).then((()=>t.$flags$|=128)),r.style)){let n=r.style;"string"!=typeof n&&(n=n[t.$modeName$=(e=>_t.map((t=>t(e))).find((e=>!!e)))(e)]);const o=_e(s,t.$modeName$);if(!Rt.has(o)){const e=(s.$tagName$,()=>{});((e,t,s)=>{let n=Rt.get(e);ye&&s?(n=n||new CSSStyleSheet,n.replace(t)):n=t,Rt.set(e,n)})(o,n,!!(1&s.$flags$)),e()}}t.$ancestorComponent$;st(t,!0)},pt=e=>{const t=e["s-cr"]=me.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},mt=(e,t)=>{const s={$flags$:t[0],$tagName$:t[1]};M&&(s.$members$=t[2]),H&&(s.$listeners$=t[3]),G&&(s.$watchers$=e.$watchers$),U&&(s.$attrsToReflect$=[]),F&&!fe&&1&s.$flags$&&(s.$flags$|=8);const n=e.prototype.connectedCallback,r=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){vt(this,s)},connectedCallback(){(e=>{if(0==(1&ue.$flags$)){const t=yt(e),s=t.$cmpMeta$,n=(s.$tagName$,()=>{});1&t.$flags$?(ve(e,t,s.$listeners$),t.$lazyInstance$):(t.$flags$|=1,12&s.$flags$&&pt(e),s.$members$&&Object.entries(s.$members$).map((([t,[s]])=>{if(31&s&&e.hasOwnProperty(t)){const s=e[t];delete e[t],e[t]=s}})),ht(e,t,s)),n()}})(this),P&&n&&n.call(this)},disconnectedCallback(){(e=>{if(0==(1&ue.$flags$)){const t=yt(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),O&&r&&r.call(this)},__attachShadow(){fe?se?this.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=s.$tagName$,dt(e,s)},ut=e=>{const t=new URL(e,ue.$resourcesUrl$);return t.origin!==pe.location.origin?t.href:t.pathname},ft=(e,t)=>t,gt=new WeakMap,yt=e=>gt.get(e),vt=(e,t)=>{const s={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return J&&(s.$renderCount$=0),I&&X&&(s.$onInstancePromise$=new Promise((e=>s.$onInstanceResolve$=e))),ne&&(s.$onReadyPromise$=new Promise((e=>s.$onReadyResolve$=e)),e["s-p"]=[],e["s-rc"]=[]),ve(e,s,t.$listeners$),gt.set(e,s)},wt=(e,t)=>t in e,bt=(e,t)=>(0,console.error)(e,t),kt=K?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],Nt=(...e)=>console.error(...kt,...e),jt=(...e)=>console.warn(...kt,...e),Rt=new Map,_t=[],St=[],Tt=[],Et=(e,t)=>s=>{e.push(s),he||(he=!0,t&&4&ue.$flags$?Lt(Ct):ue.raf(Ct))},xt=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){bt(e)}e.length=0},Ct=()=>{xt(St),xt(Tt),(he=St.length>0)&&ue.raf(Ct)},Lt=e=>{return Promise.resolve(t).then(e);var t},Pt=Et(Tt,!0),Ot={isDev:!!J,isBrowser:!0,isServer:!1,isTesting:!!K};let At;function Ht(){var e;e=k(b("esri/widgets/support/components/assets")),ue.$resourcesUrl$=e}At="esri/widgets/support/components/assets";const Mt=a.getLogger("esri.widgets.Widget");let It=0;const Ut=new Map,Ft="esri-icon-checkbox-unchecked";function Bt(e,t){for(const s in t)null!=e[s]&&("object"==typeof e[s]&&"object"==typeof t[s]?Bt(e[s],t[s]):e[s]=t[s]);return e}const Dt=(e=>{let t;const s={...x,...e},n=(e=>({...C,...e}))(s),r=n.performanceLogger;let o,l=!0,a=!1;const i=[],c=[],$=(e,o,l)=>{let a;n.eventHandlerInterceptor=(e,n,o,l)=>function(e){let n;r("domEvent",e);const o=((e,t)=>{const s=[];for(;e&&e!==t;)s.push(e),e=e.parentNode;return s})(e.currentTarget,a.domNode),l=o.some((e=>{var t;return customElements.get(null==e||null==(t=e.tagName)?void 0:t.toLowerCase())}));if(e.eventPhase===Event.CAPTURING_PHASE||!l)o.reverse(),n=L(a.getLastRender(),o);else{const t=e.composedPath(),s=t.slice(t.indexOf(e.currentTarget),t.indexOf(a.domNode)).filter((e=>e.getRootNode()===e.ownerDocument)).reverse();n=L(a.getLastRender(),s,!0)}let i;return n&&(i=s.handleInterceptedEvent(t,n,this,e)),r("domEventProcessed",e),i},null==s.postProcessProjectionOptions||s.postProcessProjectionOptions(n);const $=l();a=e(o,$,n),i.push(a),c.push(l),s.afterFirstVNodeRendered&&s.afterFirstVNodeRendered(a,$)};let d=()=>{if(o=void 0,l){l=!1,r("renderStart",void 0);for(let e=0;e<i.length;e++){const t=c[e]();r("rendered",void 0),i[e].update(t),r("patched",void 0)}r("renderDone",void 0),l=!0}};return s.modifyDoRenderImplementation&&(d=s.modifyDoRenderImplementation(d,i,c)),t={renderNow:d,scheduleRender:()=>{o||a||(o=requestAnimationFrame(d))},stop:()=>{o&&(cancelAnimationFrame(o),o=void 0),a=!0},resume:()=>{a=!1,l=!0,t.scheduleRender()},append:(e,t)=>{$(w.append,e,t)},insertBefore:(e,t)=>{$(w.insertBefore,e,t)},merge:(e,t)=>{$(w.merge,e,t)},replace:(e,t)=>{$(w.replace,e,t)},detach:e=>{for(let t=0;t<c.length;t++)if(c[t]===e)return c.splice(t,1),i.splice(t,1)[0];throw new Error("renderFunction was not found")}},t})({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,s=/capture$/i;e.eventHandlerInterceptor=(e,n,r,o)=>{const l=t(e,n,r,o),a=s.test(e);if(!((e=e.replace(s,"")).toLowerCase()in r)||a){const t=e[2].toLowerCase()+e.slice(3),s=e=>l.call(r,e);r.addEventListener(t,s,a);const n=()=>r.removeEventListener(t,s,a),i=o.afterRemoved;o.afterRemoved=e=>{null==i||i(e),n()}}return l}},handleInterceptedEvent(e,t,s,n){const{eventPhase:r,type:o}=n,l=r===Event.CAPTURING_PHASE;let a=`on${o}${l?"capture":""}`;const i=t.properties;(a in i||(a=`on${o[0].toUpperCase()}${o.slice(1)}${l?"Capture":""}`,a in i))&&(Ut.clear(),e.scheduleRender(),i[a].call(i.bind||s,n))}});let Wt=!1,zt=class extends(i(n.EventedAccessor)){constructor(e,s){super(e,s),this._attached=!1,this._internalHandles=new r,this._projector=Dt,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=Ft,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=c((async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const e=await d(this._messageBundleProps.map((async({bundlePath:e,propertyName:t})=>{let s=await E(e);this.uiStrings&&Object.keys(this.uiStrings)&&(s=Bt(l(s),this.uiStrings)),this[t]=s})));for(const t of e)t.error&&Mt.error("widget-intl:locale-error",this.declaredClass,t.error)}await this.loadLocale()})),Ht();const n=_()||"light";["light","dark"].includes(n)||t(Mt,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const o="esri-widget-uid-"+h(),a=this.render.bind(this);this._trackingTarget=new v((()=>this.scheduleRender()));const i=()=>{var e;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:o,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const t=a();let{properties:s}=t;s||(t.properties=s={});let{key:n,styles:r}=s;n||(s.key=o),r||(s.styles=r={}),r.display||(r.display="");let l=0;return null==(e=t.children)||e.forEach((e=>{if(N(e.vnodeSelector))return;let{properties:t}=e;t||(e.properties=t={}),t.key||(t.key=`${this.id}--${l++}`)})),j(this,t)};this.render=()=>{if(Wt)return i();let e=Ut.get(this);if(e)return e;this._trackingTarget.clear(),Wt=!0;try{e=g(this._trackingTarget,i)}finally{Wt=!1}return Ut.set(this,e),e},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then((()=>{this._readyForTrueRender=!0,this._postInitialize()})))}normalizeCtorArgs(e,t){const s={...e};return t&&(s.container=t),s}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then((()=>{})).catch($)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=o(this._trackingTarget),this.viewModel=o(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,Ut.delete(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return s(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+It++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Ut.delete(this),this._projector.scheduleRender())}classes(...e){return S.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){Ut.delete(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),null!=(e=this._delegatedEventNames)&&e.length&&this._internalHandles.add(p(this,"viewModel",((e,t)=>{t&&this._internalHandles.remove("delegated-events"),e&&this._internalHandles.add(this._delegatedEventNames.map((t=>e.on(t,(e=>{this.emit(t,e)})))),"delegated-events")}))),this.postInitialize();const t=async()=>{await this._loadLocale().catch($),this.scheduleRender()};this._internalHandles.add([T(t),this.watch("uiStrings",t),m(this,"container",(async e=>{this.destroyed||this._attach(e)}))])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};zt[R]=!0,e([u()],zt.prototype,"_readyForTrueRender",void 0),e([u({value:null})],zt.prototype,"container",null),e([f("container")],zt.prototype,"castContainer",null),e([u({aliasOf:"container"})],zt.prototype,"domNode",void 0),e([u()],zt.prototype,"iconClass",void 0),e([u()],zt.prototype,"id",null),e([u()],zt.prototype,"label",void 0),e([u()],zt.prototype,"renderable",null),e([u()],zt.prototype,"uiStrings",void 0),e([u()],zt.prototype,"viewModel",void 0),e([u()],zt.prototype,"visible",void 0),e([u()],zt.prototype,"key",void 0),e([u()],zt.prototype,"children",void 0),e([u()],zt.prototype,"afterCreate",void 0),e([u()],zt.prototype,"afterUpdate",void 0),e([u()],zt.prototype,"afterRemoved",void 0),zt=e([y("esri.widgets.Widget")],zt);const Vt=zt;export{Ot as B,ft as F,Ce as H,et as c,Vt as default,at as f,ut as g,Ee as h,mt as p};
