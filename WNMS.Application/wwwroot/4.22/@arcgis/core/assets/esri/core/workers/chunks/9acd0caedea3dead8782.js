"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6971],{92482:(e,t,i)=>{i.d(t,{N:()=>f,a:()=>n,b:()=>h,f:()=>l,k:()=>u,l:()=>o,t:()=>a,y:()=>c});var s=i(76506),r=(i(82426),i(21801));function n(e=m){return[e[0],e[1],e[2],e[3]]}function o(e,t,i,s,r=n()){return r[0]=e,r[1]=t,r[2]=i,r[3]=s,r}function l(e,t=n()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function a(e,t){return new r.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e){return t=e,((0,s.b)(t)||t[0]>=t[2]?0:t[2]-t[0])*function(e){return e[1]>=e[3]?0:e[3]-e[1]}(e);var t}function u(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function h(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const f=[1/0,1/0,-1/0,-1/0],m=[0,0,0,0]},60217:(e,t,i)=>{i.d(t,{A:()=>u,a:()=>a,b:()=>l,c:()=>c,l:()=>o}),i(74569);var s=i(76506),r=i(60947);let n;function o(){return n||(n=(async()=>{const e=await i.e(1886).then(i.bind(i,1886)).then((e=>e.R));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),n}const l=(e,t,i)=>u.create(e,t,i,null,["$feature"]),a=(e,t,i)=>u.create(e,t,i,null,["$feature","$view"]),c=(e,t,i,s)=>u.create(e,t,i,s,["$feature","$view"]);class u{constructor(e,t,i,s,r,n,o,l){this.script=e,this.evaluate=r;const a=Array.isArray(o)?o:o.fields;this.fields=a,this._syntaxTree=s,this._arcade=t,this._arcadeDictionary=i,this._arcadeFeature=n,this._spatialReference=l,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,n,l,a){const{arcade:c,Feature:h,Dictionary:f}=await o(),m=r.Z.fromJSON(t),d=c.parseScript(e,a),p=l.reduce(((e,t)=>({...e,[t]:null})),{});let g=null;(0,s.i)(n)&&(g=new f(n),g.immutable=!0,p.$config=null);const _=c.scriptUsesGeometryEngine(d)&&c.enableGeometrySupport(),y=c.scriptUsesFeatureSet(d)&&c.enableFeatureSetSupport(),v=c.scriptIsAsync(d)&&c.enableAsyncSupport(),b={vars:p,spatialReference:m,useAsync:!!v},w=new f;w.immutable=!1,w.setField("scale",0);const S=c.compileScript(d,b);return await Promise.all([_,y,v]),new u(e,c,f,d,(e=>("$view"in e&&e.$view&&(w.setField("scale",e.$view.scale),e.$view=w),g&&(e.$config=g),S({vars:e,spatialReference:m}))),new h,i,m)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},29794:(e,t,i)=>{i.d(t,{E:()=>s,R:()=>r});const s=1e-6,r=Math.random;Math.PI,Math.PI},38742:(e,t,i)=>{i.d(t,{f:()=>n,i:()=>h,p:()=>m,r:()=>l,t:()=>o,w:()=>a});var s=i(76506),r=i(32101);function n(e,t){const i=t&&t.url&&t.url.path;if(e&&i&&(e=(0,r.hF)(e,i,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=(0,r.PF)(e,t.portalItem.itemUrl);u.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return f(e,t&&t.portal)}function o(e,t,i=0){if(!e)return e;!(0,r.YP)(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let s=(0,r.hF)(e);if(t){const i=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(i){const n=f(i,t.portal);s=(0,r.PF)(f(s,t.portal),n,n),s!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=function(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?(0,r.Ie)(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}(s,t&&t.portal),(0,r.YP)(s)&&(s=(0,r.Fv)(s)),null!=t&&t.resources&&null!=t&&t.portalItem&&!(0,r.YP)(s)&&!(0,r.HK)(s)&&0===i&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(s)}),s}function l(e,t,i){return n(e,i)}function a(e,t,i,s){const r=o(e,s);void 0!==r&&(t[i]=r)}const c=/\/items\/([^\/]+)\/resources\//,u=/^\.\/resources\//;function h(e){const t=(0,s.i)(e)?e.match(c):null;return(0,s.i)(t)?t[1]:null}function f(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const i=`${t.urlKey}.${t.customBaseUrl}`;return(0,r.D6)(r.Gd,`${r.Gd.scheme}://${i}`)?(0,r.Ie)(e,t.portalHostname,i):(0,r.Ie)(e,i,t.portalHostname)}const m=Object.freeze({__proto__:null,fromJSON:n,toJSON:o,read:l,write:a,itemIdFromResourceUrl:h})},95587:(e,t,i)=>{i.d(t,{S:()=>o,W:()=>c,a:()=>h,b:()=>u,c:()=>l,d:()=>a,e:()=>m,g:()=>f});var s=i(60947),r=i(89623);function n(e){return new s.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const o=n(r.e),l=n(r.m),a=n(r.a),c=new s.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${r.e.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function u(e){return e&&e===r.m?l:e&&e===r.a?a:o}function h(e){return e&&((0,s.f)(e)||e===l)?l:e&&((0,s.h)(e)||e===a)?a:o}function f(e){return e&&((0,s.f)(e)||e===l)?r.m:e&&((0,s.h)(e)||e===a)?r.a:r.e}function m(e){return(0,s.c)(e)?r.m:(0,s.d)(e)?r.a:r.e}},3530:(e,t,i)=>{function s(e){return(t,i)=>{t[i]=e}}i.d(t,{s:()=>s})},22781:(e,t,i)=>{i.d(t,{f:()=>r,t:()=>n});var s=i(57251);const r=(0,s.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),n=(0,s.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},53785:(e,t,i)=>{i.d(t,{a:()=>C,b:()=>A,c:()=>w,d:()=>U,e:()=>R,f:()=>B,g:()=>x,i:()=>a,l:()=>S,u:()=>I,w:()=>O});var s=i(76506),r=i(57251),n=i(95587),o=i(60947),l=i(89623);const a=39.37,c=l.e.radius*Math.PI/200,u=/UNIT\[([^\]]+)\]\]$/i,h=o.o,f=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),d=(0,r.s)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),p=e=>e*e,g=e=>e*e*e,_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:p(.001)},"square-centimeters":{inBaseUnits:p(.01)},"square-decimeters":{inBaseUnits:p(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:p(1e3)},"square-inches":{inBaseUnits:p(.0254)},"square-feet":{inBaseUnits:p(.3048)},"square-yards":{inBaseUnits:p(.9144)},"square-miles":{inBaseUnits:p(1609.344)},"square-us-feet":{inBaseUnits:p(1200/3937)},acres:{inBaseUnits:.0015625*p(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},y=function(){const e={};for(const t in _)for(const i in _[t].units)e[i]=t;return e}();function v(e){const t=y[e];if(t)return t;throw new Error("unknown measure")}function b(e,t=null){return t=t||v(e),_[t].baseUnit===e}function w(e,t,i){if(t===i)return e;const s=v(t);if(s!==v(i))throw new Error("incompatible units");const r=b(t,s)?e:function(e,t,i){return e*_[i].units[t].inBaseUnits}(e,t,s);return b(i,s)?r:function(e,t,i){return e/_[i].units[t].inBaseUnits}(r,i,s)}function S(e,t,i){return w(e,t,"meters")/(i*Math.PI/180)}function I(e){return d.fromJSON(e.toLowerCase())||null}function A(e){if(e&&"object"==typeof e&&!(0,o.b)(e))return 1;const t=U(e);return t>1e5?1:t}function x(e){return U(e)>=(e instanceof o.Z?(0,n.g)(e).metersPerDegree:1e5)?"meters":O(e)}function U(e,t=l.e.metersPerDegree){return C(e,!0)||t}function C(e,t=!1){let i,s,r=null;if(null!=e&&("object"==typeof e?(i=e.wkid,s=e.wkt):"number"==typeof e?i=e:"string"==typeof e&&(s=e)),i){if((0,o.c)(i))return l.m.metersPerDegree;if((0,o.d)(i))return l.a.metersPerDegree;r=h.values[h[i]],!r&&t&&m.has(i)&&(r=c)}else s&&(P(s)?r=T(u.exec(s),r):E(s)&&(r=T(f.exec(s),r)));return r}function T(e,t){return e&&e[1]?F(e[1]):t}function F(e){return parseFloat(e.split(",")[1])}function O(e){let t,i,r=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t)r=h.units[h[t]];else if(i){const e=P(i)?u:E(i)?f:null;if(e){const t=e.exec(i);t&&t[1]&&(r=function(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||-1===h.units.indexOf(i)){const t=F(e);i=null;const s=h.values;for(let e=0;e<s.length;++e)if(Math.abs(t-s[e])<1e-7){i=h.units[e];break}}return i}(t[1]))}}return(0,s.i)(r)?I(r):null}function E(e){return/^GEOCCS/i.test(e)}function P(e){return/^PROJCS/i.test(e)}const N={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},G={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},R=(0,r.s)()(N),B=(0,r.s)()(G);(0,r.s)()({...N,...G})},15324:(e,t,i)=>{i.d(t,{Z:()=>C});var s,r=i(29768),n=i(91055),o=i(76996),l=i(76506),a=i(6906),c=i(34250),u=i(91306),h=i(3530),f=i(17533),m=i(21972);i(22723),i(50406),i(60991),i(92143),i(31450),i(71552),i(40642),i(86656),i(23639);class d{constructor(){this._observers=[]}observe(e){return this._observers.includes(e)||this._observers.push(e),new m.O(this._observers,e)}notify(){const e=this._observers.slice();for(let t=0;t<e.length;++t){const i=e[t];i.onInvalidated(),i.onCommitted()}}}const p=new n.O(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),g=()=>{};function _(e){return e?e instanceof U?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function y(e){if(e&&e.length)return e[0]}function v(e,t,i,s){const r=Math.min(e.length-i,t.length-s);let n=0;for(;n<r&&e[i+n]===t[s+n];)n++;return n}function b(e,t,i,s){t&&t.forEach(((t,r,n)=>{e.push(t),b(e,i.call(s,t,r,n),i,s)}))}const w=new Set,S=new Set,I=new Set,A=new Map;let x=0,U=s=class extends o.E.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new d,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:x++})}static isCollection(e){return null!=e&&e instanceof s}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof s?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,f.t)(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,_(e)),this._emitAfterChanges(1))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,i={removed:!1,callback:t};return e.push(i),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=g,i.removed=!0,e.splice(e.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if((0,f.t)(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(null!=t?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if((0,f.t)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(t);return this._splice(i,0,_(e)),this._emitAfterChanges(1),this}removeAll(){if((0,f.t)(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return(0,f.t)(this._observable),this._createNewInstance({items:this._items.map(l.d9)})}concat(...e){(0,f.t)(this._observable);const t=e.map(_);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,f.t)(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=(0,l.a)(this._splice(0,this.length)),s=i.length;for(let r=0;r<s;r++)e.call(t,i[r],r,i);this._emitAfterChanges(2)}every(e,t){return(0,f.t)(this._observable),this._items.every(e,t)}filter(e,t){let i;return(0,f.t)(this._observable),i=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return(0,f.t)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,f.t)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,f.t)(this._observable);const i=[];return b(i,this,e,t),new s(i)}forEach(e,t){return(0,f.t)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,f.t)(this._observable),this._items[e]}getNextIndex(e){(0,f.t)(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,f.t)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,f.t)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,f.t)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,f.t)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,f.t)(this._observable);const i=this._items.map(e,t);return new s({items:i})}reorder(e,t=this.length-1){(0,f.t)(this._observable);const i=this.indexOf(e);if(-1!==i){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(4))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(4)}return e}}pop(){if((0,f.t)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=y(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return(0,f.t)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,e),this._emitAfterChanges(1)),this.length}reduce(e,t){(0,f.t)(this._observable);const i=this._items;return 2===arguments.length?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){(0,f.t)(this._observable);const i=this._items;return 2===arguments.length?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return(0,f.t)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,f.t)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=y(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if((0,f.t)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof s?e.toArray():e,i=this._items,r=[],n=t.length;for(let e=0;e<n;e++){const s=t[e],n=i.indexOf(s);if(n>-1){const s=1+v(t,i,e+1,n+1),o=this._splice(n,s);o&&o.length>0&&r.push.apply(r,o),e+=s-1}}return this._emitAfterChanges(2),r}reverse(){if((0,f.t)(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(4),this}shift(){if((0,f.t)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=y(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return(0,f.t)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,f.t)(this._observable),this._items.some(e,t)}sort(e){if((0,f.t)(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=(0,l.a)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(4),this}splice(e,t,...i){(0,f.t)(this._observable);const s=(t?2:0)|(i.length?1:0);if(this._emitBeforeChanges(s))return[];const r=this._splice(e,t,i)||[];return this._emitAfterChanges(s),r}toArray(){return(0,f.t)(this._observable),this._items.slice()}toJSON(){return(0,f.t)(this._observable),this.toArray()}toLocaleString(){return(0,f.t)(this._observable),this._items.toLocaleString()}toString(){return(0,f.t)(this._observable),this._items.toString()}unshift(...e){return(0,f.t)(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const s=this._items,r=this.itemType;let n,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,a.Os)((()=>this._dispatchChange()))),t){if(o=s.splice(e,t),this.hasEventListener("before-remove")){const t=p.acquire();t.target=this,t.cancellable=!0;for(let i=0,r=o.length;i<r;i++)n=o[i],t.reset(n),this.emit("before-remove",t),t.defaultPrevented&&(o.splice(i,1),s.splice(e,0,n),e+=1,i-=1,r-=1);p.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=p.acquire();e.target=this,e.cancellable=!1;const t=o.length;for(let i=0;i<t;i++)e.reset(o[i]),this.emit("after-remove",e);p.release(e)}}if(i&&i.length){if(r){const e=[];for(const t of i){const i=r.ensureType(t);null==i&&null!=t||e.push(i)}i=e}const t=this.hasEventListener("before-add"),n=this.hasEventListener("after-add"),o=e===this.length;if(t||n){const r=p.acquire();r.target=this,r.cancellable=!0;const l=p.acquire();l.target=this,l.cancellable=!1;for(const a of i)t?(r.reset(a),this.emit("before-add",r),r.defaultPrevented||(o?s.push(a):s.splice(e++,0,a),this._set("length",s.length),n&&(l.reset(a),this.emit("after-add",l)))):(o?s.push(a):s.splice(e++,0,a),this._set("length",s.length),l.reset(a),this.emit("after-add",l));p.release(l),p.release(r)}else{if(o)for(const e of i)s.push(e);else s.splice(e,0,...i);this._set("length",s.length)}}return(i&&i.length||o&&o.length)&&this._notifyChangeEvent(i,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=p.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,p.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=p.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),p.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;w.clear(),S.clear(),I.clear();for(const{added:t,removed:i}of e){if(t)if(0===I.size&&0===S.size)for(const e of t)w.add(e);else for(const e of t)S.has(e)?(I.add(e),S.delete(e)):I.has(e)||w.add(e);if(i)if(0===I.size&&0===w.size)for(const e of i)S.add(e);else for(const e of i)w.has(e)?w.delete(e):(I.delete(e),S.add(e))}const i=n.A.acquire();w.forEach((e=>{i.push(e)}));const s=n.A.acquire();S.forEach((e=>{s.push(e)}));const r=this._items,o=t.items,l=n.A.acquire();if(I.forEach((e=>{o.indexOf(e)!==r.indexOf(e)&&l.push(e)})),t.listeners&&(i.length||s.length||l.length)){const e={target:this,added:i,removed:s,moved:l},r=t.listeners.length;for(let i=0;i<r;i++){const s=t.listeners[i];s.removed||s.callback.call(this,e)}}n.A.release(i),n.A.release(s),n.A.release(l)}w.clear(),S.clear(),I.clear()}};U.ofType=e=>{if(!e)return s;if(A.has(e))return A.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const s=e.typeMap[i].prototype.declaredClass;t?t+=` | ${s}`:t=s}let i=class extends s{};return(0,r._)([(0,h.s)({Type:e,ensureType:"function"==typeof e?(0,u.e)(e):(0,u.a)(e)})],i.prototype,"itemType",void 0),i=(0,r._)([(0,f.j)(`esri.core.Collection<${t}>`)],i),A.set(e,i),i},(0,r._)([(0,c.Cb)()],U.prototype,"length",void 0),(0,r._)([(0,c.Cb)()],U.prototype,"items",null),U=s=(0,r._)([(0,f.j)("esri.core.Collection")],U);const C=U},74569:(e,t,i)=>{i.d(t,{qM:()=>u});var s=i(91306),r=i(21801),n=i(73796),o=i(84069),l=i(91597),a=i(44567),c=i(92896);i(60947),i(22781),i(32422),i(76506),i(92143),i(31450),i(71552),i(40642),i(34250),i(86656),i(22723),i(17533),i(60991),i(35132),i(89623),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(2906),i(97714),i(86787),i(98380),i(57251);const u={base:n.Z,key:"type",typeMap:{extent:r.Z,multipoint:o.Z,point:l.Z,polyline:c.Z,polygon:a.Z}};(0,s.a)(u)},32422:(e,t,i)=>{i.d(t,{im:()=>p,q9:()=>y,Ji:()=>g,YX:()=>u,aW:()=>h,wp:()=>f,oU:()=>d,l9:()=>m});var s=i(76506),r=i(21801),n=i(73796),o=i(84069),l=i(91597),a=i(44567),c=i(92896);function u(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function h(e){return void 0!==e.points}function f(e){return void 0!==e.x&&void 0!==e.y}function m(e){return void 0!==e.paths}function d(e){return void 0!==e.rings}function p(e){return(0,s.b)(e)?null:e instanceof n.Z?e:f(e)?l.Z.fromJSON(e):m(e)?c.Z.fromJSON(e):d(e)?a.Z.fromJSON(e):h(e)?o.Z.fromJSON(e):u(e)?r.Z.fromJSON(e):null}function g(e){return e?f(e)?"esriGeometryPoint":m(e)?"esriGeometryPolyline":d(e)?"esriGeometryPolygon":u(e)?"esriGeometryEnvelope":h(e)?"esriGeometryMultipoint":null:null}i(40642),i(71552),i(34250),i(92143),i(31450),i(91306),i(86656),i(22723),i(17533),i(60991),i(60947),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(2906),i(35132),i(89623),i(97714),i(86787),i(98380);const _={esriGeometryPoint:l.Z,esriGeometryPolyline:c.Z,esriGeometryPolygon:a.Z,esriGeometryEnvelope:r.Z,esriGeometryMultipoint:o.Z};function y(e){return e&&_[e]||null}},92817:(e,t,i)=>{i.d(t,{Z:()=>u});var s,r=i(29768),n=i(74673),o=i(34250),l=(i(76506),i(91306)),a=i(17533);i(21972),i(23639),i(92143),i(31450),i(71552),i(40642),i(86656),i(22723),i(91055),i(6906),i(50406),i(60991);let c=s=class extends n.a{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new s({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};(0,r._)([(0,o.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"cols",void 0),(0,r._)([(0,o.Cb)({type:l.I,json:{write:!0}})],c.prototype,"level",void 0),(0,r._)([(0,o.Cb)({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0),(0,r._)([(0,o.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"origin",void 0),(0,r._)([(0,o.Cb)({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0),(0,r._)([(0,o.Cb)({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],c.prototype,"rows",void 0),(0,r._)([(0,o.Cb)({type:Number,json:{write:!0}})],c.prototype,"scale",void 0),c=s=(0,r._)([(0,a.j)("esri.layers.support.LOD")],c);const u=c},43352:(e,t,i)=>{i.d(t,{Z:()=>w});var s,r=i(29768),n=i(57251),o=i(74673),l=i(76506),a=i(53785),c=i(34250),u=i(91306),h=i(97714),f=i(17533),m=i(2906),d=i(91597),p=i(60947),g=i(92482),_=i(35132),y=i(92817);i(71552),i(21972),i(23639),i(92143),i(31450),i(40642),i(86656),i(22723),i(91055),i(6906),i(50406),i(60991),i(95587),i(89623),i(86787),i(73796),i(82426),i(29794),i(21801);const v=new n.J({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let b=s=class extends o.a{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:i,size:r=256,spatialReference:n=p.Z.WebMercator,numLODs:o=24}=e;if(!(0,p.j)(n)){const e=[];if(i)for(let t=0;t<i.length;t++){const s=i[t];e.push({level:t,scale:s,resolution:s})}else{let t=5e-4;for(let i=o-1;i>=0;i--)e.unshift({level:i,scale:t,resolution:t}),t*=2}return new s({dpi:96,lods:e,origin:new d.Z(0,0,n),size:[r,r],spatialReference:n})}const l=(0,p.g)(n),c=e.origin?new d.Z({x:e.origin.x,y:e.origin.y,spatialReference:n}):new d.Z(l?{x:l.origin[0],y:l.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),u=1/(39.37*(0,a.d)(n)*96),h=[];if(i)for(let e=0;e<i.length;e++){const t=i[e],s=t*u;h.push({level:e,scale:t,resolution:s})}else{let e=(0,p.m)(n)?512/r*591657527.5917094:256/r*591657527.591555;const i=Math.ceil(o/t);h.push({level:0,scale:e,resolution:e*u});for(let s=1;s<i;s++){const i=e/2**t,r=i*u;h.push({level:s,scale:i,resolution:r}),e=i}}return new s({dpi:96,lods:h,origin:c,size:[r,r],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const i=(0,p.g)(e);return e.isWrappable&&Math.abs(i.origin[0]-t.x)<=i.dx}return!1}readOrigin(e,t){return d.Z.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,i=0;const s=[];this._levelToLOD={},e&&(t=-1/0,i=1/0,e.forEach((e=>{s.push(e.scale),t=e.scale>t?e.scale:t,i=e.scale<i?e.scale:i,this._levelToLOD[e.level]=e}))),this._set("scales",s),this._set("minScale",t),this._set("maxScale",i),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const i=Math.floor(e),s=i+1;return t[i]/(t[i]/t[s])**(e-i)}}scaleToZoom(e){const t=this.scales,i=t.length-1;let s=0;for(;s<i;s++){const i=t[s],r=t[s+1];if(i<=e)return s;if(r===e)return s+1;if(i>e&&r<e)return s+Math.log(i/e)/Math.log(i/r)}return s}snapScale(e,t=.95){const i=this.scaleToZoom(e);return i%Math.floor(i)>=t?this.zoomToScale(Math.ceil(i)):this.zoomToScale(Math.floor(i))}tileAt(e,t,i,s){const r=this.lodAt(e);if(!r)return null;let n,o;if("number"==typeof t)n=t,o=i;else if((0,p.e)(t.spatialReference,this.spatialReference))n=t.x,o=t.y,s=i;else{const e=(0,_.iV)(t,this.spatialReference);if((0,l.b)(e))return null;n=e.x,o=e.y,s=i}const a=r.resolution*this.size[0],c=r.resolution*this.size[1];return s||(s={id:null,level:0,row:0,col:0,extent:(0,g.a)()}),s.level=e,s.row=Math.floor((this.origin.y-o)/c+.001),s.col=Math.floor((n-this.origin.x)/a+.001),this.updateTileInfo(s),s}updateTileInfo(e,t=0){let i=this.lodAt(e.level);if(!i&&1===t){const t=this.lods[this.lods.length-1];t.level<e.level&&(i=t)}if(!i)return;const s=e.level-i.level,r=i.resolution*this.size[0]/2**s,n=i.resolution*this.size[1]/2**s;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=(0,g.a)()),e.extent[0]=this.origin.x+e.col*r,e.extent[1]=this.origin.y-(e.row+1)*n,e.extent[2]=e.extent[0]+r,e.extent[3]=e.extent[1]+n}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||-1===t.parentLevel||(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),0))}getTileBounds(e,t){const{resolution:i}=this.lodAt(t.level),s=i*this.size[0],r=i*this.size[1];return e[0]=this.origin.x+t.col*s,e[1]=this.origin.y-(t.row+1)*r,e[2]=e[0]+s,e[3]=e[1]+r,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return s.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let i=0;i<e.length;i++){const s=e[i];this._upsampleLevels[s.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/s.resolution:0},t=s}}};(0,r._)([(0,c.Cb)({type:Number,json:{write:!0}})],b.prototype,"compressionQuality",void 0),(0,r._)([(0,c.Cb)({type:Number,json:{write:!0}})],b.prototype,"dpi",void 0),(0,r._)([(0,c.Cb)({type:String,json:{read:v.read,write:v.write,origins:{"web-scene":{read:!1,write:!1}}}})],b.prototype,"format",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],b.prototype,"isWrappable",null),(0,r._)([(0,c.Cb)({type:d.Z,json:{write:!0}})],b.prototype,"origin",void 0),(0,r._)([(0,h.r)("origin")],b.prototype,"readOrigin",null),(0,r._)([(0,c.Cb)({type:[y.Z],value:null,json:{write:!0}})],b.prototype,"lods",null),(0,r._)([(0,c.Cb)({readOnly:!0})],b.prototype,"minScale",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],b.prototype,"maxScale",void 0),(0,r._)([(0,c.Cb)({readOnly:!0})],b.prototype,"scales",void 0),(0,r._)([(0,c.Cb)({cast:e=>Array.isArray(e)?e:"number"==typeof e?[e,e]:[256,256]})],b.prototype,"size",void 0),(0,r._)([(0,h.r)("size",["rows","cols"])],b.prototype,"readSize",null),(0,r._)([(0,m.w)("size",{cols:{type:u.I},rows:{type:u.I}})],b.prototype,"writeSize",null),(0,r._)([(0,c.Cb)({type:p.Z,json:{write:!0}})],b.prototype,"spatialReference",void 0),b=s=(0,r._)([(0,f.j)("esri.layers.support.TileInfo")],b);const w=b},14249:(e,t,i)=>{i.d(t,{io:()=>_,AB:()=>g,gd:()=>p,Mu:()=>b,Q0:()=>d,YN:()=>u,UF:()=>f,O5:()=>y,os:()=>w,H7:()=>P,qN:()=>N,v5:()=>O,Pz:()=>B,Qc:()=>M,vP:()=>Z});var s,r,n=i(60991),o=(i(76506),i(71552)),l=i(60217);i(92143),i(31450),i(40642),i(74569),i(91306),i(21801),i(34250),i(86656),i(22723),i(17533),i(73796),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(97714),i(60947),i(2906),i(91597),i(86787),i(35132),i(89623),i(84069),i(44567),i(98380),i(92896),i(22781),i(57251),i(32422),(r=s||(s={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",r.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const a=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(h(a,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)h(c,e,t)}function h(e,t,i){if(e)for(const s of e){const e=(0,o.g)(s,t),r=e&&"function"!=typeof e&&i.get(e);r&&(0,o.s)(s,r.name,t)}}function f(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const i=t.get(e.startField),s=t.get(e.endField);e.startField=i&&i.name||null,e.endField=s&&s.name||null}else{const i=t.get(e.startTimeField),s=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=s&&s.name||null}}const m=new Set;function d(e,t){return e&&t?(m.clear(),p(m,e,t),Array.from(m).sort()):[]}function p(e,t,i){var s;if(i)if(null!=t&&null!=(s=t.fields)&&s.length)if(i.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const s of i)g(e,t,s);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function g(e,t,i){if("string"==typeof i)if(t){const s=t.get(i);s&&e.add(s.name)}else e.add(i)}async function _(e,t,i){var s;if(!i)return;const{arcadeUtils:r}=await(0,l.l)(),n=r.extractFieldNames(i,null==t||null==(s=t.fields)?void 0:s.map((e=>e.name)));for(const i of n)g(e,t,i)}function y({displayField:e,fields:t}){return e||(t&&t.length?v(t,"name-or-title")||v(t,"unique-identifier")||v(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function v(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function b(e,t){const{labelingInfo:s,fieldsIndex:r}=t;s&&s.length&&await Promise.all(s.map((t=>async function(e,t,s){if(!s)return;const r=s.getLabelExpression(),o=s.where;if("arcade"===r.type)await _(e,t,r.expression);else{const i=r.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{g(e,t,i.slice(1,-1))}))}await async function(e,t,s){if(s&&"1=1"!==s){const r=(await Promise.all([i.e(2274),i.e(5777)]).then(i.bind(i,72274))).WhereClause.create(s,t);if(!r.isStandardized)throw new n.Z("fieldUtils:collectFilterFields","Where clause is not standardized");p(e,t,r.fieldNames)}}(e,t,o)}(e,r,t))))}function w(e){const t=e.defaultValue;return void 0!==t&&F(e,t)?t:e.nullable?null:void 0}function S(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function I(e){return null===e||S(e)}const A="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function x(e){return null===e||A(e)}function U(e){return null!=e&&"string"==typeof e}function C(e){return null===e||U(e)}function T(){return!0}function F(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?x:A;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?I:S;break;case"string":case"esriFieldTypeString":i=e.nullable?C:U;break;default:i=T}return 1===arguments.length?i:i(t)}const O=["integer","small-integer","single","double"],E=new Set([...O,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function P(e){return null!=e&&E.has(e.type)}function N(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var G,R;function B(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function M(e,t){return e.nullable&&null===t?null:P(e)&&!function(e,t){const i="string"==typeof e?L(e):e;return!!i&&(i.isInteger?A(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?G.OUT_OF_RANGE:F(e,t)?e.domain?function(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,r="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>r)return s.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return s.INVALID_CODED_VALUE}return null}(e.domain,t):null:R.INVALID_TYPE}function L(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return q;case"esriFieldTypeInteger":case"integer":return D;case"esriFieldTypeSingle":case"single":return k;case"esriFieldTypeDouble":case"double":return $}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(G||(G={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(R||(R={}));const q={min:-32768,max:32767,isInteger:!0},D={min:-2147483648,max:2147483647,isInteger:!0},k={min:-34e37,max:12e37,isInteger:!1},$={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function Z(e,t,i){switch(e){case s.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case s.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case R.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case G.OUT_OF_RANGE:{const{min:e,max:s}=L(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${s}`}}}}}]);