"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[6102],{21781:(e,t,r)=>{r.d(t,{A:()=>l});var i=r(29768),s=r(34250),o=(r(76506),r(91306),r(17533));const l=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):"portalItem"in this?null==(e=this.portalItem)?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,i._)([(0,s.Cb)({type:String})],t.prototype,"apiKey",null),t=(0,i._)([(0,o.j)("esri.layers.mixins.APIKeyMixin")],t),t}},75025:(e,t,r)=>{r.d(t,{A:()=>d});var i=r(29768),s=r(92143),o=r(76506),l=r(34250),n=(r(91306),r(17533)),a=r(21132);const d=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,a.p)(this.url);if((0,o.i)(e)&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,a.s)(e,s.L.getLogger(this.declaredClass)))}};return(0,i._)([(0,l.Cb)()],t.prototype,"title",null),(0,i._)([(0,l.Cb)({type:String})],t.prototype,"url",null),t=(0,i._)([(0,n.j)("esri.layers.mixins.ArcGISService")],t),t}},22739:(e,t,r)=>{r.d(t,{L:()=>h});var i=r(29768),s=r(60991),o=r(20543),l=r(50406),n=r(17533),a=r(34250);const d=e=>{let t=class extends e{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise((e=>{const t=this.load.bind(this);this.load=r=>{const i=new Promise(((e,t)=>{const i=(0,l.$F)(r,t);this.destroyed&&t(new s.Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(e,t).finally((()=>{i&&i.remove()}))}));if("not-loaded"===this.loadStatus){this._set("loadStatus","loading");const e=this._loadController=new AbortController;t({signal:e.signal}),(0,l.fu)(e.signal,(()=>{this._promiseProps.abort()}))}return e(),i}}))),this.when((()=>{this._set("loadStatus","loaded"),this._loadController=null}),(e=>{this._set("loadStatus","failed"),this._set("loadError",e),this._loadController=null}))}get loaded(){return"loaded"===this.loadStatus}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var e;return this.isFulfilled()||(this._set("loadError",new s.Z("load:cancelled","Cancelled")),null==(e=this._loadController)||e.abort()),this}};return(0,i._)([(0,a.Cb)({readOnly:!0})],t.prototype,"loaded",null),(0,i._)([(0,a.Cb)({readOnly:!0})],t.prototype,"loadError",void 0),(0,i._)([(0,a.Cb)()],t.prototype,"loadStatus",void 0),(0,i._)([(0,a.Cb)({type:[n.W],readOnly:!0})],t.prototype,"loadWarnings",null),t=(0,i._)([(0,n.j)("esri.core.Loadable")],t),t};let u=class extends(d(o.E)){};var p;u=(0,i._)([(0,n.j)("esri.core.Loadable")],u),(p=u||(u={})).LoadableMixin=d,p.isLoadable=function(e){return!(!e||!e.load)};const h=u},62162:(e,t,r)=>{r.d(t,{P:()=>w});var i=r(29768),s=r(88762),o=r(82058),l=r(41864),n=r(60991),a=r(92143),d=r(76506),u=r(50406),p=r(32101),h=r(34250),c=(r(91306),r(97714)),m=r(17533),v=r(2906),y=r(49900),_=r(56420),f=r(74653);const g=a.L.getLogger("esri.layers.mixins.PortalLayer"),w=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var e;null==(e=this.portalItem)||e.destroy(),this.portalItem=null}set portalItem(e){e!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",e))}readPortalItem(e,t,r){if(t.itemId)return new _.default({id:t.itemId,portal:r&&r.portal})}writePortalItem(e,t){e&&e.id&&(t.itemId=e.id)}async loadFromPortal(e,t){if(this.portalItem&&this.portalItem.id)try{const i=await r.e(8642).then(r.bind(r,8642)).then((e=>e.l));return(0,u.k_)(t),await i.load({instance:this,supportedTypes:e.supportedTypes,validateItem:e.validateItem,supportsData:e.supportsData},t)}catch(e){throw(0,u.D_)(e)||g.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})\n  ${e}`),e}}async finishLoadEditablePortalLayer(e){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(e).catch((e=>((0,u.r9)(e),!0))))}async fetchUserHasEditingPrivileges(e){const t=this.url?null==s.id?void 0:s.id.findCredential(this.url):null;if(!t)return!0;const r=b.credential===t?b.user:await this.fetchEditingUser(e);return b.credential=t,b.user=r,(0,d.b)(r)||null==r.privileges||r.privileges.includes("features:user:edit")}async fetchEditingUser(e){var t,r;const i=null==(t=this.portalItem)||null==(r=t.portal)?void 0:r.user;if(i)return i;const n=s.id.findServerInfo(this.url);if(null==n||!n.owningSystemUrl)return null;const a=`${n.owningSystemUrl}/sharing/rest`,u=y.Z.getDefault();if(u&&u.loaded&&(0,p.Fv)(u.restUrl)===(0,p.Fv)(a))return u.user;const h=`${a}/community/self`,c=(0,d.i)(e)?e.signal:null,m=await(0,l.r)((0,o.default)(h,{authMode:"no-prompt",query:{f:"json"},signal:c}));return m.ok?f.default.fromJSON(m.value.data):null}read(e,t){t&&(t.layer=this),super.read(e,t)}write(e,t){const r=t&&t.portal,i=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||y.Z.getDefault());return r&&i&&!(0,p.tm)(i.restUrl,r.restUrl)?(t.messages&&t.messages.push(new n.Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(e,{...t,layer:this})}};return(0,i._)([(0,h.Cb)({type:_.default})],t.prototype,"portalItem",null),(0,i._)([(0,c.r)("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),(0,i._)([(0,v.w)("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),(0,i._)([(0,h.Cb)()],t.prototype,"resourceReferences",void 0),(0,i._)([(0,h.Cb)({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=(0,i._)([(0,m.j)("esri.layers.mixins.PortalLayer")],t),t},b={credential:null,user:null}},20543:(e,t,r)=>{r.d(t,{E:()=>u,a:()=>d});var i=r(29768),s=r(21972),o=r(76506),l=r(50406),n=r(17533);class a{constructor(e){this.instance=e,this._resolver=(0,l.dD)(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then((()=>{this._status=1,this._cleanUp()}),(()=>{this._status=2,this._cleanUp()}))}addResolvingPromise(e){this._resolvingPromises.push(e),this._tryResolve()}isResolved(){return 1===this._status}isRejected(){return 2===this._status}isFulfilled(){return 0!==this._status}abort(){this._resolver.reject((0,l.zE)())}when(e,t){return this._resolver.promise.then(e,t)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const e=(0,l.dD)(),t=[...this._resolvingPromises,(0,o.a)(e.promise)],r=this._allPromise=Promise.all(t);r.then((()=>{this.isFulfilled()||this._allPromise!==r||this._resolver.resolve(this.instance)}),(e=>{this.isFulfilled()||this._allPromise!==r||(0,l.D_)(e)||this._resolver.reject(e)})),e.resolve()}}const d=e=>{let t=class extends e{constructor(...e){super(...e),this._promiseProps=new a(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(e,t){return new Promise(((e,t)=>{this._promiseProps.when(e,t)})).then(e,t)}catch(e){return this.when(null,e)}addResolvingPromise(e){e&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in e?e.when():e)}};return t=(0,i._)([(0,n.j)("esri.core.Promise")],t),t};let u=class extends(d(s.Z)){};u=(0,i._)([(0,n.j)("esri.core.Promise")],u)},41864:(e,t,r)=>{r.d(t,{a:()=>a,f:()=>o,m:()=>l,r:()=>n});var i=r(76506),s=r(50406);function o(e,t,r){return(0,s.as)(e.map(((e,i)=>t.apply(r,[e,i]))))}function l(e,t,r){return(0,s.as)(e.map(((e,i)=>t.apply(r,[e,i])))).then((e=>e.map((e=>e.value))))}function n(e){return(0,i.b)(e)?(0,s.DB)():e.then((e=>({ok:!0,value:e}))).catch((e=>({ok:!1,error:e})))}function a(e){return e.then((e=>({ok:!0,value:e}))).catch((e=>((0,s.r9)(e),{ok:!1,error:e})))}},3482:(e,t,r)=>{var i,s,o;let l;r.d(t,{b:()=>c,g:()=>d,o:()=>p});const n=null!=(i=null==(s=globalThis.esriConfig)?void 0:s.locale)?i:null==(o=globalThis.dojoConfig)?void 0:o.locale;function a(){var e,t;return null!=(e=null!=n?n:null==(t=globalThis.navigator)?void 0:t.language)?e:"en"}function d(){return void 0===l&&(l=a()),l}const u=[];function p(e){return u.push(e),{remove(){u.splice(u.indexOf(e),1)}}}const h=[];function c(e){return h.push(e),{remove(){u.splice(h.indexOf(e),1)}}}null==globalThis.addEventListener||globalThis.addEventListener("languagechange",(function(){const e=null!=undefined?undefined:a();l!==e&&(l=e,[...h].forEach((t=>{t.call(null,e)})),[...u].forEach((t=>{t.call(null,e)})))}))},99403:(e,t,r)=>{r.d(t,{a:()=>s,c:()=>n,p:()=>o,t:()=>l});const i=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;function s(e){return e?e/72*96:0}function o(e){return e?72*e/96:0}function l(e){if("string"==typeof e){const t=e.match(i);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),s="-"===e.charAt(0),l="px"===i?o(r):r;return s?-l:l}return console.warn("screenUtils.toPt: input not recognized!"),null}return e}function n(e=0,t=0){return{x:e,y:t}}},52228:(e,t,r)=>{function i(e){return e&&"esri.renderers.visualVariables.SizeVariable"===e.declaredClass}function s(e){return null!=e&&!isNaN(e)&&isFinite(e)}function o(e){return e.valueExpression?"expression":e.field&&"string"==typeof e.field?"field":"unknown"}function l(e,t){const r=t||o(e),i=e.valueUnit||"unknown";return"unknown"===r?"constant":e.stops?"stops":null!=e.minSize&&null!=e.maxSize&&null!=e.minDataValue&&null!=e.maxDataValue?"clamped-linear":"unknown"===i?null!=e.minSize&&null!=e.minDataValue?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}r.d(t,{a:()=>l,b:()=>s,g:()=>o,i:()=>i})},46495:(e,t,r)=>{r.d(t,{Z:()=>u});var i=r(29768),s=r(57251),o=r(74673),l=r(34250),n=(r(76506),r(91306),r(17533));r(71552),r(21972),r(23639),r(92143),r(31450),r(40642),r(86656),r(22723),r(91055),r(6906),r(50406),r(60991);const a=new s.J({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let d=class extends o.a{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"name",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"description",void 0),(0,i._)([(0,l.Cb)({json:{read:a.read,write:a.write}})],d.prototype,"drawingTool",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"prototype",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],d.prototype,"thumbnail",void 0),d=(0,i._)([(0,n.j)("esri.layers.support.FeatureTemplate")],d);const u=d},78303:(e,t,r)=>{r.d(t,{Z:()=>h});var i=r(29768),s=r(74673),o=r(34250),l=(r(76506),r(91306),r(97714)),n=r(17533),a=r(2906),d=r(9801),u=r(46495);r(21972),r(23639),r(92143),r(31450),r(71552),r(40642),r(86656),r(22723),r(91055),r(6906),r(50406),r(60991),r(53523),r(59465),r(57251),r(42911),r(46826),r(45433);let p=class extends s.a{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=(0,d.f)(e[r]);return t}writeDomains(e,t){const r={};for(const t of Object.keys(e)){var i;e[t]&&(r[t]=null==(i=e[t])?void 0:i.toJSON())}t.domains=r}};(0,i._)([(0,o.Cb)({json:{write:!0}})],p.prototype,"id",void 0),(0,i._)([(0,o.Cb)({json:{write:!0}})],p.prototype,"name",void 0),(0,i._)([(0,o.Cb)({json:{write:!0}})],p.prototype,"domains",void 0),(0,i._)([(0,l.r)("domains")],p.prototype,"readDomains",null),(0,i._)([(0,a.w)("domains")],p.prototype,"writeDomains",null),(0,i._)([(0,o.Cb)({type:[u.Z],json:{write:!0}})],p.prototype,"templates",void 0),p=(0,i._)([(0,n.j)("esri.layers.support.FeatureType")],p);const h=p},2180:(e,t,r)=>{r.d(t,{Z:()=>u});var i,s=r(29768),o=r(15324),l=r(74673),n=r(34250),a=(r(76506),r(91306),r(17533));r(91055),r(76996),r(21972),r(23639),r(92143),r(31450),r(71552),r(40642),r(86656),r(22723),r(6906),r(50406),r(60991);let d=i=class extends l.a{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new o.Z}clone(){return new i({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,s._)([(0,n.Cb)({type:String,json:{write:!0}})],d.prototype,"floorField",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1}})],d.prototype,"viewAllMode",void 0),(0,s._)([(0,n.Cb)({json:{read:!1,write:!1}})],d.prototype,"viewAllLevelIds",void 0),d=i=(0,s._)([(0,a.j)("esri.layers.support.LayerFloorInfo")],d);const u=d}}]);