"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[2795,2058],{2795:(t,e,n)=>{n.r(e),n.d(e,{ElevationSamplerWorker:()=>s,default:()=>s});var r=n(76506),a=n(88994),i=n(84017);n(6906),n(50406),n(60991),n(92143),n(31450),n(71552),n(40642),n(98576),n(53785),n(57251),n(95587),n(60947),n(74673),n(21972),n(23639),n(34250),n(91306),n(86656),n(22723),n(91055),n(17533),n(2906),n(89623),n(65775),n(29794),n(26923),n(1623),n(82426),n(21801),n(73796),n(97714),n(91597),n(86787),n(35132),n(84069),n(12381),n(73173),n(82058),n(88762),n(32101),n(44567),n(98380),n(92896),n(92482),n(92624),n(92847),n(34987),n(35861),n(40167),n(72836),n(84661);class s{async createIndex(t,e){const n=new Array;if(!t.vertexAttributes||!t.vertexAttributes.position)return new a.P;const i=this.createMeshData(t),s=(0,r.i)(e)?await e.invoke("createIndexThread",i,{transferList:n}):this.createIndexThread(i).result;return this.createPooledRBush().fromJSON(s)}createIndexThread(t){const e=new Float64Array(t.position),n=this.createPooledRBush();return t.components?this.createIndexComponentsThread(n,e,t.components.map((t=>new Uint32Array(t)))):this.createIndexAllThread(n,e)}createIndexAllThread(t,e){const n=new Array(e.length/9);let r=0;for(let t=0;t<e.length;t+=9)n[r++]=o(e,t+0,t+3,t+6);return t.load(n),{result:t.toJSON()}}createIndexComponentsThread(t,e,n){let r=0;for(const t of n)r+=t.length/3;const a=new Array(r);let i=0;for(const t of n)for(let n=0;n<t.length;n+=3)a[i++]=o(e,3*t[n+0],3*t[n+1],3*t[n+2]);return t.load(a),{result:t.toJSON()}}createMeshData(t){const e=(t.transform?(0,i.b)({position:t.vertexAttributes.position,normal:null,tangent:null},t.transform,t.spatialReference).position:t.vertexAttributes.position).buffer;return!t.components||t.components.some((t=>!t.faces))?{position:e}:{position:e,components:t.components.map((t=>t.faces))}}createPooledRBush(){return new a.P(9,(0,r.h)("esri-csp-restrictions")?t=>t:[".minX",".minY",".maxX",".maxY"])}}function o(t,e,n,r){return{minX:Math.min(t[e+0],t[n+0],t[r+0]),maxX:Math.max(t[e+0],t[n+0],t[r+0]),minY:Math.min(t[e+1],t[n+1],t[r+1]),maxY:Math.max(t[e+1],t[n+1],t[r+1]),p0:[t[e+0],t[e+1],t[e+2]],p1:[t[n+0],t[n+1],t[n+2]],p2:[t[r+0],t[r+1],t[r+2]]}}},88994:(t,e,n)=>{n.d(e,{P:()=>s});var r=n(76506),a=n(6906),i=n(98576);class s{constructor(t=9,e){this.compareMinX=l,this.compareMinY=h,this.toBBox=function(t){return t},this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this.toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),b.prune(),y.prune(),x.prune(),w.prune()}all(t){this._all(this.data,t)}search(t,e){let n=this.data;const r=this.toBBox;if(M(t,n))for(b.clear();n;){for(let a=0,i=n.children.length;a<i;a++){const i=n.children[a],s=n.leaf?r(i):i;M(t,s)&&(n.leaf?e(i):p(t,s)?this._all(i,e):b.push(i))}n=b.pop()}}collides(t){let e=this.data;const n=this.toBBox;if(!M(t,e))return!1;for(b.clear();e;){for(let r=0,a=e.children.length;r<a;r++){const a=e.children[r],i=e.leaf?n(a):a;if(M(t,i)){if(e.leaf||p(t,i))return!0;b.push(a)}}e=b.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(0,t.length),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=new E([]),this}remove(t){if(!t)return this;let e,n=this.data,a=null,i=0,s=!1;const o=this.toBBox(t);for(x.clear(),w.clear();n||x.length>0;){var c;if(n||(n=(0,r.a)(x.pop()),a=x.data[x.length-1],i=null!=(c=w.pop())?c:0,s=!0),n.leaf&&(e=(0,r.c)(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),x.push(n),this._condense(x),this;s||n.leaf||!p(n,o)?a?(i++,n=a.children[i],s=!1):n=null:(x.push(n),w.push(i),i=0,a=n,n=n.children[0])}return this}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){let n=t;for(y.clear();n;){var r;if(!0===n.leaf)for(const t of n.children)e(t);else y.pushArray(n.children);n=null!=(r=y.pop())?r:null}}_build(t,e,n,r){const a=n-e+1;let i=this._maxEntries;if(a<=i){const r=new E(t.slice(e,n+1));return o(r,this.toBBox),r}r||(r=Math.ceil(Math.log(a)/Math.log(i)),i=Math.ceil(a/i**(r-1)));const s=new q([]);s.height=r;const c=Math.ceil(a/i),u=c*Math.ceil(Math.sqrt(i));g(t,e,n,u,this.compareMinX);for(let a=e;a<=n;a+=u){const e=Math.min(a+u-1,n);g(t,a,e,c,this.compareMinY);for(let n=a;n<=e;n+=c){const a=Math.min(n+c-1,e);s.children.push(this._build(t,n,a,r-1))}}return o(s,this.toBBox),s}_chooseSubtree(t,e,n,r){for(;r.push(e),!0!==e.leaf&&r.length-1!==n;){let n,r=1/0,s=1/0;for(let o=0,c=e.children.length;o<c;o++){const c=e.children[o],u=f(c),l=(a=t,i=c,(Math.max(i.maxX,a.maxX)-Math.min(i.minX,a.minX))*(Math.max(i.maxY,a.maxY)-Math.min(i.minY,a.minY))-u);l<s?(s=l,r=u<r?u:r,n=c):l===s&&u<r&&(r=u,n=c)}e=n||e.children[0]}var a,i;return e}_insert(t,e,n){const r=this.toBBox,a=n?t:r(t);x.clear();const i=this._chooseSubtree(a,this.data,e,x);for(i.children.push(t),u(i,a);e>=0&&x.data[e].children.length>this._maxEntries;)this._split(x,e),e--;this._adjustParentBBoxes(a,x,e)}_split(t,e){const n=t.data[e],r=n.children.length,a=this._minEntries;this._chooseSplitAxis(n,a,r);const i=this._chooseSplitIndex(n,a,r);if(!i)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const s=n.children.splice(i,n.children.length-i),c=n.leaf?new E(s):new q(s);c.height=n.height,o(n,this.toBBox),o(c,this.toBBox),e?t.data[e-1].children.push(c):this._splitRoot(n,c)}_splitRoot(t,e){this.data=new q([t,e]),this.data.height=t.height+1,o(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let r,a,i;r=a=1/0;for(let s=e;s<=n-e;s++){const e=c(t,0,s,this.toBBox),o=c(t,s,n,this.toBBox),u=d(e,o),l=f(e)+f(o);u<r?(r=u,i=s,a=l<a?l:a):u===r&&l<a&&(a=l,i=s)}return i}_chooseSplitAxis(t,e,n){const r=t.leaf?this.compareMinX:l,a=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,a)&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const a=this.toBBox,i=c(t,0,e,a),s=c(t,n-e,n,a);let o=m(i)+m(s);for(let r=e;r<n-e;r++){const e=t.children[r];u(i,t.leaf?a(e):e),o+=m(i)}for(let r=n-e-1;r>=e;r--){const e=t.children[r];u(s,t.leaf?a(e):e),o+=m(s)}return o}_adjustParentBBoxes(t,e,n){for(let r=n;r>=0;r--)u(e.data[r],t)}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const a=t.data[e-1],i=a.children;i.splice((0,r.c)(i,n,i.length,a.indexHint),1)}else this.clear();else o(n,this.toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function o(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,r,a){a||(a=new E([])),a.minX=1/0,a.minY=1/0,a.maxX=-1/0,a.maxY=-1/0;for(let i,s=e;s<n;s++)i=t.children[s],u(a,t.leaf?r(i):i);return a}function u(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),a=Math.min(t.maxX,e.maxX),i=Math.min(t.maxY,e.maxY);return Math.max(0,a-n)*Math.max(0,i-r)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function M(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t,e,n,a,s){const o=[e,n];for(;o.length;){const e=(0,r.a)(o.pop()),n=(0,r.a)(o.pop());if(e-n<=a)continue;const c=n+Math.ceil((e-n)/a/2)*a;(0,i.q)(t,c,n,e,s),o.push(n,c,c,e)}}const b=new a.P,y=new a.P,x=new a.P,w=new a.P({deallocator:void 0});class T extends class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new r.P}}class E extends T{constructor(t){super(),this.children=t,this.leaf=!0}}class q extends T{constructor(t){super(),this.children=t,this.leaf=!1}}},92482:(t,e,n)=>{n.d(e,{N:()=>f,a:()=>i,b:()=>h,f:()=>o,k:()=>l,l:()=>s,t:()=>c,y:()=>u});var r=n(76506),a=(n(82426),n(21801));function i(t=m){return[t[0],t[1],t[2],t[3]]}function s(t,e,n,r,a=i()){return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a}function o(t,e=i()){return e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax,e}function c(t,e){return new a.Z({xmin:t[0],ymin:t[1],xmax:t[2],ymax:t[3],spatialReference:e})}function u(t){return e=t,((0,r.b)(e)||e[0]>=e[2]?0:e[2]-e[0])*function(t){return t[1]>=t[3]?0:t[3]-t[1]}(t);var e}function l(t,e){return Math.max(e[0],t[0])<=Math.min(e[2],t[2])&&Math.max(e[1],t[1])<=Math.min(e[3],t[3])}function h(t,e){return e[0]>=t[0]&&e[2]<=t[2]&&e[1]>=t[1]&&e[3]<=t[3]}const f=[1/0,1/0,-1/0,-1/0],m=[0,0,0,0]},73173:(t,e,n)=>{n.d(e,{g:()=>c});var r=n(31450),a=(n(82058),n(60991)),i=n(92143),s=n(32101);const o=i.L.getLogger("esri.assets");function c(t){if(!r.Z.assetsPath)throw o.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new a.Z("assets:path-not-set","config.assetsPath is not set");return(0,s.v_)(r.Z.assetsPath,t)}},34987:(t,e,n)=>{n.d(e,{a:()=>c,b:()=>u,c:()=>s,d:()=>l,f:()=>o});var r=n(82426),a=n(35861),i=n(45087);function s(t=h){return[t[0],t[1],t[2],t[3]]}function o(t,e,n=s()){return(0,r.m)(n,t),n[3]=e,n}function c(t,e,n=s()){return(0,a.s)(f,t,l(t)),(0,a.s)(m,e,l(e)),(0,a.m)(f,m,f),i=n,o=(0,r.r)((0,a.g)(n,f)),i[3]=o,i;var i,o}function u(t){return t}function l(t){return(0,r.o)(t[3])}const h=[0,0,1,0],f=(0,i.a)(),m=(0,i.a)();s()},29794:(t,e,n)=>{n.d(e,{E:()=>r,R:()=>a});const r=1e-6,a=Math.random;Math.PI,Math.PI},84017:(t,e,n)=>{n.d(e,{M:()=>E,a:()=>_,b:()=>v,c:()=>S,g:()=>B,i:()=>q,u:()=>A});var r,a=n(76506),i=n(53785),s=n(45087),o=n(65775),c=n(57532),u=n(26923),l=n(1623),h=n(95587),f=n(29768),m=n(74673),d=n(34250),p=(n(91306),n(17533)),M=n(82426),g=n(91597),b=n(34987),y=n(40167),x=n(72836),w=n(84661);let T=r=class extends m.a{constructor(t){super(t),this.origin=(0,M.b)(),this.translation=(0,M.b)(),this.rotation=(0,b.c)(),this.scale=(0,M.k)(1,1,1),this.geographic=!0}get localMatrix(){const t=(0,c.c)();return(0,o.s)(t,t,this.scale),(0,o.r)(t,t,(0,b.d)(this.rotation),(0,b.b)(this.rotation)),(0,o.t)(t,t,this.translation),t}get localMatrixInverse(){return(0,o.a)((0,c.c)(),this.localMatrix)}applyLocal(t,e){return(0,M.j)(e,t,this.localMatrix)}applyLocalInverse(t,e){return(0,M.j)(e,t,this.localMatrixInverse)}project(t,e){const n=new Float64Array(t.length),r=y.B.fromTypedArray(n),a=y.B.fromTypedArray(t);if(this.geographic){const t=(0,h.b)((0,h.g)(e)),i=(0,c.c)();return(0,l.Bm)(e,this.origin,i,t),(0,o.m)(i,i,this.localMatrix),(0,x.t)(r,a,i),(0,l.CM)(n,t,0,n,e,0,n.length/3),n}const{localMatrix:i,origin:s}=this;(0,o.e)(i,c.I)?(0,x.c)(r,a):(0,x.t)(r,a,i);for(let t=0;t<n.length;t+=3)n[t+0]+=s[0],n[t+1]+=s[1],n[t+2]+=s[2];return n}getOriginPoint(t){const[e,n,r]=this.origin;return new g.Z({x:e,y:n,z:r,spatialReference:t})}equals(t){return(0,a.i)(t)&&this.geographic===t.geographic&&(0,M.p)(this.origin,t.origin)&&(0,o.b)(this.localMatrix,t.localMatrix)}clone(){const t={origin:(0,M.q)(this.origin),translation:(0,M.q)(this.translation),rotation:(0,b.c)(this.rotation),scale:(0,M.q)(this.scale),geographic:this.geographic};return new r(t)}};(0,f._)([(0,d.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],T.prototype,"origin",void 0),(0,f._)([(0,d.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],T.prototype,"translation",void 0),(0,f._)([(0,d.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],T.prototype,"rotation",void 0),(0,f._)([(0,d.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],T.prototype,"scale",void 0),(0,f._)([(0,d.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],T.prototype,"geographic",void 0),(0,f._)([(0,d.Cb)()],T.prototype,"localMatrix",null),(0,f._)([(0,d.Cb)()],T.prototype,"localMatrixInverse",null),T=r=(0,f._)([(0,p.j)("esri.geometry.support.MeshTransform")],T);const E=T;function q(t,e){var n;return t.isGeographic||t.isWebMercator&&(null==(n=null==e?void 0:e.geographic)||n)}function B(t,e,n){return q(e.spatialReference,n)?function(t,e,n){const r=e.spatialReference,i=U(e,n,R),s=new Float64Array(t.position.length),o=function(t,e,n,r){(0,x.t)(y.B.fromTypedArray(r),y.B.fromTypedArray(t),e);const a=new Float64Array(t.length);return(0,w.c)(r,a,n)}(t.position,i,r,s),c=(0,u.n)(Y,i),l=function(t,e,n,r,i){if((0,a.b)(n))return null;const s=new Float32Array(n.length);return(0,x.a)(y.a.fromTypedArray(s),y.a.fromTypedArray(n),r),(0,w.d)(s,t,e,i,s),s}(o,s,t.normal,c,r),h=function(t,e,n,r,i){if((0,a.b)(n))return null;const s=new Float32Array(n.length);(0,x.a)(y.a.fromTypedArray(s,4*Float32Array.BYTES_PER_ELEMENT),y.a.fromTypedArray(n,4*Float32Array.BYTES_PER_ELEMENT),r);for(let t=3;t<s.length;t+=4)s[t]=n[t];return(0,w.e)(s,t,e,i,s),s}(o,s,t.tangent,c,r);return{position:o,normal:l,tangent:h}}(t,e,n):function(t,e,n){const r=new Float64Array(t.position.length),a=t.position,i=e.x,s=e.y,o=e.z||0,{horizontal:c,vertical:u}=O(n?n.unit:null,e.spatialReference);for(let t=0;t<a.length;t+=3)r[t+0]=a[t+0]*c+i,r[t+1]=a[t+1]*c+s,r[t+2]=a[t+2]*u+o;return{position:r,normal:t.normal,tangent:t.tangent}}(t,e,n)}function v(t,e,n){const{position:r,normal:i,tangent:s}=t;if((0,a.b)(e))return{position:r,normal:i,tangent:s};const o=e.localMatrix;return B({position:(0,w.t)(r,new Float64Array(r.length),o),normal:(0,a.i)(i)?(0,w.f)(i,new Float32Array(i.length),o):null,tangent:(0,a.i)(s)?(0,w.g)(s,new Float32Array(s.length),o):null},e.getOriginPoint(n),{geographic:e.geographic})}function _(t,e,n){if(null!=n&&n.useTransform){var r;const{position:a,normal:i,tangent:s}=t;return{vertexAttributes:{position:a,normal:i,tangent:s},transform:new E({origin:[e.x,e.y,null!=(r=e.z)?r:0],geographic:q(e.spatialReference,n)})}}return{vertexAttributes:B(t,e,n),transform:null}}function A(t,e,n){return q(e.spatialReference,n)?k(t,e,n):P(t,e,n)}function S(t,e,n,r){if((0,a.b)(e))return A(t,n,r);const i=v(t,e,n.spatialReference);return n.equals(e.getOriginPoint(n.spatialReference))?P(i,n,r):q(n.spatialReference,r)?k(i,n,r):P(i,n,r)}function P(t,e,n){const r=new Float64Array(t.position.length),a=t.position,i=e.x,s=e.y,o=e.z||0,{horizontal:c,vertical:u}=O(n?n.unit:null,e.spatialReference);for(let t=0;t<a.length;t+=3)r[t+0]=(a[t+0]-i)/c,r[t+1]=(a[t+1]-s)/c,r[t+2]=(a[t+2]-o)/u;return{position:r,normal:t.normal,tangent:t.tangent}}function k(t,e,n){const r=e.spatialReference;U(e,n,R);const i=(0,o.a)(C,R),s=new Float64Array(t.position.length),c=function(t,e,n,r){const a=(0,w.p)(t,e,r),i=y.B.fromTypedArray(a),s=new Float64Array(a.length),o=y.B.fromTypedArray(s);return(0,x.t)(o,i,n),s}(t.position,r,i,s),l=(0,u.n)(Y,i),h=function(t,e,n,r,i){if((0,a.b)(t))return null;const s=(0,w.a)(t,e,n,r,new Float32Array(t.length)),o=y.a.fromTypedArray(s);return(0,x.a)(o,o,i),s}(t.normal,t.position,s,r,l),f=function(t,e,n,r,i){if((0,a.b)(t))return null;const s=(0,w.b)(t,e,n,r,new Float32Array(t.length)),o=y.a.fromTypedArray(s,4*Float32Array.BYTES_PER_ELEMENT);return(0,x.a)(o,o,i),s}(t.tangent,t.position,s,r,l);return{position:c,normal:h,tangent:f}}function U(t,e,n){(0,l.Bm)(t.spatialReference,[t.x,t.y,t.z||0],n,(0,h.a)(t.spatialReference));const{horizontal:r,vertical:a}=O(e?e.unit:null,t.spatialReference);return(0,o.s)(n,n,[r,r,a]),n}function O(t,e){if((0,a.b)(t))return I;const n=e.isGeographic?1:(0,i.a)(e),r=e.isGeographic?1:(0,i.b)(e),s=(0,i.c)(1,t,"meters");return{horizontal:s*n,vertical:s*r}}const R=(0,c.c)(),C=(0,c.c)(),Y=(0,s.c)(),I={horizontal:1,vertical:1}},65775:(t,e,n)=>{n.d(e,{a:()=>o,b:()=>m,c:()=>s,d:()=>a,e:()=>d,i:()=>i,m:()=>c,q:()=>f,r:()=>h,s:()=>l,t:()=>u,u:()=>p});var r=n(29794);function a(t,e,n,r,a,i,s,o,c,u,l,h,f,m,d,p,M){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=s,t[6]=o,t[7]=c,t[8]=u,t[9]=l,t[10]=h,t[11]=f,t[12]=m,t[13]=d,t[14]=p,t[15]=M,t}function i(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function s(t,e){if(t===e){const n=e[1],r=e[2],a=e[3],i=e[6],s=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=s,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function o(t,e){const n=e[0],r=e[1],a=e[2],i=e[3],s=e[4],o=e[5],c=e[6],u=e[7],l=e[8],h=e[9],f=e[10],m=e[11],d=e[12],p=e[13],M=e[14],g=e[15],b=n*o-r*s,y=n*c-a*s,x=n*u-i*s,w=r*c-a*o,T=r*u-i*o,E=a*u-i*c,q=l*p-h*d,B=l*M-f*d,v=l*g-m*d,_=h*M-f*p,A=h*g-m*p,S=f*g-m*M;let P=b*S-y*A+x*_+w*v-T*B+E*q;return P?(P=1/P,t[0]=(o*S-c*A+u*_)*P,t[1]=(a*A-r*S-i*_)*P,t[2]=(p*E-M*T+g*w)*P,t[3]=(f*T-h*E-m*w)*P,t[4]=(c*v-s*S-u*B)*P,t[5]=(n*S-a*v+i*B)*P,t[6]=(M*x-d*E-g*y)*P,t[7]=(l*E-f*x+m*y)*P,t[8]=(s*A-o*v+u*q)*P,t[9]=(r*v-n*A-i*q)*P,t[10]=(d*T-p*x+g*b)*P,t[11]=(h*x-l*T-m*b)*P,t[12]=(o*B-s*_-c*q)*P,t[13]=(n*_-r*B+a*q)*P,t[14]=(p*y-d*w-M*b)*P,t[15]=(l*w-h*y+f*b)*P,t):null}function c(t,e,n){const r=e[0],a=e[1],i=e[2],s=e[3],o=e[4],c=e[5],u=e[6],l=e[7],h=e[8],f=e[9],m=e[10],d=e[11],p=e[12],M=e[13],g=e[14],b=e[15];let y=n[0],x=n[1],w=n[2],T=n[3];return t[0]=y*r+x*o+w*h+T*p,t[1]=y*a+x*c+w*f+T*M,t[2]=y*i+x*u+w*m+T*g,t[3]=y*s+x*l+w*d+T*b,y=n[4],x=n[5],w=n[6],T=n[7],t[4]=y*r+x*o+w*h+T*p,t[5]=y*a+x*c+w*f+T*M,t[6]=y*i+x*u+w*m+T*g,t[7]=y*s+x*l+w*d+T*b,y=n[8],x=n[9],w=n[10],T=n[11],t[8]=y*r+x*o+w*h+T*p,t[9]=y*a+x*c+w*f+T*M,t[10]=y*i+x*u+w*m+T*g,t[11]=y*s+x*l+w*d+T*b,y=n[12],x=n[13],w=n[14],T=n[15],t[12]=y*r+x*o+w*h+T*p,t[13]=y*a+x*c+w*f+T*M,t[14]=y*i+x*u+w*m+T*g,t[15]=y*s+x*l+w*d+T*b,t}function u(t,e,n){const r=n[0],a=n[1],i=n[2];let s,o,c,u,l,h,f,m,d,p,M,g;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*i+e[12],t[13]=e[1]*r+e[5]*a+e[9]*i+e[13],t[14]=e[2]*r+e[6]*a+e[10]*i+e[14],t[15]=e[3]*r+e[7]*a+e[11]*i+e[15]):(s=e[0],o=e[1],c=e[2],u=e[3],l=e[4],h=e[5],f=e[6],m=e[7],d=e[8],p=e[9],M=e[10],g=e[11],t[0]=s,t[1]=o,t[2]=c,t[3]=u,t[4]=l,t[5]=h,t[6]=f,t[7]=m,t[8]=d,t[9]=p,t[10]=M,t[11]=g,t[12]=s*r+l*a+d*i+e[12],t[13]=o*r+h*a+p*i+e[13],t[14]=c*r+f*a+M*i+e[14],t[15]=u*r+m*a+g*i+e[15]),t}function l(t,e,n){const r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e,n,a){let i,s,o,c,u,l,h,f,m,d,p,M,g,b,y,x,w,T,E,q,B,v,_,A,S=a[0],P=a[1],k=a[2],U=Math.sqrt(S*S+P*P+k*k);return U<r.E?null:(U=1/U,S*=U,P*=U,k*=U,i=Math.sin(n),s=Math.cos(n),o=1-s,c=e[0],u=e[1],l=e[2],h=e[3],f=e[4],m=e[5],d=e[6],p=e[7],M=e[8],g=e[9],b=e[10],y=e[11],x=S*S*o+s,w=P*S*o+k*i,T=k*S*o-P*i,E=S*P*o-k*i,q=P*P*o+s,B=k*P*o+S*i,v=S*k*o+P*i,_=P*k*o-S*i,A=k*k*o+s,t[0]=c*x+f*w+M*T,t[1]=u*x+m*w+g*T,t[2]=l*x+d*w+b*T,t[3]=h*x+p*w+y*T,t[4]=c*E+f*q+M*B,t[5]=u*E+m*q+g*B,t[6]=l*E+d*q+b*B,t[7]=h*E+p*q+y*B,t[8]=c*v+f*_+M*A,t[9]=u*v+m*_+g*A,t[10]=l*v+d*_+b*A,t[11]=h*v+p*_+y*A,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function f(t,e){const n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function m(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function d(t,e){if(t===e)return!0;const n=t[0],a=t[1],i=t[2],s=t[3],o=t[4],c=t[5],u=t[6],l=t[7],h=t[8],f=t[9],m=t[10],d=t[11],p=t[12],M=t[13],g=t[14],b=t[15],y=e[0],x=e[1],w=e[2],T=e[3],E=e[4],q=e[5],B=e[6],v=e[7],_=e[8],A=e[9],S=e[10],P=e[11],k=e[12],U=e[13],O=e[14],R=e[15];return Math.abs(n-y)<=r.E*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(a-x)<=r.E*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(i-w)<=r.E*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(s-T)<=r.E*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-E)<=r.E*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(c-q)<=r.E*Math.max(1,Math.abs(c),Math.abs(q))&&Math.abs(u-B)<=r.E*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(l-v)<=r.E*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(h-_)<=r.E*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(f-A)<=r.E*Math.max(1,Math.abs(f),Math.abs(A))&&Math.abs(m-S)<=r.E*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(d-P)<=r.E*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-k)<=r.E*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(M-U)<=r.E*Math.max(1,Math.abs(M),Math.abs(U))&&Math.abs(g-O)<=r.E*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(b-R)<=r.E*Math.max(1,Math.abs(b),Math.abs(R))}function p(t){const e=r.E,n=t[0],a=t[1],i=t[2],s=t[4],o=t[5],c=t[6],u=t[8],l=t[9],h=t[10];return Math.abs(1-(n*n+s*s+u*u))<=e&&Math.abs(1-(a*a+o*o+l*l))<=e&&Math.abs(1-(i*i+c*c+h*h))<=e}},82426:(t,e,n)=>{n.d(e,{A:()=>at,B:()=>mt,C:()=>st,D:()=>ot,E:()=>y,K:()=>ct,L:()=>U,M:()=>w,N:()=>pt,O:()=>l,P:()=>c,T:()=>A,U:()=>o,Z:()=>u,_:()=>x,a:()=>q,aa:()=>g,b:()=>a,c:()=>it,d:()=>E,e:()=>m,f:()=>b,g:()=>d,h:()=>B,i:()=>ht,j:()=>v,k:()=>s,l:()=>h,m:()=>f,n:()=>T,o:()=>ut,p:()=>k,q:()=>i,r:()=>lt,s:()=>p,t:()=>_,u:()=>$,w:()=>F,y:()=>ft,z:()=>N});var r=n(29794);function a(){return[0,0,0]}function i(t){return[t[0],t[1],t[2]]}function s(t,e,n){return[t,e,n]}function o(t){const e=[0,0,0],n=Math.min(3,t.length);for(let r=0;r<n;++r)e[r]=t[r];return e}function c(t,e){return new Float64Array(t,e,3)}const u=[0,0,0],l=s(1,1,1);function h(t){const e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function f(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function m(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function d(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function p(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function M(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function g(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function y(t,e){const n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function x(t,e){const n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function w(t){const e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function T(t,e){const n=e[0],r=e[1],a=e[2];let i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function E(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function q(t,e,n){const r=e[0],a=e[1],i=e[2],s=n[0],o=n[1],c=n[2];return t[0]=a*c-i*o,t[1]=i*s-r*c,t[2]=r*o-a*s,t}function B(t,e,n,r){const a=e[0],i=e[1],s=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t}function v(t,e,n){const r=e[0],a=e[1],i=e[2];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12],t[1]=n[1]*r+n[5]*a+n[9]*i+n[13],t[2]=n[2]*r+n[6]*a+n[10]*i+n[14],t}function _(t,e,n){const r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function A(t,e,n){const r=n[0],a=n[1],i=n[2],s=n[3],o=e[0],c=e[1],u=e[2];let l=a*u-i*c,h=i*o-r*u,f=r*c-a*o,m=a*f-i*h,d=i*l-r*f,p=r*h-a*l;const M=2*s;return l*=M,h*=M,f*=M,m*=2,d*=2,p*=2,t[0]=o+l+m,t[1]=c+h+d,t[2]=u+f+p,t}s(0,0,1);const S=[0,0,0],P=[0,0,0];function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function U(t,e,n){const r=n[0]-e[0],a=n[1]-e[1],i=n[2]-e[2];let s=r*r+a*a+i*i;return s>0?(s=1/Math.sqrt(s),t[0]=r*s,t[1]=a*s,t[2]=i*s,t):(t[0]=0,t[1]=0,t[2]=0,t)}const O=p,R=M,C=g,Y=y,I=x,L=h,X=w;function F(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function N(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function D(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function j(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function G(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function H(t,e){const n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+i*i)}function z(t,e){const n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function Z(t){const e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function W(t){const e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function $(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}Object.freeze({__proto__:null,length:h,copy:f,set:m,add:d,subtract:p,multiply:M,divide:g,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},scale:b,scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},distance:y,squaredDistance:x,squaredLength:w,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},normalize:T,dot:E,cross:q,lerp:B,hermite:function(t,e,n,r,a,i){const s=i*i,o=s*(2*i-3)+1,c=s*(i-2)+i,u=s*(i-1),l=s*(3-2*i);return t[0]=e[0]*o+n[0]*c+r[0]*u+a[0]*l,t[1]=e[1]*o+n[1]*c+r[1]*u+a[1]*l,t[2]=e[2]*o+n[2]*c+r[2]*u+a[2]*l,t},bezier:function(t,e,n,r,a,i){const s=1-i,o=s*s,c=i*i,u=o*s,l=3*i*o,h=3*c*s,f=c*i;return t[0]=e[0]*u+n[0]*l+r[0]*h+a[0]*f,t[1]=e[1]*u+n[1]*l+r[1]*h+a[1]*f,t[2]=e[2]*u+n[2]*l+r[2]*h+a[2]*f,t},random:function(t,e){e=e||1;const n=2*(0,r.R)()*Math.PI,a=2*(0,r.R)()-1,i=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=a*e,t},transformMat4:v,transformMat3:_,transformQuat:A,rotateX:function(t,e,n,r){const a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},rotateY:function(t,e,n,r){const a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},rotateZ:function(t,e,n,r){const a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t},angle:function(t,e){f(S,t),f(P,e),T(S,S),T(P,P);const n=E(S,P);return n>1?0:n<-1?Math.PI:Math.acos(n)},str:function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},exactEquals:k,equals:function(t,e){if(t===e)return!0;const n=t[0],a=t[1],i=t[2],s=e[0],o=e[1],c=e[2];return Math.abs(n-s)<=r.E*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(a-o)<=r.E*Math.max(1,Math.abs(a),Math.abs(o))&&Math.abs(i-c)<=r.E*Math.max(1,Math.abs(i),Math.abs(c))},direction:U,sub:O,mul:R,div:C,dist:Y,sqrDist:I,len:L,sqrLen:X});const J=D,K=j,V=G,Q=H,tt=z,et=Z,nt=W,rt=(Object.freeze({__proto__:null,copy:F,set:N,add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:D,multiply:j,divide:G,ceil:function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},floor:function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},min:function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},max:function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},round:function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},scaleAndAdd:function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},distance:H,squaredDistance:z,length:Z,squaredLength:W,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},inverse:function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},normalize:function(t,e){const n=e[0],r=e[1],a=e[2],i=e[3];let s=n*n+r*r+a*a+i*i;return s>0&&(s=1/Math.sqrt(s),t[0]=n*s,t[1]=r*s,t[2]=a*s,t[3]=i*s),t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},lerp:function(t,e,n,r){const a=e[0],i=e[1],s=e[2],o=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=s+r*(n[2]-s),t[3]=o+r*(n[3]-o),t},random:function(t,e){let n,a,i,s,o,c;e=e||1;do{n=2*(0,r.R)()-1,a=2*(0,r.R)()-1,o=n*n+a*a}while(o>=1);do{i=2*(0,r.R)()-1,s=2*(0,r.R)()-1,c=i*i+s*s}while(c>=1);const u=Math.sqrt((1-o)/c);return t[0]=e*n,t[1]=e*a,t[2]=e*i*u,t[3]=e*s*u,t},transformMat4:function(t,e,n){const r=e[0],a=e[1],i=e[2],s=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*s,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*s,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*s,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*s,t},transformQuat:function(t,e,n){const r=e[0],a=e[1],i=e[2],s=n[0],o=n[1],c=n[2],u=n[3],l=u*r+o*i-c*a,h=u*a+c*r-s*i,f=u*i+s*a-o*r,m=-s*r-o*a-c*i;return t[0]=l*u+m*-s+h*-c-f*-o,t[1]=h*u+m*-o+f*-s-l*-c,t[2]=f*u+m*-c+l*-o-h*-s,t[3]=e[3],t},str:function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},exactEquals:$,equals:function(t,e){const n=t[0],a=t[1],i=t[2],s=t[3],o=e[0],c=e[1],u=e[2],l=e[3];return Math.abs(n-o)<=r.E*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(a-c)<=r.E*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(i-u)<=r.E*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-l)<=r.E*Math.max(1,Math.abs(s),Math.abs(l))},sub:J,mul:K,div:V,dist:Q,sqrDist:tt,len:et,sqrLen:nt}),new Float32Array(1));function at(t){--t;for(let e=1;e<32;e<<=1)t|=t>>e;return t+1}function it(t,e,n){return Math.min(Math.max(t,e),n)}function st(t){return 0==(t&t-1)}function ot(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}function ct(t,e,n){return t+(e-t)*n}function ut(t){return t*Math.PI/180}function lt(t){return 180*t/Math.PI}function ht(t){return Math.acos(it(t,-1,1))}function ft(t){return Math.asin(it(t,-1,1))}function mt(t){return dt(Math.max(-Mt,Math.min(t,Mt)))}function dt(t){return rt[0]=t,rt[0]}function pt(t,e){const n=h(t);return m(e,n,ft(t[2]/n),Math.atan2(t[1]/n,t[0]/n)),e}const Mt=dt(34028234663852886e22)},84661:(t,e,n)=>{n.d(e,{a:()=>M,b:()=>E,c:()=>y,d:()=>g,e:()=>q,f:()=>w,g:()=>T,p:()=>b,t:()=>x});var r=n(92143),a=n(76506),i=n(26923),s=n(45087),o=n(57532),c=n(82426),u=n(1623),l=n(95587),h=n(60947),f=n(35132),m=n(40167),d=n(72836);const p=r.L.getLogger("esri.geometry.support.meshUtils.normalProjection");function M(t,e,n,r,a){return v(r)?(B(0,m.a.fromTypedArray(t),m.B.fromTypedArray(e),m.B.fromTypedArray(n),r,m.a.fromTypedArray(a)),a):(p.error("Cannot convert spatial reference to PCPF"),a)}function g(t,e,n,r,a){return v(r)?(B(1,m.a.fromTypedArray(t),m.B.fromTypedArray(e),m.B.fromTypedArray(n),r,m.a.fromTypedArray(a)),a):(p.error("Cannot convert to spatial reference from PCPF"),a)}function b(t,e,n){return(0,u.CM)(t,e,0,n,(0,l.a)(e),0,t.length/3),n}function y(t,e,n){return(0,u.CM)(t,(0,l.a)(n),0,e,n,0,t.length/3),e}function x(t,e,n){if((0,a.b)(t))return e;const r=m.B.fromTypedArray(t),i=m.B.fromTypedArray(e);return(0,d.t)(i,r,n),e}function w(t,e,n){if((0,a.b)(t))return e;(0,i.n)(k,n);const r=m.a.fromTypedArray(t),s=m.a.fromTypedArray(e);return(0,d.a)(s,r,k),(0,i.i)(k)||(0,d.n)(s,s),e}function T(t,e,n){if((0,a.b)(t))return e;(0,i.n)(k,n);const r=m.a.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),s=m.a.fromTypedArray(e,4*Float32Array.BYTES_PER_ELEMENT);if((0,d.a)(s,r,k),(0,i.i)(k)||(0,d.n)(s,s),t!==e)for(let n=3;n<t.length;n+=4)e[n]=t[n];return e}function E(t,e,n,r,a){if(!v(r))return p.error("Cannot convert spatial reference to PCPF"),a;B(0,m.a.fromTypedArray(t,4*Float32Array.BYTES_PER_ELEMENT),m.B.fromTypedArray(e),m.B.fromTypedArray(n),r,m.a.fromTypedArray(a,4*Float32Array.BYTES_PER_ELEMENT));for(let e=3;e<t.length;e+=4)a[e]=t[e];return a}function q(t,e,n,r,a){if(!v(r))return p.error("Cannot convert to spatial reference from PCPF"),a;B(1,m.a.fromTypedArray(t,16),m.B.fromTypedArray(e),m.B.fromTypedArray(n),r,m.a.fromTypedArray(a,16));for(let e=3;e<t.length;e+=4)a[e]=t[e];return a}function B(t,e,n,r,a,s){if(!e)return;const o=n.count,h=(0,l.a)(a);if(_(a))for(let n=0;n<o;n++)r.getVec(n,A),e.getVec(n,S),(0,u.Bm)(h,A,P,h),(0,i.f)(k,P),1===t&&(0,i.t)(k,k),(0,c.t)(S,S,k),s.setVec(n,S);else for(let a=0;a<o;a++){r.getVec(a,A),e.getVec(a,S),(0,u.Bm)(h,A,P,h),(0,i.f)(k,P);const o=(0,f.mZ)(n.get(a,1));let l=Math.cos(o);0===t&&(l=1/l),k[0]*=l,k[1]*=l,k[2]*=l,k[3]*=l,k[4]*=l,k[5]*=l,1===t&&(0,i.t)(k,k),(0,c.t)(S,S,k),(0,c.n)(S,S),s.setVec(a,S)}return s}function v(t){return _(t)||function(t){return t.isWebMercator}(t)}function _(t){return t.isWGS84||(0,h.l)(t)||(0,h.f)(t)||(0,h.h)(t)}const A=(0,c.b)(),S=(0,c.b)(),P=(0,o.c)(),k=(0,s.c)()},95587:(t,e,n)=>{n.d(e,{S:()=>s,W:()=>u,a:()=>h,b:()=>l,c:()=>o,d:()=>c,e:()=>m,g:()=>f});var r=n(60947),a=n(89623);function i(t){return new r.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${t.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const s=i(a.e),o=i(a.m),c=i(a.a),u=new r.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${a.e.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function l(t){return t&&t===a.m?o:t&&t===a.a?c:s}function h(t){return t&&((0,r.f)(t)||t===o)?o:t&&((0,r.h)(t)||t===c)?c:s}function f(t){return t&&((0,r.f)(t)||t===o)?a.m:t&&((0,r.h)(t)||t===c)?a.a:a.e}function m(t){return(0,r.c)(t)?a.m:(0,r.d)(t)?a.a:a.e}},98576:(t,e,n)=>{n.d(e,{q:()=>s});var r,a,i={exports:{}};r=i,a=function(){function t(n,r,a,i,s){for(;i>a;){if(i-a>600){var o=i-a+1,c=r-a+1,u=Math.log(o),l=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*l*(o-l)/o)*(c-o/2<0?-1:1);t(n,r,Math.max(a,Math.floor(r-c*l/o+h)),Math.min(i,Math.floor(r+(o-c)*l/o+h)),s)}var f=n[r],m=a,d=i;for(e(n,a,r),s(n[i],f)>0&&e(n,a,i);m<d;){for(e(n,m,d),m++,d--;s(n[m],f)<0;)m++;for(;s(n[d],f)>0;)d--}0===s(n[a],f)?e(n,a,d):e(n,++d,i),d<=r&&(a=d+1),r<=d&&(i=d-1)}}function e(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function n(t,e){return t<e?-1:t>e?1:0}return function(e,r,a,i,s){t(e,r,a||0,i||e.length-1,s||n)}}(),void 0!==a&&(r.exports=a);const s=i.exports},53785:(t,e,n)=>{n.d(e,{a:()=>_,b:()=>q,c:()=>w,d:()=>v,e:()=>C,f:()=>Y,g:()=>B,i:()=>c,l:()=>T,u:()=>E,w:()=>P});var r=n(76506),a=n(57251),i=n(95587),s=n(60947),o=n(89623);const c=39.37,u=o.e.radius*Math.PI/200,l=/UNIT\[([^\]]+)\]\]$/i,h=s.o,f=/UNIT\[([^\]]+)\]/i,m=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),d=(0,a.s)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),p=t=>t*t,M=t=>t*t*t,g={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:p(.001)},"square-centimeters":{inBaseUnits:p(.01)},"square-decimeters":{inBaseUnits:p(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:p(1e3)},"square-inches":{inBaseUnits:p(.0254)},"square-feet":{inBaseUnits:p(.3048)},"square-yards":{inBaseUnits:p(.9144)},"square-miles":{inBaseUnits:p(1609.344)},"square-us-feet":{inBaseUnits:p(1200/3937)},acres:{inBaseUnits:.0015625*p(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*M(.001)},"cubic-centimeters":{inBaseUnits:1e3*M(.01)},"cubic-decimeters":{inBaseUnits:1e3*M(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*M(1e3)},"cubic-inches":{inBaseUnits:1e3*M(.0254)},"cubic-feet":{inBaseUnits:1e3*M(.3048)},"cubic-yards":{inBaseUnits:1e3*M(.9144)},"cubic-miles":{inBaseUnits:1e3*M(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},b=function(){const t={};for(const e in g)for(const n in g[e].units)t[n]=e;return t}();function y(t){const e=b[t];if(e)return e;throw new Error("unknown measure")}function x(t,e=null){return e=e||y(t),g[e].baseUnit===t}function w(t,e,n){if(e===n)return t;const r=y(e);if(r!==y(n))throw new Error("incompatible units");const a=x(e,r)?t:function(t,e,n){return t*g[n].units[e].inBaseUnits}(t,e,r);return x(n,r)?a:function(t,e,n){return t/g[n].units[e].inBaseUnits}(a,n,r)}function T(t,e,n){return w(t,e,"meters")/(n*Math.PI/180)}function E(t){return d.fromJSON(t.toLowerCase())||null}function q(t){if(t&&"object"==typeof t&&!(0,s.b)(t))return 1;const e=v(t);return e>1e5?1:e}function B(t){return v(t)>=(t instanceof s.Z?(0,i.g)(t).metersPerDegree:1e5)?"meters":P(t)}function v(t,e=o.e.metersPerDegree){return _(t,!0)||e}function _(t,e=!1){let n,r,a=null;if(null!=t&&("object"==typeof t?(n=t.wkid,r=t.wkt):"number"==typeof t?n=t:"string"==typeof t&&(r=t)),n){if((0,s.c)(n))return o.m.metersPerDegree;if((0,s.d)(n))return o.a.metersPerDegree;a=h.values[h[n]],!a&&e&&m.has(n)&&(a=u)}else r&&(U(r)?a=A(l.exec(r),a):k(r)&&(a=A(f.exec(r),a)));return a}function A(t,e){return t&&t[1]?S(t[1]):e}function S(t){return parseFloat(t.split(",")[1])}function P(t){let e,n,a=null;if(null!=t&&("object"==typeof t?(e=t.wkid,n=t.wkt):"number"==typeof t?e=t:"string"==typeof t&&(n=t)),e)a=h.units[h[e]];else if(n){const t=U(n)?l:k(n)?f:null;if(t){const e=t.exec(n);e&&e[1]&&(a=function(t){const e=/[\\"\\']{1}([^\\"\\']+)/.exec(t);let n=e&&e[1];if(!n||-1===h.units.indexOf(n)){const e=S(t);n=null;const r=h.values;for(let t=0;t<r.length;++t)if(Math.abs(e-r[t])<1e-7){n=h.units[t];break}}return n}(e[1]))}}return(0,r.i)(a)?E(a):null}function k(t){return/^GEOCCS/i.test(t)}function U(t){return/^PROJCS/i.test(t)}const O={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},R={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},C=(0,a.s)()(O),Y=(0,a.s)()(R);(0,a.s)()({...O,...R})},92847:(t,e,n)=>{n.d(e,{g:()=>s});var r=n(76506),a=n(53785),i=n(60947);function s(t,e,n){if((0,r.b)(e)||(0,r.b)(n)||n.vcsWkid||(0,i.e)(e,n))return null;const s=(0,a.b)(e)/(0,a.b)(n);if(1===s)return null;switch(t){case"point":case"esriGeometryPoint":return t=>{return n=s,void((e=t)&&null!=e.z&&(e.z*=n));var e,n};case"polyline":case"esriGeometryPolyline":return t=>function(t,e){if(t)for(const n of t.paths)for(const t of n)t.length>2&&(t[2]*=e)}(t,s);case"polygon":case"esriGeometryPolygon":return t=>function(t,e){if(t)for(const n of t.rings)for(const t of n)t.length>2&&(t[2]*=e)}(t,s);case"multipoint":case"esriGeometryMultipoint":return t=>function(t,e){if(t)for(const n of t.points)n.length>2&&(n[2]*=e)}(t,s);case"extent":case"esriGeometryExtent":return t=>function(t,e){t&&null!=t.zmin&&null!=t.zmax&&(t.zmin*=e,t.zmax*=e)}(t,s);default:return null}}},82058:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m,l:()=>h,r:()=>P,s:()=>l});var r=n(31450),a=n(88762),i=n(60991),s=n(76506),o=n(50406),c=n(32101);n(71552),n(92143),n(40642);const u=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function l(t){const e=(0,c.P$)(t,!0);return e&&e.endsWith(".arcgis.com")&&!u.includes(e)&&!t.endsWith("/sharing/rest/generateToken")}function h(t,e,n=!1,r){return new Promise(((a,i)=>{if((0,o.Hc)(r))return void i(f());let c=()=>{h(),i(new Error(`Unable to load ${e}`))},u=()=>{const e=t;h(),a(e)},l=()=>{if(!t)return;const e=t;h(),e.src="",i(f())};const h=()=>{(0,s.h)("esri-image-decode")||(t.removeEventListener("error",c),t.removeEventListener("load",u)),c=null,u=null,t=null,(0,s.i)(r)&&r.removeEventListener("abort",l),l=null,n&&URL.revokeObjectURL(e)};(0,s.i)(r)&&r.addEventListener("abort",l),(0,s.h)("esri-image-decode")?t.decode().then(u,c):(t.addEventListener("error",c),t.addEventListener("load",u))}))}function f(){try{return new DOMException("Aborted","AbortError")}catch{const t=new Error;return t.name="AbortError",t}}async function m(t,e){var u;const h=(0,c.HK)(t),f=(0,c.jc)(t);f||h||(t=(0,c.Fv)(t));const g={url:t,requestOptions:{...(0,s.u)(e)}};let b=(0,c.oh)(t);if(b){const t=await async function(t,e){if(null!=t.responseData)return t.responseData;if(t.headers&&(e.requestOptions.headers={...e.requestOptions.headers,...t.headers}),t.query&&(e.requestOptions.query={...e.requestOptions.query,...t.query}),t.before){let n,r;try{r=await t.before(e)}catch(t){n=E("request:interceptor",t,e)}if((r instanceof Error||r instanceof i.Z)&&(n=E("request:interceptor",r,e)),n)throw t.error&&t.error(n),n;return r}}(b,g);if(null!=t)return{data:t,getHeader:x,requestOptions:g.requestOptions,url:g.url};b.after||b.error||(b=null)}if(t=g.url,"image"===(e=g.requestOptions).responseType){if((0,s.h)("host-webworker")||(0,s.h)("host-node"))throw E("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),g)}else if(h)throw E("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+e.responseType),g);if("head"===e.method){if(e.body)throw E("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),g);if(h||f)throw E("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),g)}if(await async function(){(0,s.h)("host-webworker")?d||(d=await n.e(9768).then(n.bind(n,89768))):m._abortableFetch||(m._abortableFetch=globalThis.fetch.bind(globalThis))}(),d)return d.execute(t,e);const y=new AbortController;(0,o.fu)(e,(()=>y.abort()));const w={controller:y,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:b,params:g,redoRequest:!1,useIdentity:p.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},T=await async function(t){var e,n;let i,s;await async function(t){const e=t.params.url,n=t.params.requestOptions,i=t.controller.signal,s=n.body;let c=null,u=null,h=null;if(M&&"HTMLFormElement"in globalThis&&(s instanceof FormData?c=s:s instanceof HTMLFormElement&&(u=s,c=new FormData(u))),"string"==typeof s&&(h=s),t.fetchOptions={cache:n.cacheBust&&!m._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:n.headers||{},method:"head"===n.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:i},(c||h)&&(t.fetchOptions.body=c||h),"anonymous"===n.authMode&&(t.useIdentity=!1),t.hasToken=!!(/token=/i.test(e)||n.query&&n.query.token||c&&c.get&&c.get("token")||u&&u.elements.token),!t.hasToken&&r.Z.apiKey&&l(e)&&(n.query||(n.query={}),n.query.token=r.Z.apiKey,t.hasToken=!0),t.useIdentity&&!t.hasToken&&!t.credentialToken&&!B(e)&&!(0,o.Hc)(i)){let r;"immediate"===n.authMode?(await q(),r=await a.id.getCredential(e,{signal:i}),t.credential=r):"no-prompt"===n.authMode?(await q(),r=await a.id.getCredential(e,{prompt:!1,signal:i}).catch((()=>{})),t.credential=r):a.id&&(r=a.id.findCredential(e)),r&&(t.credentialToken=r.token,t.useSSL=!!r.ssl)}}(t);try{do{[i,s]=await v(t)}while(!await A(t,i,s))}catch(e){const n=E("request:server",e,t.params,i);throw n.details.ssl=t.useSSL,t.interceptor&&t.interceptor.error&&t.interceptor.error(n),n}const u=t.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(u)&&!t.hasToken&&!t.credentialToken&&null!=(e=s)&&null!=(n=e.user)&&n.username&&!(0,c.kl)(u)){const t=(0,c.P$)(u,!0);t&&p.trustedServers.push(t)}const h=t.credential;if(h&&a.id){const t=a.id.findServerInfo(h.server);let e=t&&t.owningSystemUrl;if(e){e=e.replace(/\/?$/,"/sharing");const t=a.id.findCredential(e,h.userId);t&&-1===a.id._getIdenticalSvcIdx(e,t)&&t.resources.unshift(e)}}return{data:s,getHeader:i?t=>i.headers.get(t):x,requestOptions:t.params.requestOptions,ssl:t.useSSL,url:t.params.url}}(w);return null==(u=b)||null==u.after||u.after(T),T}let d;const p=r.Z.request,M="FormData"in globalThis,g=[499,498,403,401],b=["COM_0056","COM_0057","SB_0008"],y=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],x=()=>null,w=Symbol();function T(t){const e=(0,c.P$)(t);return!e||e.endsWith(".arcgis.com")||m._corsServers.includes(e)||(0,c.kl)(e)}function E(t,e,n,r){let a="Error";const c={url:n.url,requestOptions:n.requestOptions,getHeader:x,ssl:!1};if(e instanceof i.Z)return e.details?(e.details=(0,s.d9)(e.details),e.details.url=n.url,e.details.requestOptions=n.requestOptions):e.details=c,e;if(e){const t=r&&(t=>r.headers.get(t)),n=r&&r.status,i=e.message;i&&(a=i),t&&(c.getHeader=t),c.httpStatus=(null!=e.httpCode?e.httpCode:e.code)||n||0,c.subCode=e.subcode,c.messageCode=e.messageCode,"string"==typeof e.details?c.messages=[e.details]:c.messages=e.details,c.raw=w in e?e[w]:e}return(0,o.D_)(e)?(0,o.zE)():new i.Z(t,a,c)}async function q(){a.id||await Promise.all([n.e(6229),n.e(406),n.e(2303),n.e(9798)]).then(n.bind(n,89798))}function B(t){return y.some((e=>e.test(t)))}async function v(t){let e=t.params.url;const n=t.params.requestOptions,r=t.fetchOptions,i=(0,c.jc)(e)||(0,c.HK)(e),u=n.responseType||"json",l=i?0:null!=n.timeout?n.timeout:p.timeout;let h=!1;if(!i){t.useSSL&&(e=(0,c.hO)(e)),n.cacheBust&&"default"===r.cache&&(e=(0,c.ZN)(e,"request.preventCache",Date.now()));let i={...n.query};t.credentialToken&&(i.token=t.credentialToken);let o=(0,c.B7)(i);(0,s.h)("esri-url-encodes-apostrophe")&&(o=o.replace(/'/g,"%27"));const u=e.length+1+o.length;let l;h="delete"===n.method||"post"===n.method||"put"===n.method||!!n.body||u>p.maxUrlLength;const f=n.useProxy||!!(0,c.ed)(e);if(f){const t=(0,c.b7)(e);l=t.path,!h&&l.length+1+u>p.maxUrlLength&&(h=!0),t.query&&(i={...t.query,...i})}if("HEAD"===r.method&&(h||f)){if(h){if(u>p.maxUrlLength)throw E("request:invalid-parameters",new Error("URL exceeds maximum length"),t.params);throw E("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),t.params)}if(f)throw E("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),t.params)}if(h?(r.method="delete"===n.method?"DELETE":"put"===n.method?"PUT":"POST",n.body?e=(0,c.fl)(e,i):(r.body=(0,c.B7)(i),r.headers["Content-Type"]="application/x-www-form-urlencoded")):e=(0,c.fl)(e,i),f&&(t.useProxy=!0,e=`${l}?${e}`),i.token&&M&&r.body instanceof FormData){const t=r.body;t.set?t.set("token",i.token):t.append("token",i.token)}if(n.hasOwnProperty("withCredentials"))t.withCredentials=n.withCredentials;else if(!(0,c.D6)(e,c.Gd))if((0,c.kl)(e))t.withCredentials=!0;else if(a.id){const n=a.id.findServerInfo(e);n&&n.webTierAuth&&(t.withCredentials=!0)}t.withCredentials&&(r.credentials="include")}let f,d,g=0,b=!1;l>0&&(g=setTimeout((()=>{b=!0,t.controller.abort()}),l));try{if("native-request-init"===n.responseType)d=r,d.url=e;else if("image"!==n.responseType||"default"!==r.cache||"GET"!==r.method||h||function(t){if(t)for(const e of Object.getOwnPropertyNames(t))if(t[e])return!0;return!1}(n.headers)||!i&&!t.useProxy&&p.proxyUrl&&!T(e)){if(f=await m._abortableFetch(e,r),t.useProxy||function(t){const e=(0,c.P$)(t);e&&!m._corsServers.includes(e)&&m._corsServers.push(e)}(e),"native"===n.responseType)d=f;else if("HEAD"!==r.method)if(f.ok){switch(u){case"array-buffer":d=await f.arrayBuffer();break;case"blob":case"image":d=await f.blob();break;default:d=await f.text()}if(g&&(clearTimeout(g),g=0),"json"===u||"xml"===u||"document"===u)if(d)switch(u){case"json":d=JSON.parse(d);break;case"xml":d=_(d,"application/xml");break;case"document":d=_(d,"text/html")}else d=null;if(d){if("array-buffer"===u||"blob"===u){const t=f.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(t)&&d["blob"===u?"size":"byteLength"]<=750)try{const t=await new Response(d).json();t.error&&(d=t)}catch{}}"image"===u&&d instanceof Blob&&(d=await S(URL.createObjectURL(d),t,!0))}}else d=await f.text()}else d=await S(e,t)}catch(r){if("AbortError"===r.name){if(b)throw new Error("Timeout exceeded");throw(0,o.zE)("Request canceled")}if(!(!f&&r instanceof TypeError&&p.proxyUrl)||n.body||"delete"===n.method||"head"===n.method||"post"===n.method||"put"===n.method||t.useProxy||T(e))throw r;t.redoRequest=!0,(0,c.tD)({proxyUrl:p.proxyUrl,urlPrefix:(0,c.P$)(e)})}finally{g&&clearTimeout(g)}return[f,d]}function _(t,e){let n;try{n=(new DOMParser).parseFromString(t,e)}catch{}if(!n||n.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return n}async function A(t,e,n){if(t.redoRequest)return t.redoRequest=!1,!1;const r=t.params.requestOptions;if(!e||"native"===r.responseType||"native-request-init"===r.responseType)return!0;let i,s,o,c;if(!e.ok)throw i=new Error(`Unable to load ${e.url} status: ${e.status}`),i[w]=n,i;null!=n&&n.error&&(i=n.error),i&&(s=Number(i.code),o=i.hasOwnProperty("subcode")?Number(i.subcode):null,c=i.messageCode,c=c&&c.toUpperCase());const u=r.authMode;if(403===s&&(4===o||i.message&&i.message.toLowerCase().indexOf("ssl")>-1&&-1===i.message.toLowerCase().indexOf("permission"))){if(!t.useSSL)return t.useSSL=!0,!1}else if(!t.hasToken&&t.useIdentity&&("no-prompt"!==u||498===s)&&-1!==g.indexOf(s)&&!B(t.params.url)&&(403!==s||-1===b.indexOf(c)&&(null==o||2===o&&t.credentialToken))){await q();try{const e=await a.id.getCredential(t.params.url,{error:E("request:server",i,t.params),prompt:"no-prompt"!==u,signal:t.controller.signal,token:t.credentialToken});return t.credential=e,t.credentialToken=e.token,t.useSSL=t.useSSL||e.ssl,!1}catch(e){if("no-prompt"===u)return t.credential=null,t.credentialToken=null,!1;i=e}}if(i)throw i;return!0}function S(t,e,n=!1){const r=e.controller.signal,a=new Image;return e.withCredentials?a.crossOrigin="use-credentials":a.crossOrigin="anonymous",a.alt="",a.src=t,h(a,t,n,r)}m._abortableFetch=null,m._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];const P=Object.freeze({__proto__:null,default:m})}}]);