"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[9461],{60217:(e,t,n)=>{n.d(t,{A:()=>c,a:()=>s,b:()=>o,c:()=>u,l:()=>r}),n(74569);var i=n(76506),a=n(60947);let l;function r(){return l||(l=(async()=>{const e=await n.e(1886).then(n.bind(n,1886)).then((e=>e.R));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),l}const o=(e,t,n)=>c.create(e,t,n,null,["$feature"]),s=(e,t,n)=>c.create(e,t,n,null,["$feature","$view"]),u=(e,t,n,i)=>c.create(e,t,n,i,["$feature","$view"]);class c{constructor(e,t,n,i,a,l,r,o){this.script=e,this.evaluate=a;const s=Array.isArray(r)?r:r.fields;this.fields=s,this._syntaxTree=i,this._arcade=t,this._arcadeDictionary=n,this._arcadeFeature=l,this._spatialReference=o,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,n,l,o,s){const{arcade:u,Feature:d,Dictionary:f}=await r(),m=a.Z.fromJSON(t),p=u.parseScript(e,s),y=o.reduce(((e,t)=>({...e,[t]:null})),{});let h=null;(0,i.i)(l)&&(h=new f(l),h.immutable=!0,y.$config=null);const v=u.scriptUsesGeometryEngine(p)&&u.enableGeometrySupport(),b=u.scriptUsesFeatureSet(p)&&u.enableFeatureSetSupport(),g=u.scriptIsAsync(p)&&u.enableAsyncSupport(),F={vars:y,spatialReference:m,useAsync:!!g},V=new f;V.immutable=!1,V.setField("scale",0);const T=u.compileScript(p,F);return await Promise.all([v,b,g]),new c(e,u,f,p,(e=>("$view"in e&&e.$view&&(V.setField("scale",e.$view.scale),e.$view=V),h&&(e.$config=h),T({vars:e,spatialReference:m}))),new d,n,m)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},63683:(e,t,n)=>{n.d(t,{f:()=>o,t:()=>r});var i=n(94479),a=n(45702),l=n(51127);const r={key:"type",base:a.Z,typeMap:{algorithmic:i.Z,multipart:l.Z}};function o(e){return e&&e.type?"algorithmic"===e.type?i.Z.fromJSON(e):"multipart"===e.type?l.Z.fromJSON(e):null:null}},29794:(e,t,n)=>{n.d(t,{E:()=>i,R:()=>a});const i=1e-6,a=Math.random;Math.PI,Math.PI},59465:(e,t,n)=>{n.d(t,{e:()=>l});var i=n(57251),a=n(34250);function l(e,t={}){var n;const l=e instanceof i.J?e:new i.J(e,t),r={type:null==(n=null==t?void 0:t.ignoreUnknown)||n?l.apiValues:String,readOnly:null==t?void 0:t.readOnly,json:{type:l.jsonValues,read:(null==t||!t.readOnly)&&{reader:l.read},write:{writer:l.write}}};return void 0!==(null==t?void 0:t.default)&&(r.json.default=t.default),void 0!==(null==t?void 0:t.name)&&(r.json.name=t.name),(0,a.Cb)(r)}},66774:(e,t,n)=>{n.d(t,{C:()=>h,c:()=>b});var i=n(29768),a=n(57251),l=n(34250),r=(n(76506),n(91306),n(17533)),o=n(74673),s=n(63683),u=n(30776);const c=new a.J({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let d=class extends o.a{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};(0,i._)([(0,l.Cb)({type:u.Z,json:{write:!0}})],d.prototype,"baseSymbol",void 0),(0,i._)([(0,l.Cb)({types:s.t,json:{read:{reader:s.f},write:!0}})],d.prototype,"colorRamp",void 0),(0,i._)([(0,l.Cb)({json:{read:c.read,write:c.write}})],d.prototype,"type",void 0),d=(0,i._)([(0,r.j)("esri.rest.support.ClassificationDefinition")],d);const f=d,m=new a.J({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),p=new a.J({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let y=class extends f{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(e){"standard-deviation"===this.classificationMethod&&this._set("standardDeviationInterval",e)}set definedInterval(e){"defined-interval"===this.classificationMethod&&this._set("definedInterval",e)}};(0,i._)([(0,l.Cb)({json:{write:!0}})],y.prototype,"breakCount",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],y.prototype,"classificationField",void 0),(0,i._)([(0,l.Cb)({type:String,json:{read:m.read,write:m.write}})],y.prototype,"classificationMethod",void 0),(0,i._)([(0,l.Cb)({json:{write:!0}})],y.prototype,"normalizationField",void 0),(0,i._)([(0,l.Cb)({json:{read:p.read,write:p.write}})],y.prototype,"normalizationType",void 0),(0,i._)([(0,l.Cb)({value:null,json:{write:!0}})],y.prototype,"standardDeviationInterval",null),(0,i._)([(0,l.Cb)({value:null,json:{write:!0}})],y.prototype,"definedInterval",null),(0,i._)([(0,l.Cb)()],y.prototype,"type",void 0),y=(0,i._)([(0,r.j)("esri.rest.support.ClassBreaksDefinition")],y);const h=y;function v(e,t){return Number(e.toFixed(t))}function b(e){const{normalizationTotal:t}=e,n=function(e){const t=e.definition,{classificationMethod:n,breakCount:i,normalizationType:a,definedInterval:l}=t,r=[];let o=e.values;if(0===o.length)return[];o=o.sort(((e,t)=>e-t));const s=o[0],u=o[o.length-1];if("equal-interval"===n)if(o.length>=i){const e=(u-s)/i;let t=s;for(let n=1;n<i;n++){const i=v(s+n*e,6);r.push({minValue:t,maxValue:i,label:g(t,i,a)}),t=i}r.push({minValue:t,maxValue:u,label:g(t,u,a)})}else o.forEach((e=>{r.push({minValue:e,maxValue:e,label:g(e,e,a)})}));else if("natural-breaks"===n){const t=function(e){const t=[],n=[];let i=Number.MIN_VALUE,a=1,l=-1;for(let r=0;r<e.length;r++){const o=e[r];o===i?(a++,n[l]=a):null!==o&&(t.push(o),i=o,a=1,n.push(a),l++)}return{uniqueValues:t,valueFrequency:n}}(o),n=e.valueFrequency||t.valueFrequency,l=function(e,t,n){const i=e.length,a=[];n>i&&(n=i);for(let e=0;e<n;e++)a.push(Math.round(e*i/n-1));a.push(i-1);let l=F(a,e,t,n);return function(e,t,n,i,a,l){let r=0,o=0,s=0,u=0,c=!0;for(let d=0;d<2&&c;d++){0===d&&(c=!1);for(let d=0;d<l-1;d++)for(;n[d+1]+1!==n[d+2];){n[d+1]=n[d+1]+1;const l=V(d,n,i,a);s=l.sbMean,r=l.sbSdcm;const f=V(d+1,n,i,a);if(u=f.sbMean,o=f.sbSdcm,!(r+o<t[d]+t[d+1])){n[d+1]=n[d+1]-1;break}t[d]=r,t[d+1]=o,e[d]=s,e[d+1]=u,c=!0}for(let d=l-1;d>0;d--)for(;n[d]!==n[d-1]+1;){n[d]=n[d]-1;const l=V(d-1,n,i,a);s=l.sbMean,r=l.sbSdcm;const f=V(d,n,i,a);if(u=f.sbMean,o=f.sbSdcm,!(r+o<t[d-1]+t[d])){n[d]=n[d]+1;break}t[d-1]=r,t[d]=o,e[d-1]=s,e[d]=u,c=!0}}return c}(l.mean,l.sdcm,a,e,t,n)&&(l=F(a,e,t,n)),a}(t.uniqueValues,n,i);let c=s;for(let e=1;e<i;e++)if(t.uniqueValues.length>e){const n=v(t.uniqueValues[l[e]],6);r.push({minValue:c,maxValue:n,label:g(c,n,a)}),c=n}r.push({minValue:c,maxValue:u,label:g(c,u,a)})}else if("quantile"===n)if(o.length>=i&&s!==u){let e=s,t=Math.ceil(o.length/i),n=0;for(let l=1;l<i;l++){let s=t+n-1;s>o.length&&(s=o.length-1),s<0&&(s=0),r.push({minValue:e,maxValue:o[s],label:g(e,o[s],a)}),e=o[s],n+=t,t=Math.ceil((o.length-n)/(i-l))}r.push({minValue:e,maxValue:u,label:g(e,u,a)})}else{let e=-1;for(let t=0;t<o.length;t++){const n=o[t];n!==e&&(e=n,r.push({minValue:e,maxValue:n,label:g(e,n,a)}),e=n)}}else if("standard-deviation"===n){const e=function(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t/=e.length,t}(o),t=function(e,t){let n=0;for(let i=0;i<e.length;i++){const a=e[i];n+=(a-t)*(a-t)}return n/=e.length,Math.sqrt(n)}(o,e);if(0===t)r.push({minValue:o[0],maxValue:o[0],label:g(o[0],o[0],a)});else{const n=function(e,t,n,i,a){let l=Math.max(i-e,t-i)/a/n;return l=l>=1?1:l>=.5?.5:.25,l}(s,u,i,e,t),l=n*t;let o=0,c=s;for(let t=i;t>=1;t--){const n=v(e-(t-.5)*l,6);r.push({minValue:c,maxValue:n,label:g(c,n,a)}),c=n,o++}let d=v(e+.5*l,6);r.push({minValue:c,maxValue:d,label:g(c,d,a)}),c=d,o++;for(let t=1;t<=i;t++)d=o===2*i?u:v(e+(t+.5)*l,6),r.push({minValue:c,maxValue:d,label:g(c,d,a)}),c=d,o++}}else if("defined-interval"===n){if(!l)return r;const e=o[0],t=o[o.length-1],n=Math.ceil((t-e)/l);let i=e;for(let t=1;t<n;t++){const n=v(e+t*l,6);r.push({minValue:i,maxValue:n,label:g(i,n,a)}),i=n}r.push({minValue:i,maxValue:t,label:g(i,t,a)})}return r}(e);return{classBreaks:n,normalizationTotal:t}}function g(e,t,n){let i=null;return i=e===t?n&&"percent-of-total"===n?e+"%":e.toString():n&&"percent-of-total"===n?e+"% - "+t+"%":e+" - "+t,i}function F(e,t,n,i){let a=[],l=[],r=[],o=0;const s=[],u=[];for(let a=0;a<i;a++){const i=V(a,e,t,n);s.push(i.sbMean),u.push(i.sbSdcm),o+=u[a]}let c,d=o,f=!0;for(;f||o<d;){f=!1,a=[];for(let t=0;t<i;t++)a.push(e[t]);for(let n=0;n<i;n++)for(let a=e[n]+1;a<=e[n+1];a++)if(c=t[a],n>0&&a!==e[n+1]&&Math.abs(c-s[n])>Math.abs(c-s[n-1]))e[n]=a;else if(n<i-1&&e[n]!==a-1&&Math.abs(c-s[n])>Math.abs(c-s[n+1])){e[n+1]=a-1;break}d=o,o=0,l=[],r=[];for(let a=0;a<i;a++){l.push(s[a]),r.push(u[a]);const i=V(a,e,t,n);s[a]=i.sbMean,u[a]=i.sbSdcm,o+=u[a]}}if(o>d){for(let t=0;t<i;t++)e[t]=a[t],s[t]=l[t],u[t]=r[t];o=d}return{mean:s,sdcm:u}}function V(e,t,n,i){let a=0,l=0;for(let r=t[e]+1;r<=t[e+1];r++){const e=i[r];a+=n[r]*e,l+=e}l<=0&&console.log("Exception in Natural Breaks calculation");const r=a/l;let o=0;for(let a=t[e]+1;a<=t[e+1];a++)o+=i[a]*(n[a]-r)**2;return{sbMean:r,sbSdcm:o}}},99461:(e,t,n)=>{n.r(t),n.d(t,{a:()=>m,b:()=>c,c:()=>F,d:()=>y,e:()=>p,f:()=>T,g:()=>d,h:()=>V,m:()=>h,s:()=>b,u:()=>g,v:()=>v});var i=n(60991),a=n(76506),l=n(60947),r=n(14249),o=n(22572),s=n(60217);let u=null;async function c(e,t){if(!t)return[];const n=e.field,i=e.valueExpression,a=e.normalizationType,r=e.normalizationField,c=e.normalizationTotal,d=[],f=e.viewInfoParams;let m=null,p=null;if(i){if(!u){const{arcadeUtils:e}=await(0,s.l)();u=e}m=u.createFunction(i),p=f&&u.getViewInfo({viewingMode:f.viewingMode,scale:f.scale,spatialReference:new l.Z(f.spatialReference)})}return t.forEach((e=>{const t=e.attributes;let l;if(i){const t=u.createExecContext(e,p);l=u.executeFunction(m,t)}else t&&(l=t[n]);if(a&&isFinite(l)){const e=t&&parseFloat(t[r]);l=(0,o.b)(l,a,e,c)}d.push(l)})),d}function d(e){const t=e.field,n=e.normalizationType,i=e.normalizationField;let a;return"field"===n?a="(NOT "+i+" = 0)":"log"!==n&&"natural-log"!==n&&"square-root"!==n||(a=`(${t} > 0)`),a}function f(e,t){return new i.Z(e,t)}function m(e,t,n){const i=null!=t?e+" >= "+t:"",a=null!=n?e+" <= "+n:"";let l="";return l=i&&a?h(i,a):i||a,l?"("+l+")":""}function p(e,t,n,i){let a=null;return t?t.name!==e.objectIdField&&-1!==i.indexOf(t.type)||(a=f(n,"'field' should be one of these types: "+i.join(","))):a=f(n,"'field' is not defined in the layer schema"),a}function y(e,t,n){let i;return t?t.name!==e.objectIdField&&(0,r.H7)(t)||(i=f(n,"'field' should be one of these numeric types: "+r.v5.join(","))):i=f(n,"'field' is not defined in the layer schema"),i}function h(e,t){let n=(0,a.i)(e)?e:"";return(0,a.i)(t)&&t&&(n=n?"("+n+") AND ("+t+")":t),n}function v(e,t,n){const i=function(e){const t=e.layer;return e.fields.filter((e=>!t.getField(e)))}({layer:e,fields:t});if(i.length)return f(n,"Unknown fields: "+i.join(", ")+". You can only use fields defined in the layer schema");const a=function(e){const t=e.layer;return e.fields.filter((e=>{const n=t.getFieldUsageInfo(e);return!n||!n.supportsStatistics}))}({layer:e,fields:t});return a.length?f(n,"Unsupported fields: "+a.join(", ")+". You can only use fields that can be fetched i.e. AdapterFieldUsageInfo.supportsStatistics must be true"):void 0}async function b(e){const{attribute:t,features:n}=e,{normalizationType:i,normalizationField:a,minValue:l,maxValue:r,fieldType:s}=t,u=await c({field:t.field,valueExpression:t.valueExpression,normalizationType:i,normalizationField:a,normalizationTotal:t.normalizationTotal,viewInfoParams:t.viewInfoParams},n),d=(0,o.i)({normalizationType:i,normalizationField:a,minValue:l,maxValue:r}),f={value:.5,fieldType:s},m="esriFieldTypeString"===s?(0,o.d)({values:u,supportsNullCount:d,percentileParams:f}):(0,o.e)({values:u,minValue:l,maxValue:r,useSampleStdDev:!i,supportsNullCount:d,percentileParams:f});return(0,o.p)(m,"esriFieldTypeDate"===s)}async function g(e){const{attribute:t,features:n}=e,i=await c({field:t.field,valueExpression:t.valueExpression,viewInfoParams:t.viewInfoParams},n),a=(0,o.f)(i);return(0,o.c)(a,t.domain,t.returnAllCodedValues)}async function F(e){const{attribute:t,features:n}=e,{field:i,normalizationType:a,normalizationField:l,normalizationTotal:r,classificationMethod:s}=t,u=await c({field:i,valueExpression:t.valueExpression,normalizationType:a,normalizationField:l,normalizationTotal:r,viewInfoParams:t.viewInfoParams},n),d=(0,o.h)(u,{field:i,normalizationType:a,normalizationField:l,normalizationTotal:r,classificationMethod:s,standardDeviationInterval:t.standardDeviationInterval,numClasses:t.numClasses,minValue:t.minValue,maxValue:t.maxValue});return(0,o.r)(d,s)}async function V(e){const{attribute:t,features:n}=e,{field:i,normalizationType:a,normalizationField:l,normalizationTotal:r,classificationMethod:s}=t,u=await c({field:i,valueExpression:t.valueExpression,normalizationType:a,normalizationField:l,normalizationTotal:r,viewInfoParams:t.viewInfoParams},n);return(0,o.j)(u,{field:i,normalizationType:a,normalizationField:l,normalizationTotal:r,classificationMethod:s,standardDeviationInterval:t.standardDeviationInterval,numBins:t.numBins,minValue:t.minValue,maxValue:t.maxValue})}const T=Object.freeze({__proto__:null,summaryStatistics:b,uniqueValues:g,classBreaks:F,histogram:V})},22781:(e,t,n)=>{n.d(t,{f:()=>a,t:()=>l});var i=n(57251);const a=(0,i.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),l=(0,i.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},22572:(e,t,n)=>{n.d(t,{b:()=>v,c:()=>h,d:()=>s,e:()=>u,f:()=>y,h:()=>b,i:()=>o,j:()=>F,k:()=>d,l:()=>c,p:()=>p,r:()=>g});var i=n(66774);const a=/\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*/gi,l=new Set(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]),r=["min","max","avg","stddev","count","sum","variance","nullcount","median"];function o(e){const t=null!=e.normalizationField||null!=e.normalizationType,n=null!=e.minValue||null!=e.maxValue,i=!!e.sqlExpression&&e.supportsSQLExpression;return!t&&!n&&!i}function s(e){const t=e.returnDistinct?[...new Set(e.values)]:e.values,n=t.filter((e=>null!=e)).length,i={count:n};return e.supportsNullCount&&(i.nullcount=t.length-n),e.percentileParams&&(i.median=c(t,e.percentileParams)),i}function u(e){const{values:t,useSampleStdDev:n,supportsNullCount:i}=e;let a=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,r=null,o=null,s=null,u=null,d=0;const f=null==e.minValue?-1/0:e.minValue,m=null==e.maxValue?1/0:e.maxValue;for(const e of t)Number.isFinite(e)?e>=f&&e<=m&&(r+=e,a=Math.min(a,e),l=Math.max(l,e),d++):"string"==typeof e&&d++;if(d&&null!=r){o=r/d;let e=0;for(const n of t)Number.isFinite(n)&&n>=f&&n<=m&&(e+=(n-o)**2);u=n?d>1?e/(d-1):0:d>0?e/d:0,s=Math.sqrt(u)}else a=null,l=null;const p={avg:o,count:d,max:l,min:a,stddev:s,sum:r,variance:u};return i&&(p.nullcount=t.length-d),e.percentileParams&&(p.median=c(t,e.percentileParams)),p}function c(e,t){const{fieldType:n,value:i,orderBy:a,isDiscrete:l}=t,r=d(n,"desc"===a);if(0===(e=[...e].filter((e=>null!=e)).sort(((e,t)=>r(e,t)))).length)return null;if(i<=0)return e[0];if(i>=1)return e[e.length-1];const o=(e.length-1)*i,s=Math.floor(o),u=s+1,c=o%1,f=e[s],m=e[u];return u>=e.length||l||"string"==typeof f||"string"==typeof m?f:f*(1-c)+m*c}function d(e,t){const n=t?1:-1,i=function(e){return e?(e,t)=>t-e:(e,t)=>e-t}(t),a=f(t);if(!e||!["esriFieldTypeDate","esriFieldTypeString","esriFieldTypeGUID","esriFieldTypeGlobalID",...l].includes(e))return(e,t)=>"number"==typeof e&&"number"==typeof t?i(e,t):"string"==typeof e&&"string"==typeof t?a(e,t):n;if("esriFieldTypeDate"===e)return(e,t)=>{const a=new Date(e).getTime(),l=new Date(t).getTime();return isNaN(a)||isNaN(l)?n:i(a,l)};if(l.has(e))return(e,t)=>i(e,t);if("esriFieldTypeString"===e)return(e,t)=>a(e,t);if("esriFieldTypeGUID"===e||"esriFieldTypeGlobalID"===e){const e=f(t);return(t,n)=>e(m(t),m(n))}return t?(e,t)=>1:(e,t)=>-1}function f(e){return e?(e,t)=>(e=e.toUpperCase())>(t=t.toUpperCase())?-1:e<t?1:0:(e,t)=>(e=e.toUpperCase())<(t=t.toUpperCase())?-1:e>t?1:0}function m(e){return e.substr(24,12)+e.substr(19,4)+e.substr(16,2)+e.substr(14,2)+e.substr(11,2)+e.substr(9,2)+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)+e.substr(0,2)}function p(e,t){let n;for(n in e)r.indexOf(n)>-1&&(Number.isFinite(e[n])||(e[n]=null));return t?(["avg","stddev","variance"].forEach((t=>{null!=e[t]&&(e[t]=Math.ceil(e[t]))})),e):e}function y(e){const t={};for(let n of e)(null==n||"string"==typeof n&&""===n.trim())&&(n=null),null==t[n]?t[n]={count:1,data:n}:t[n].count++;return{count:t}}function h(e,t,n){const i=e.count,a=[];n&&t&&"coded-value"===t.type&&t.codedValues.forEach((e=>{const t=e.code;i.hasOwnProperty(t)||(i[t]={data:t,count:0})}));for(const e in i){const t=i[e];a.push({value:t.data,count:t.count,label:t.label})}return{uniqueValueInfos:a}}function v(e,t,n,i){let a=null;switch(t){case"log":0!==e&&(a=Math.log(e)*Math.LOG10E);break;case"percent-of-total":Number.isFinite(i)&&0!==i&&(a=e/i*100);break;case"field":Number.isFinite(n)&&0!==n&&(a=e/n);break;case"natural-log":e>0&&(a=Math.log(e));break;case"square-root":e>0&&(a=e**.5)}return a}function b(e,t){const n=function(e){const t=e.field,n=e.classificationMethod||"equal-interval",a=e.normalizationType,l=e.normalizationField,r=new i.C;return r.classificationField=t,r.breakCount=e.breakCount,r.classificationMethod=n,r.standardDeviationInterval="standard-deviation"===n?e.standardDeviationInterval||1:void 0,r.normalizationType=a,r.normalizationField="field"===a?l:void 0,r}({field:t.field,normalizationType:t.normalizationType,normalizationField:t.normalizationField,classificationMethod:t.classificationMethod,standardDeviationInterval:t.standardDeviationInterval,breakCount:t.numClasses||5});return e=function(e,t,n){return t=null==t?-1/0:t,n=null==n?1/0:n,e.filter((e=>Number.isFinite(e)&&e>=t&&e<=n))}(e,t.minValue,t.maxValue),(0,i.c)({definition:n,values:e,normalizationTotal:t.normalizationTotal})}function g(e,t){let n=e.classBreaks;const i=n.length,l=n[0].minValue,r=n[i-1].maxValue,o="standard-deviation"===t,s=a;return n=n.map((e=>{const t=e.label,n={minValue:e.minValue,maxValue:e.maxValue,label:t};if(o&&t){const e=t.match(s).map((e=>+e.trim()));2===e.length?(n.minStdDev=e[0],n.maxStdDev=e[1],e[0]<0&&e[1]>0&&(n.hasAvg=!0)):1===e.length&&(t.includes("<")?(n.minStdDev=null,n.maxStdDev=e[0]):t.includes(">")&&(n.minStdDev=e[0],n.maxStdDev=null))}return n})),{minValue:l,maxValue:r,classBreakInfos:n,normalizationTotal:e.normalizationTotal}}function F(e,t){const{min:n,max:i,intervals:a}=function(e,t){const{field:n,classificationMethod:i,standardDeviationInterval:a,normalizationType:l,normalizationField:r,normalizationTotal:s,minValue:c,maxValue:d}=t,f=t.numBins||10;let m=null,p=null,y=null;if(i&&"equal-interval"!==i||l){const{classBreaks:t}=b(e,{field:n,normalizationType:l,normalizationField:r,normalizationTotal:s,classificationMethod:i,standardDeviationInterval:a,minValue:c,maxValue:d,numClasses:f});m=t[0].minValue,p=t[t.length-1].maxValue,y=t.map((e=>[e.minValue,e.maxValue]))}else{if(null!=c&&null!=d)m=c,p=d;else{const t=u({values:e,minValue:c,maxValue:d,useSampleStdDev:!l,supportsNullCount:o({normalizationType:l,normalizationField:r,minValue:c,maxValue:d})});m=t.min,p=t.max}y=function(e,t,n){const i=(t-e)/n,a=[];let l,r=e;for(let e=1;e<=n;e++)l=r+i,l=Number(l.toFixed(16)),a.push([r,e===n?t:l]),r=l;return a}(m,p,f)}return{min:m,max:p,intervals:y}}(e,t),l=a.map(((e,t)=>({minValue:a[t][0],maxValue:a[t][1],count:0})));for(const t of e)if(null!=t&&t>=n&&t<=i){const e=V(a,t);e>-1&&l[e].count++}return{bins:l,minValue:n,maxValue:i,normalizationTotal:t.normalizationTotal}}function V(e,t){let n=-1;for(let i=e.length-1;i>=0;i--)if(t>=e[i][0]){n=i;break}return n}},74569:(e,t,n)=>{n.d(t,{qM:()=>c});var i=n(91306),a=n(21801),l=n(73796),r=n(84069),o=n(91597),s=n(44567),u=n(92896);n(60947),n(22781),n(32422),n(76506),n(92143),n(31450),n(71552),n(40642),n(34250),n(86656),n(22723),n(17533),n(60991),n(35132),n(89623),n(74673),n(21972),n(23639),n(91055),n(6906),n(50406),n(2906),n(97714),n(86787),n(98380),n(57251);const c={base:l.Z,key:"type",typeMap:{extent:a.Z,multipoint:r.Z,point:o.Z,polyline:u.Z,polygon:s.Z}};(0,i.a)(c)},32422:(e,t,n)=>{n.d(t,{im:()=>y,q9:()=>b,Ji:()=>h,YX:()=>c,aW:()=>d,wp:()=>f,oU:()=>p,l9:()=>m});var i=n(76506),a=n(21801),l=n(73796),r=n(84069),o=n(91597),s=n(44567),u=n(92896);function c(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function d(e){return void 0!==e.points}function f(e){return void 0!==e.x&&void 0!==e.y}function m(e){return void 0!==e.paths}function p(e){return void 0!==e.rings}function y(e){return(0,i.b)(e)?null:e instanceof l.Z?e:f(e)?o.Z.fromJSON(e):m(e)?u.Z.fromJSON(e):p(e)?s.Z.fromJSON(e):d(e)?r.Z.fromJSON(e):c(e)?a.Z.fromJSON(e):null}function h(e){return e?f(e)?"esriGeometryPoint":m(e)?"esriGeometryPolyline":p(e)?"esriGeometryPolygon":c(e)?"esriGeometryEnvelope":d(e)?"esriGeometryMultipoint":null:null}n(40642),n(71552),n(34250),n(92143),n(31450),n(91306),n(86656),n(22723),n(17533),n(60991),n(60947),n(74673),n(21972),n(23639),n(91055),n(6906),n(50406),n(2906),n(35132),n(89623),n(97714),n(86787),n(98380);const v={esriGeometryPoint:o.Z,esriGeometryPolyline:u.Z,esriGeometryPolygon:s.Z,esriGeometryEnvelope:a.Z,esriGeometryMultipoint:r.Z};function b(e){return e&&v[e]||null}},14249:(e,t,n)=>{n.d(t,{io:()=>v,AB:()=>h,gd:()=>y,Mu:()=>F,Q0:()=>p,YN:()=>c,UF:()=>f,O5:()=>b,os:()=>V,H7:()=>M,qN:()=>E,v5:()=>N,Pz:()=>O,Qc:()=>P,vP:()=>L});var i,a,l=n(60991),r=(n(76506),n(71552)),o=n(60217);n(92143),n(31450),n(40642),n(74569),n(91306),n(21801),n(34250),n(86656),n(22723),n(17533),n(73796),n(74673),n(21972),n(23639),n(91055),n(6906),n(50406),n(97714),n(60947),n(2906),n(91597),n(86787),n(35132),n(89623),n(84069),n(44567),n(98380),n(92896),n(22781),n(57251),n(32422),(a=i||(i={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const s=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],u=["field","normalizationField"];function c(e,t){if(null!=e&&null!=t)for(const n of Array.isArray(e)?e:[e])if(d(s,n,t),"visualVariables"in n&&n.visualVariables)for(const e of n.visualVariables)d(u,e,t)}function d(e,t,n){if(e)for(const i of e){const e=(0,r.g)(i,t),a=e&&"function"!=typeof e&&n.get(e);a&&(0,r.s)(i,a.name,t)}}function f(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const n=t.get(e.startField),i=t.get(e.endField);e.startField=n&&n.name||null,e.endField=i&&i.name||null}else{const n=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=n&&n.name||null,e.endTimeField=i&&i.name||null}}const m=new Set;function p(e,t){return e&&t?(m.clear(),y(m,e,t),Array.from(m).sort()):[]}function y(e,t,n){var i;if(n)if(null!=t&&null!=(i=t.fields)&&i.length)if(n.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const i of n)h(e,t,i);else{if(n.includes("*"))return e.clear(),void e.add("*");for(const t of n)e.add(t)}}function h(e,t,n){if("string"==typeof n)if(t){const i=t.get(n);i&&e.add(i.name)}else e.add(n)}async function v(e,t,n){var i;if(!n)return;const{arcadeUtils:a}=await(0,o.l)(),l=a.extractFieldNames(n,null==t||null==(i=t.fields)?void 0:i.map((e=>e.name)));for(const n of l)h(e,t,n)}function b({displayField:e,fields:t}){return e||(t&&t.length?g(t,"name-or-title")||g(t,"unique-identifier")||g(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function g(e,t){for(const n of e)if(n&&n.valueType&&n.valueType===t)return n.name;return null}async function F(e,t){const{labelingInfo:i,fieldsIndex:a}=t;i&&i.length&&await Promise.all(i.map((t=>async function(e,t,i){if(!i)return;const a=i.getLabelExpression(),r=i.where;if("arcade"===a.type)await v(e,t,a.expression);else{const n=a.expression.match(/{[^}]*}/g);n&&n.forEach((n=>{h(e,t,n.slice(1,-1))}))}await async function(e,t,i){if(i&&"1=1"!==i){const a=(await Promise.all([n.e(2274),n.e(5777)]).then(n.bind(n,72274))).WhereClause.create(i,t);if(!a.isStandardized)throw new l.Z("fieldUtils:collectFilterFields","Where clause is not standardized");y(e,t,a.fieldNames)}}(e,t,r)}(e,a,t))))}function V(e){const t=e.defaultValue;return void 0!==t&&S(e,t)?t:e.nullable?null:void 0}function T(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function x(e){return null===e||T(e)}const I="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function w(e){return null===e||I(e)}function _(e){return null!=e&&"string"==typeof e}function z(e){return null===e||_(e)}function C(){return!0}function S(e,t){let n;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":n=e.nullable?w:I;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":n=e.nullable?x:T;break;case"string":case"esriFieldTypeString":n=e.nullable?z:_;break;default:n=C}return 1===arguments.length?n:n(t)}const N=["integer","small-integer","single","double"],D=new Set([...N,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function M(e){return null!=e&&D.has(e.type)}function E(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var A,k;function O(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function P(e,t){return e.nullable&&null===t?null:M(e)&&!function(e,t){const n="string"==typeof e?G(e):e;return!!n&&(n.isInteger?I(t)&&t>=n.min&&t<=n.max:t>=n.min&&t<=n.max)}(e.type,Number(t))?A.OUT_OF_RANGE:S(e,t)?e.domain?function(e,t){switch(e.type){case"range":{const n="range"in e?e.range[0]:e.minValue,a="range"in e?e.range[1]:e.maxValue;if(+t<n||+t>a)return i.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return i.INVALID_CODED_VALUE}return null}(e.domain,t):null:k.INVALID_TYPE}function G(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Z;case"esriFieldTypeInteger":case"integer":return U;case"esriFieldTypeSingle":case"single":return j;case"esriFieldTypeDouble":case"double":return q}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(A||(A={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(k||(k={}));const Z={min:-32768,max:32767,isInteger:!0},U={min:-2147483648,max:2147483647,isInteger:!0},j={min:-34e37,max:12e37,isInteger:!1},q={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function L(e,t,n){switch(e){case i.INVALID_CODED_VALUE:return`Value ${n} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case i.VALUE_OUT_OF_RANGE:return`Value ${n} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case k.INVALID_TYPE:return`Value ${n} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case A.OUT_OF_RANGE:{const{min:e,max:i}=G(t.type);return`Value ${n} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${i}`}}}},94479:(e,t,n)=>{n.d(t,{Z:()=>m});var i,a=n(29768),l=n(48027),r=n(76506),o=n(34250),s=n(91306),u=n(59465),c=n(17533),d=n(45702);n(54174),n(82426),n(29794),n(92143),n(31450),n(71552),n(40642),n(86656),n(22723),n(57251),n(60991),n(74673),n(21972),n(23639),n(91055),n(6906),n(50406);let f=i=class extends d.Z{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new i({fromColor:(0,r.d9)(this.fromColor),toColor:(0,r.d9)(this.toColor),algorithm:this.algorithm})}};(0,a._)([(0,u.e)({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],f.prototype,"algorithm",void 0),(0,a._)([(0,o.Cb)({type:l.Z,json:{type:[s.I],write:!0}})],f.prototype,"fromColor",void 0),(0,a._)([(0,o.Cb)({type:l.Z,json:{type:[s.I],write:!0}})],f.prototype,"toColor",void 0),(0,a._)([(0,o.Cb)({type:["algorithmic"]})],f.prototype,"type",void 0),f=i=(0,a._)([(0,c.j)("esri.rest.support.AlgorithmicColorRamp")],f);const m=f},45702:(e,t,n)=>{n.d(t,{Z:()=>s});var i=n(29768),a=n(74673),l=n(34250),r=(n(76506),n(91306),n(17533));n(21972),n(23639),n(92143),n(31450),n(71552),n(40642),n(86656),n(22723),n(91055),n(6906),n(50406),n(60991);let o=class extends a.a{constructor(e){super(e),this.type=null}};(0,i._)([(0,l.Cb)({readOnly:!0,json:{read:!1,write:!0}})],o.prototype,"type",void 0),o=(0,i._)([(0,r.j)("esri.rest.support.ColorRamp")],o);const s=o},51127:(e,t,n)=>{n.d(t,{Z:()=>d});var i,a=n(29768),l=n(76506),r=n(34250),o=(n(91306),n(17533)),s=n(94479),u=n(45702);n(92143),n(31450),n(71552),n(40642),n(86656),n(22723),n(60991),n(48027),n(54174),n(82426),n(29794),n(59465),n(57251),n(74673),n(21972),n(23639),n(91055),n(6906),n(50406);let c=i=class extends u.Z{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new i({colorRamps:(0,l.d9)(this.colorRamps)})}};(0,a._)([(0,r.Cb)({type:[s.Z],json:{write:!0}})],c.prototype,"colorRamps",void 0),(0,a._)([(0,r.Cb)({type:["multipart"]})],c.prototype,"type",void 0),c=i=(0,a._)([(0,o.j)("esri.rest.support.MultipartColorRamp")],c);const d=c}}]);