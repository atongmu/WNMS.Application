"use strict";(self.webpackChunkRemoteClient=self.webpackChunkRemoteClient||[]).push([[9884],{59884:(e,t,i)=>{i.r(t),i.d(t,{default:()=>U,inferFieldType:()=>k,inferFields:()=>P,inferLocationInfo:()=>M}),i(74569);var n=i(82058),s=i(60991),r=i(92143),a=i(56240),o=i(50406),l=i(32101),c=i(1623),u=i(77314),d=i(60947),h=i(35132),f=i(85674),p=i(56761),m=i(24251),g=i(50815),y=i(4571),_=i(1709),b=i(14249);i(91306),i(76506),i(21801),i(40642),i(71552),i(34250),i(86656),i(22723),i(31450),i(17533),i(73796),i(74673),i(21972),i(23639),i(91055),i(6906),i(97714),i(2906),i(91597),i(86787),i(89623),i(84069),i(44567),i(98380),i(92896),i(22781),i(57251),i(32422),i(88762),i(3482),i(82426),i(29794),i(53785),i(95587),i(65775),i(12381),i(73173),i(92482),i(92624),i(92847),i(76996),i(53326),i(40267),i(88994),i(98576),i(44722),i(71331),i(91700),i(95533),i(94751),i(30831),i(72274),i(5777),i(89219),i(71435),i(22572),i(66774),i(63683),i(94479),i(48027),i(54174),i(59465),i(45702),i(51127),i(30776),i(7176),i(60217),i(85056),i(82933),i(15324),i(39597),i(617),i(55585),i(6941);const v=/^\s*"([\S\s]*)"\s*$/,S=/""/g,F=[","," ",";","|","\t"];function*x(e,t,i){let n=0;for(;n<=e.length;){const s=e.indexOf(t,n),r=e.substring(n,s>-1?s:void 0);n+=r.length+t.length,i&&!r.trim()||(yield r)}}function w(e){const t=e.includes("\r\n")?"\r\n":"\n";return x(e,t,!0)}function I(e,t){return x(e,t,!1)}function*E(e,t,i,n=(()=>Object.create(null))){let s="",r="",a=0,o=n(),l=0;e:for(const c of e){const e=I(c,i);for(const c of e)if(s+=r+c,r="",a+=T(c),a%2==0){if(a>0){const e=v.exec(s);if(!e){o=n(),l=0,s="",a=0;continue e}o[t[l]]=e[1].replace(S,'"'),l++}else o[t[l]]=s,l++;s="",a=0}else r=i;0===a?(yield o,o=n(),l=0):r="\n"}}function T(e){let t=0,i=0;for(i=e.indexOf('"',i);i>=0;)t++,i=e.indexOf('"',i+1);return t}const N=(0,y.a)("esriGeometryPoint"),O=["csv"],A=[0,0];class C{constructor(e,t){this.x=e,this.y=t}}class U{constructor(){this._queryEngine=null,this._snapshotFeatures=async e=>{const t=await this._fetch(e);return this._createFeatures(t)}}destroy(){var e;null==(e=this._queryEngine)||e.destroy(),this._queryEngine=null}async load(e,t={}){var i;this.loadOptions=e;const[n]=await Promise.all([this._fetch(t.signal),this._checkProjection(null==e||null==(i=e.parsingOptions)?void 0:i.spatialReference)]),r=function(e,t){const i=t.parsingOptions||{},n={delimiter:i.delimiter,layerDefinition:null,locationInfo:{latitudeFieldName:i.latitudeField,longitudeFieldName:i.longitudeField}},r=w(e);let a=r.next().value;if(!a)throw new s.Z("csv-layer:empty-csv","CSV is empty",{csv:e});if(a=a.trim(),!i.delimiter){const e=function(e){const t=e.trim();let i=0,n="";for(const e of F){const s=t.split(e).length;s>i&&(i=s,n=e)}return""===n?null:n}(a);if(!e)throw new s.Z("csv-layer:invalid-delimiter","Unable to detect the delimiter from CSV");n.delimiter=e}const o=a.split(n.delimiter).filter((e=>!!e)),c=n.layerDefinition={name:(0,l.vt)(t.url,O)||"csv",drawingInfo:N,geometryType:"esriGeometryPoint",objectIdField:null,fields:[],timeInfo:i.timeInfo,extent:{xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:i.spatialReference||{wkid:102100}}};if(!i.latitudeField||!i.longitudeField){const e=M(o);if(!i.longitudeField&&!e.longitudeFieldName||!i.latitudeField&&!e.latitudeFieldName)throw new s.Z("csv-layer:location-fields-not-found","Unable to identify latitude and longitude fields from the CSV file");n.locationInfo={longitudeFieldName:i.longitudeField||e.longitudeFieldName,latitudeFieldName:i.latitudeField||e.latitudeFieldName}}const u=P(r,n.delimiter,o,n.locationInfo);if(i.fields&&i.fields.length){const e=new Map;for(const t of i.fields)e.set(t.name.toLowerCase(),t);for(const t of u){const i=e.get(t.name.toLowerCase());if(i){const e=t.name;Object.assign(t,i),t.name=e}}}if(c.fields=u,!c.fields.some((e=>"esriFieldTypeOID"===e.type&&(c.objectIdField=e.name,!0)))){const e={name:"__OBJECTID",alias:"__OBJECTID",type:"esriFieldTypeOID",editable:!1,nullable:!1};c.objectIdField=e.name,c.fields.unshift(e)}if(c.timeInfo){const e=new _.Z(c.fields),t=c.timeInfo;if(t.startTimeField){const i=e.get(t.startTimeField);i?(t.startTimeField=i.name,i.type="esriFieldTypeDate"):t.startTimeField=null}if(t.endTimeField){const i=e.get(t.endTimeField);i?(t.endTimeField=i.name,i.type="esriFieldTypeDate"):t.endTimeField=null}if(t.trackIdField){const i=e.get(t.trackIdField);t.trackIdField=i?i.name:null}t.startTimeField||t.endTimeField||(c.timeInfo=null)}return n}(n,e);this.locationInfo=r.locationInfo,this.delimiter=r.delimiter,this._queryEngine=this._createQueryEngine(r);const a=await this._createFeatures(n);if(this._queryEngine.featureStore.addMany(a),r.layerDefinition.extent=this._queryEngine.fullExtent,r.layerDefinition.timeInfo){const{start:e,end:t}=this._queryEngine.timeExtent;r.layerDefinition.timeInfo.timeExtent=[e,t]}return r}async applyEdits(){throw new s.Z("csv-layer:editing-not-supported","applyEdits() is not supported on CSVLayer")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(e,t.signal)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(e,t.signal)}async refresh(e){var t;return this.loadOptions.customParameters=e,null==(t=this._snapshotTask)||t.abort(),this._snapshotTask=(0,o.vr)(this._snapshotFeatures),this._snapshotTask.promise.then((e=>{this._queryEngine.featureStore.clear(),e&&this._queryEngine.featureStore.addMany(e)}),(e=>{this._queryEngine.featureStore.clear(),(0,o.D_)(e)||r.L.getLogger("esri.layers.CSVLayer").error(new s.Z("csv-layer:refresh","An error occurred during refresh",{error:e}))})),await this._waitSnapshotComplete(),{extent:this._queryEngine.fullExtent,timeExtent:this._queryEngine.timeExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _fetch(e){const{url:t,customParameters:i}=this.loadOptions;if(!t)throw new s.Z("csv-layer:invalid-source","url not defined");const r=(0,l.mN)(t);return(await(0,n.default)(r.path,{query:{...r.query,...i},responseType:"text",signal:e})).data}_createQueryEngine(e){const{objectIdField:t,fields:i,extent:n,timeInfo:s}=e.layerDefinition,r=new p.F({geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1});return new g.Q({fields:i,geometryType:"esriGeometryPoint",hasM:!1,hasZ:!1,timeInfo:s,objectIdField:t,spatialReference:n.spatialReference||{wkid:4326},cacheSpatialQueries:!0,featureStore:r})}async _createFeatures(e){const{latitudeFieldName:t,longitudeFieldName:i}=this.locationInfo,{objectIdField:n,fieldsIndex:s,spatialReference:r}=this._queryEngine;let a=[];const o=[],l=s.fields.filter((e=>e.name!==n)).map((e=>e.name));let p=0;const m=w(e);m.next();const g={};for(const e of s.fields)if("esriFieldTypeOID"!==e.type&&"esriFieldTypeGlobalID"!==e.type){const t=(0,b.os)(e);void 0!==t&&(g[e.name]=t)}const _=E(m,l,this.delimiter,(0,y.b)(g,n));for(const e of _){const r=this._parseCoordinateValue(e[t]),l=this._parseCoordinateValue(e[i]);if(null!=l&&null!=r&&!isNaN(r)&&!isNaN(l)){e[t]=r,e[i]=l;for(const n in e)if(n!==t&&n!==i)if(s.isDateField(n)){const t=new Date(e[n]);e[n]=L(t,e[n])?t.getTime():null}else if(s.isNumericField(n)){const t=R(e[n]);isNaN(t)?e[n]=null:e[n]=t}e[n]=p,p++,a.push(new C(l,r)),o.push(e)}}if(!(0,d.e)({wkid:4326},r))if((0,d.i)(r))for(const e of a)[e.x,e.y]=(0,h.hG)(e.x,e.y,A);else a=(0,c.oj)(u.j,a,d.Z.WGS84,r,null);const v=[];for(let e=0;e<a.length;e++){const{x:t,y:i}=a[e],s=o[e];s[n]=e+1,v.push(new f.a(new f.O([],[t,i]),s,null,s[n]))}return v}_parseCoordinateValue(e){if(null==e||""===e)return null;let t=R(e);return(isNaN(t)||Math.abs(t)>181)&&(t=parseFloat(e)),t}async _checkProjection(e){try{await(0,m.c)(d.W,e)}catch{throw new s.Z("csv-layer:projection-not-supported","Projection not supported")}}}const q=["lat","latitude","latitude83","latdecdeg","lat_dd","y","ycenter","point-y"],G=["lon","lng","long","longitude","longitude83","longdecdeg","long_dd","x","xcenter","point-x"];function M(e){const t=e.map((e=>e.toLowerCase()));return{longitudeFieldName:e[t.indexOf(G.find((e=>t.includes(e))))],latitudeFieldName:e[t.indexOf(q.find((e=>t.includes(e))))]}}function P(e,t,i,n){const s=[],r=E(e,i,t),a=[];for(const e of r){if(10===a.length)break;a.push(e)}for(const e of i)if(e===n.longitudeFieldName||e===n.latitudeFieldName)s.push({name:e,type:"esriFieldTypeDouble",alias:e});else{const t=k(a.map((t=>t[e]))),i={name:e,type:null,alias:e};switch(t){case"integer":i.type="esriFieldTypeInteger";break;case"double":i.type="esriFieldTypeDouble";break;case"date":i.type="esriFieldTypeDate",i.length=36;break;default:i.type="esriFieldTypeString",i.length=255}s.push(i)}return s}function k(e){if(!e.length)return"string";const t=/[^+-.,0-9]/;return e.map((e=>{let i=!1;if(""!==e){if(t.test(e))i=!0;else{let t=R(e);if(!isNaN(t))return/[.,]/.test(e)||!Number.isInteger(t)||t>214783647||t<-214783648?"double":"integer";if(-1===e.indexOf("E"))i=!0;else{if(t=Number(e),!isNaN(t))return"double";if(-1===e.indexOf(","))i=!0;else{if(e=e.replace(",","."),t=Number(e),!isNaN(t))return"double";i=!0}}}return i?/^[-]?\d*[.,]?\d*$/.test(e)?"string":L(new Date(e),e)?"date":"string":"string"}})).reduce(((e,t)=>void 0===e||e===t?t:"string"===e||"string"===t?"string":"double"===e||"double"===t?"double":void 0))}const D=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i,B=Number.isNaN(new Date("technology 10").getTime());function L(e,t){if(!e||"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))return!1;let i=!0;if(!B&&/\d+\W*$/.test(t)){const e=t.match(/[a-zA-Z]{2,}/);if(e){let t=!1,n=0;for(;!t&&n<=e.length;)t=!D.test(e[n]),n++;i=!t}}return i}const R=function(){const e=(0,a._)(),t=new RegExp("^"+e.regexp+"$"),i=new RegExp("["+e.group+"\\s\\xa0]","g"),n=e.factor;return function(s){const r=t.exec(s);if(e.factor=n,!r)return NaN;let a=r[1];if(!r[1]){if(!r[2])return NaN;a=r[2],e.factor*=-1}return a=a.replace(i,"").replace(e.decimal,"."),+a*e.factor}}()},92482:(e,t,i)=>{i.d(t,{N:()=>h,a:()=>r,b:()=>d,f:()=>o,k:()=>u,l:()=>a,t:()=>l,y:()=>c});var n=i(76506),s=(i(82426),i(21801));function r(e=f){return[e[0],e[1],e[2],e[3]]}function a(e,t,i,n,s=r()){return s[0]=e,s[1]=t,s[2]=i,s[3]=n,s}function o(e,t=r()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function l(e,t){return new s.Z({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function c(e){return t=e,((0,n.b)(t)||t[0]>=t[2]?0:t[2]-t[0])*function(e){return e[1]>=e[3]?0:e[3]-e[1]}(e);var t}function u(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function d(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const h=[1/0,1/0,-1/0,-1/0],f=[0,0,0,0]},60217:(e,t,i)=>{i.d(t,{A:()=>u,a:()=>l,b:()=>o,c:()=>c,l:()=>a}),i(74569);var n=i(76506),s=i(60947);let r;function a(){return r||(r=(async()=>{const e=await i.e(1886).then(i.bind(i,1886)).then((e=>e.R));return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),r}const o=(e,t,i)=>u.create(e,t,i,null,["$feature"]),l=(e,t,i)=>u.create(e,t,i,null,["$feature","$view"]),c=(e,t,i,n)=>u.create(e,t,i,n,["$feature","$view"]);class u{constructor(e,t,i,n,s,r,a,o){this.script=e,this.evaluate=s;const l=Array.isArray(a)?a:a.fields;this.fields=l,this._syntaxTree=n,this._arcade=t,this._arcadeDictionary=i,this._arcadeFeature=r,this._spatialReference=o,this._referencesGeometry=t.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(e,t,i,r,o,l){const{arcade:c,Feature:d,Dictionary:h}=await a(),f=s.Z.fromJSON(t),p=c.parseScript(e,l),m=o.reduce(((e,t)=>({...e,[t]:null})),{});let g=null;(0,n.i)(r)&&(g=new h(r),g.immutable=!0,m.$config=null);const y=c.scriptUsesGeometryEngine(p)&&c.enableGeometrySupport(),_=c.scriptUsesFeatureSet(p)&&c.enableFeatureSetSupport(),b=c.scriptIsAsync(p)&&c.enableAsyncSupport(),v={vars:m,spatialReference:f,useAsync:!!b},S=new h;S.immutable=!1,S.setField("scale",0);const F=c.compileScript(p,v);return await Promise.all([y,_,b]),new u(e,c,h,p,(e=>("$view"in e&&e.$view&&(S.setField("scale",e.$view.scale),e.$view=S),g&&(e.$config=g),F({vars:e,spatialReference:f}))),new d,i,f)}repurposeFeature(e){return e.geometry&&!e.geometry.spatialReference&&(e.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(e.geometry,e.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(e){return this._arcadeFeature.repurposeFromAdapter(e,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(e){return this._arcade.referencesMember(this._syntaxTree,e)}referencesFunction(e){return this._arcade.referencesFunction(this._syntaxTree,e)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}},4571:(e,t,i)=>{i.d(t,{a:()=>a,b:()=>o,c:()=>c,d:()=>l});var n=i(76506),s=i(89219),r=i(6941);function a(e){return{renderer:{type:"simple",symbol:"esriGeometryPoint"===e||"esriGeometryMultipoint"===e?r.d:"esriGeometryPolyline"===e?r.a:r.b}}}function o(e,t){if((0,n.h)("esri-csp-restrictions"))return()=>({[t]:null,...e});try{let i=`this.${t} = null;`;for(const t in e)i+=`this${t.includes(".")?`["${t}"]`:`.${t}`} = ${JSON.stringify(e[t])};`;const n=new Function(i);return()=>new n}catch(i){return()=>({[t]:null,...e})}}function l(e={}){return[{name:"New Feature",description:"",prototype:{attributes:(0,n.d9)(e)}}]}function c(e,t){return{attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:e},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:t,supportsDelete:t,supportsEditing:t,supportsChangeTracking:!1,supportsQuery:!0,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:t,supportsExceedsLimitStatistics:!0},query:s.q,queryRelated:{supportsCount:!0,supportsOrderBy:!0,supportsPagination:!0},editing:{supportsGeometryUpdate:t,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateWithoutM:!1,supportsUploadWithItemId:!1,supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1}}}},29794:(e,t,i)=>{i.d(t,{E:()=>n,R:()=>s});const n=1e-6,s=Math.random;Math.PI,Math.PI},6941:(e,t,i)=>{i.d(t,{a:()=>r,b:()=>a,c:()=>o,d:()=>s,e:()=>l,f:()=>c,g:()=>u});const n=[252,146,31,255],s={type:"esriSMS",style:"esriSMSCircle",size:6,color:n,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},r={type:"esriSLS",style:"esriSLSSolid",width:.75,color:n},a={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},o={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},l={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},c={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},u={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}},3482:(e,t,i)=>{var n,s,r;let a;i.d(t,{b:()=>f,g:()=>c,o:()=>d});const o=null!=(n=null==(s=globalThis.esriConfig)?void 0:s.locale)?n:null==(r=globalThis.dojoConfig)?void 0:r.locale;function l(){var e,t;return null!=(e=null!=o?o:null==(t=globalThis.navigator)?void 0:t.language)?e:"en"}function c(){return void 0===a&&(a=l()),a}const u=[];function d(e){return u.push(e),{remove(){u.splice(u.indexOf(e),1)}}}const h=[];function f(e){return h.push(e),{remove(){u.splice(h.indexOf(e),1)}}}null==globalThis.addEventListener||globalThis.addEventListener("languagechange",(function(){const e=null!=undefined?undefined:l();a!==e&&(a=e,[...h].forEach((t=>{t.call(null,e)})),[...u].forEach((t=>{t.call(null,e)})))}))},56240:(e,t,i)=>{i.d(t,{_:()=>c,f:()=>o,p:()=>u});var n=i(40642),s=i(3482);const r={ar:[".",","],bg:[","," "],bs:[",","."],ca:[",","."],cs:[","," "],da:[",","."],de:[",","."],"de-ch":[".","’"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[","," "],fi:[","," "],fr:[","," "],"fr-ch":[","," "],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[","," "],id:[",","."],it:[",","."],"it-ch":[".","’"],ja:[".",","],ko:[".",","],lt:[","," "],lv:[","," "],mk:[",","."],nb:[","," "],nl:[",","."],pl:[","," "],pt:[",","."],"pt-pt":[","," "],ro:[",","."],ru:[","," "],sk:[","," "],sl:[",","."],sr:[",","."],sv:[","," "],th:[".",","],tr:[",","."],uk:[","," "],vi:[",","."],zh:[".",","]};function a(e){e||(e=(0,s.g)());let t=e in r;if(!t){const i=e.split("-");i.length>1&&i[0]in r&&(e=i[0],t=!0),t||(e="en")}const[i,n,a="#,##0.###"]=r[e];return{decimal:i,group:n,pattern:a}}function o(e,t){const i=a((t={...t}).locale);t.customs=i;const n=t.pattern||i.pattern;return isNaN(e)||Math.abs(e)===1/0?null:function(e,t,i){const n=(i=i||{}).customs.group,s=i.customs.decimal,r=t.split(";"),a=r[0];if(-1!==(t=r[e<0?1:0]||"-"+a).indexOf("%"))e*=100;else if(-1!==t.indexOf("‰"))e*=1e3;else{if(-1!==t.indexOf("¤"))throw new Error("currency notation not supported");if(-1!==t.indexOf("E"))throw new Error("exponential notation not supported")}const o=l,c=a.match(o);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(o,function(e,t,i){!0===(i=i||{}).places&&(i.places=0),i.places===1/0&&(i.places=6);const n=t.split("."),s="string"==typeof i.places&&i.places.indexOf(",");let r=i.places;s?r=i.places.substring(s+1):r>=0||(r=(n[1]||[]).length),i.round<0||(e=Number(e.toFixed(Number(r))));const a=String(Math.abs(e)).split("."),o=a[1]||"";if(n[1]||i.places){s&&(i.places=i.places.substring(0,s));const e=void 0!==i.places?i.places:n[1]&&n[1].lastIndexOf("0")+1;e>o.length&&(a[1]=o.padEnd(Number(e),"0")),r<o.length&&(a[1]=o.substr(0,Number(r)))}else a[1]&&a.pop();const l=n[0].replace(",","");let c=l.indexOf("0");-1!==c&&(c=l.length-c,c>a[0].length&&(a[0]=a[0].padStart(c,"0")),-1===l.indexOf("#")&&(a[0]=a[0].substr(a[0].length-c)));let u,d,h=n[0].lastIndexOf(",");if(-1!==h){u=n[0].length-h-1;const e=n[0].substr(0,h);h=e.lastIndexOf(","),-1!==h&&(d=e.length-h-1)}const f=[];for(let e=a[0];e;){const t=e.length-u;f.push(t>0?e.substr(t):e),e=t>0?e.slice(0,t):"",d&&(u=d,d=void 0)}return a[0]=f.reverse().join(i.group||","),a.join(i.decimal||".")}(e,c[0],{decimal:s,group:n,places:i.places,round:i.round}))}(e,n,t)}const l=/[#0,]*[#0](?:\.0*#*)?/;function c(e){const t=a((e=e||{}).locale),i=e.pattern||t.pattern,s=t.group,r=t.decimal;let o=1;if(-1!==i.indexOf("%"))o/=100;else if(-1!==i.indexOf("‰"))o/=1e3;else if(-1!==i.indexOf("¤"))throw new Error("currency notation not supported");const c=i.split(";");1===c.length&&c.push("-"+c[0]);const u=h(c,(function(t){return(t="(?:"+(0,n.e)(t,".")+")").replace(l,(function(t){const i={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:r,exponent:!1},n=t.split(".");let a=e.places;1===n.length&&1!==o&&(n[1]="###"),1===n.length||0===a?i.fractional=!1:(void 0===a&&(a=e.pattern?n[1].lastIndexOf("0")+1:1/0),a&&null==e.fractional&&(i.fractional=!0),!e.places&&a<n[1].length&&(a+=","+n[1].length),i.places=a);const l=n[0].split(",");return l.length>1&&(i.groupSize=l.pop().length,l.length>1&&(i.groupSize2=l.pop().length)),"("+function(e){"places"in(e=e||{})||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=d(e),i=h(e.fractional,(function(t){let i="";return t&&0!==e.places&&(i="\\"+e.decimal,e.places===1/0?i="(?:"+i+"\\d+)?":i+="\\d{"+e.places+"}"),i}),!0),n=h(e.exponent,(function(t){return t?"([eE]"+d({signed:e.eSigned})+")":""}));let s=t+i;return i&&(s="(?:(?:"+s+")|(?:"+i+"))"),s+n}(i)+")"}))}),!0);return{regexp:u.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:r,factor:o}}function u(e,t){const i=c(t),n=new RegExp("^"+i.regexp+"$").exec(e);if(!n)return NaN;let s=n[1];if(!n[1]){if(!n[2])return NaN;s=n[2],i.factor*=-1}return s=s.replace(new RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),Number(s)*i.factor}function d(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",h(e.signed,(function(e){return e?"[-+]":""}),!0)+h(e.separator,(function(t){if(!t)return"(?:\\d+)";" "===(t=(0,n.e)(t))?t="\\s":" "===t&&(t="\\s\\xa0");const i=e.groupSize,s=e.groupSize2;if(s){const e="(?:0|[1-9]\\d{0,"+(s-1)+"}(?:["+t+"]\\d{"+s+"})*["+t+"]\\d{"+i+"})";return i-s>0?"(?:"+e+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":e}return"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"}),!0)}const h=function(e,t,i){if(!(e instanceof Array))return t(e);const n=[];for(let i=0;i<e.length;i++)n.push(t(e[i]));return f(n.join("|"),i)},f=function(e,t){return"("+(t?"?:":"")+e+")"}},95587:(e,t,i)=>{i.d(t,{S:()=>a,W:()=>c,a:()=>d,b:()=>u,c:()=>o,d:()=>l,e:()=>f,g:()=>h});var n=i(60947),s=i(89623);function r(e){return new n.Z({wkt:`GEOCCS["Spherical geocentric",\n    DATUM["Not specified",\n      SPHEROID["Sphere",${e.radius},0]],\n    PRIMEM["Greenwich",0.0,\n      AUTHORITY["EPSG","8901"]],\n    UNIT["m",1.0],\n    AXIS["Geocentric X",OTHER],\n    AXIS["Geocentric Y",EAST],\n    AXIS["Geocentric Z",NORTH]\n  ]`})}const a=r(s.e),o=r(s.m),l=r(s.a),c=new n.Z({wkt:`GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",${s.e.radius},298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]`});function u(e){return e&&e===s.m?o:e&&e===s.a?l:a}function d(e){return e&&((0,n.f)(e)||e===o)?o:e&&((0,n.h)(e)||e===l)?l:a}function h(e){return e&&((0,n.f)(e)||e===o)?s.m:e&&((0,n.h)(e)||e===l)?s.a:s.e}function f(e){return(0,n.c)(e)?s.m:(0,n.d)(e)?s.a:s.e}},3530:(e,t,i)=>{function n(e){return(t,i)=>{t[i]=e}}i.d(t,{s:()=>n})},22781:(e,t,i)=>{i.d(t,{f:()=>s,t:()=>r});var n=i(57251);const s=(0,n.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),r=(0,n.s)()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"})},53785:(e,t,i)=>{i.d(t,{a:()=>T,b:()=>w,c:()=>S,d:()=>E,e:()=>M,f:()=>P,g:()=>I,i:()=>l,l:()=>F,u:()=>x,w:()=>A});var n=i(76506),s=i(57251),r=i(95587),a=i(60947),o=i(89623);const l=39.37,c=o.e.radius*Math.PI/200,u=/UNIT\[([^\]]+)\]\]$/i,d=a.o,h=/UNIT\[([^\]]+)\]/i,f=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),p=(0,s.s)()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),m=e=>e*e,g=e=>e*e*e,y={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:m(.001)},"square-centimeters":{inBaseUnits:m(.01)},"square-decimeters":{inBaseUnits:m(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:m(1e3)},"square-inches":{inBaseUnits:m(.0254)},"square-feet":{inBaseUnits:m(.3048)},"square-yards":{inBaseUnits:m(.9144)},"square-miles":{inBaseUnits:m(1609.344)},"square-us-feet":{inBaseUnits:m(1200/3937)},acres:{inBaseUnits:.0015625*m(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*g(.001)},"cubic-centimeters":{inBaseUnits:1e3*g(.01)},"cubic-decimeters":{inBaseUnits:1e3*g(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*g(1e3)},"cubic-inches":{inBaseUnits:1e3*g(.0254)},"cubic-feet":{inBaseUnits:1e3*g(.3048)},"cubic-yards":{inBaseUnits:1e3*g(.9144)},"cubic-miles":{inBaseUnits:1e3*g(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},_=function(){const e={};for(const t in y)for(const i in y[t].units)e[i]=t;return e}();function b(e){const t=_[e];if(t)return t;throw new Error("unknown measure")}function v(e,t=null){return t=t||b(e),y[t].baseUnit===e}function S(e,t,i){if(t===i)return e;const n=b(t);if(n!==b(i))throw new Error("incompatible units");const s=v(t,n)?e:function(e,t,i){return e*y[i].units[t].inBaseUnits}(e,t,n);return v(i,n)?s:function(e,t,i){return e/y[i].units[t].inBaseUnits}(s,i,n)}function F(e,t,i){return S(e,t,"meters")/(i*Math.PI/180)}function x(e){return p.fromJSON(e.toLowerCase())||null}function w(e){if(e&&"object"==typeof e&&!(0,a.b)(e))return 1;const t=E(e);return t>1e5?1:t}function I(e){return E(e)>=(e instanceof a.Z?(0,r.g)(e).metersPerDegree:1e5)?"meters":A(e)}function E(e,t=o.e.metersPerDegree){return T(e,!0)||t}function T(e,t=!1){let i,n,s=null;if(null!=e&&("object"==typeof e?(i=e.wkid,n=e.wkt):"number"==typeof e?i=e:"string"==typeof e&&(n=e)),i){if((0,a.c)(i))return o.m.metersPerDegree;if((0,a.d)(i))return o.a.metersPerDegree;s=d.values[d[i]],!s&&t&&f.has(i)&&(s=c)}else n&&(U(n)?s=N(u.exec(n),s):C(n)&&(s=N(h.exec(n),s)));return s}function N(e,t){return e&&e[1]?O(e[1]):t}function O(e){return parseFloat(e.split(",")[1])}function A(e){let t,i,s=null;if(null!=e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t)s=d.units[d[t]];else if(i){const e=U(i)?u:C(i)?h:null;if(e){const t=e.exec(i);t&&t[1]&&(s=function(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let i=t&&t[1];if(!i||-1===d.units.indexOf(i)){const t=O(e);i=null;const n=d.values;for(let e=0;e<n.length;++e)if(Math.abs(t-n[e])<1e-7){i=d.units[e];break}}return i}(t[1]))}}return(0,n.i)(s)?x(s):null}function C(e){return/^GEOCCS/i.test(e)}function U(e){return/^PROJCS/i.test(e)}const q={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},G={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},M=(0,s.s)()(q),P=(0,s.s)()(G);(0,s.s)()({...q,...G})},15324:(e,t,i)=>{i.d(t,{Z:()=>T});var n,s=i(29768),r=i(91055),a=i(76996),o=i(76506),l=i(6906),c=i(34250),u=i(91306),d=i(3530),h=i(17533),f=i(21972);i(22723),i(50406),i(60991),i(92143),i(31450),i(71552),i(40642),i(86656),i(23639);class p{constructor(){this._observers=[]}observe(e){return this._observers.includes(e)||this._observers.push(e),new f.O(this._observers,e)}notify(){const e=this._observers.slice();for(let t=0;t<e.length;++t){const i=e[t];i.onInvalidated(),i.onCommitted()}}}const m=new r.O(class{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(e){this.defaultPrevented=!1,this.item=e}},void 0,(e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1})),g=()=>{};function y(e){return e?e instanceof E?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function _(e){if(e&&e.length)return e[0]}function b(e,t,i,n){const s=Math.min(e.length-i,t.length-n);let r=0;for(;r<s&&e[i+r]===t[n+r];)r++;return r}function v(e,t,i,n){t&&t.forEach(((t,s,r)=>{e.push(t),v(e,i.call(n,t,s,r),i,n)}))}const S=new Set,F=new Set,x=new Set,w=new Map;let I=0,E=n=class extends a.E.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new p,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:I++})}static isCollection(e){return null!=e&&e instanceof n}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof n?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return(0,h.t)(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,y(e)),this._emitAfterChanges(1))}hasEventListener(e){return"change"===e?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if("change"===e){const e=this._chgListeners,i={removed:!1,callback:t};return e.push(i),this._notifications&&this._notifications.push({listeners:e.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=g,i.removed=!0,e.splice(e.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){const i=this.on(e,t);return{remove(){i.remove()}}}add(e,t){if((0,h.t)(this._observable),this._emitBeforeChanges(1))return this;const i=this.getNextIndex(null!=t?t:null);return this._splice(i,0,[e]),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if((0,h.t)(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const i=this.getNextIndex(t);return this._splice(i,0,y(e)),this._emitAfterChanges(1),this}removeAll(){if((0,h.t)(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return(0,h.t)(this._observable),this._createNewInstance({items:this._items.map(o.d9)})}concat(...e){(0,h.t)(this._observable);const t=e.map(y);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if((0,h.t)(this._observable),!this.length||this._emitBeforeChanges(2))return;const i=(0,o.a)(this._splice(0,this.length)),n=i.length;for(let s=0;s<n;s++)e.call(t,i[s],s,i);this._emitAfterChanges(2)}every(e,t){return(0,h.t)(this._observable),this._items.every(e,t)}filter(e,t){let i;return(0,h.t)(this._observable),i=2===arguments.length?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:i})}find(e,t){return(0,h.t)(this._observable),this._items.find(e,t)}findIndex(e,t){return(0,h.t)(this._observable),this._items.findIndex(e,t)}flatten(e,t){(0,h.t)(this._observable);const i=[];return v(i,this,e,t),new n(i)}forEach(e,t){return(0,h.t)(this._observable),this._items.forEach(e,t)}getItemAt(e){return(0,h.t)(this._observable),this._items[e]}getNextIndex(e){(0,h.t)(this._observable);const t=this.length;return(e=null==e?t:e)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return(0,h.t)(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return(0,h.t)(this._observable),this._items.indexOf(e,t)}join(e=","){return(0,h.t)(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return(0,h.t)(this._observable),this._items.lastIndexOf(e,t)}map(e,t){(0,h.t)(this._observable);const i=this._items.map(e,t);return new n({items:i})}reorder(e,t=this.length-1){(0,h.t)(this._observable);const i=this.indexOf(e);if(-1!==i){if(t<0?t=0:t>=this.length&&(t=this.length-1),i!==t){if(this._emitBeforeChanges(4))return e;this._splice(i,1),this._splice(t,0,[e]),this._emitAfterChanges(4)}return e}}pop(){if((0,h.t)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=_(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return(0,h.t)(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,e),this._emitAfterChanges(1)),this.length}reduce(e,t){(0,h.t)(this._observable);const i=this._items;return 2===arguments.length?i.reduce(e,t):i.reduce(e)}reduceRight(e,t){(0,h.t)(this._observable);const i=this._items;return 2===arguments.length?i.reduceRight(e,t):i.reduceRight(e)}remove(e){return(0,h.t)(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if((0,h.t)(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=_(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if((0,h.t)(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof n?e.toArray():e,i=this._items,s=[],r=t.length;for(let e=0;e<r;e++){const n=t[e],r=i.indexOf(n);if(r>-1){const n=1+b(t,i,e+1,r+1),a=this._splice(r,n);a&&a.length>0&&s.push.apply(s,a),e+=n-1}}return this._emitAfterChanges(2),s}reverse(){if((0,h.t)(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(4),this}shift(){if((0,h.t)(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=_(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return(0,h.t)(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return(0,h.t)(this._observable),this._items.some(e,t)}sort(e){if((0,h.t)(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=(0,o.a)(this._splice(0,this.length));return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(4),this}splice(e,t,...i){(0,h.t)(this._observable);const n=(t?2:0)|(i.length?1:0);if(this._emitBeforeChanges(n))return[];const s=this._splice(e,t,i)||[];return this._emitAfterChanges(n),s}toArray(){return(0,h.t)(this._observable),this._items.slice()}toJSON(){return(0,h.t)(this._observable),this.toArray()}toLocaleString(){return(0,h.t)(this._observable),this._items.toLocaleString()}toString(){return(0,h.t)(this._observable),this._items.toString()}unshift(...e){return(0,h.t)(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,i){const n=this._items,s=this.itemType;let r,a;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=(0,l.Os)((()=>this._dispatchChange()))),t){if(a=n.splice(e,t),this.hasEventListener("before-remove")){const t=m.acquire();t.target=this,t.cancellable=!0;for(let i=0,s=a.length;i<s;i++)r=a[i],t.reset(r),this.emit("before-remove",t),t.defaultPrevented&&(a.splice(i,1),n.splice(e,0,r),e+=1,i-=1,s-=1);m.release(t)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const e=m.acquire();e.target=this,e.cancellable=!1;const t=a.length;for(let i=0;i<t;i++)e.reset(a[i]),this.emit("after-remove",e);m.release(e)}}if(i&&i.length){if(s){const e=[];for(const t of i){const i=s.ensureType(t);null==i&&null!=t||e.push(i)}i=e}const t=this.hasEventListener("before-add"),r=this.hasEventListener("after-add"),a=e===this.length;if(t||r){const s=m.acquire();s.target=this,s.cancellable=!0;const o=m.acquire();o.target=this,o.cancellable=!1;for(const l of i)t?(s.reset(l),this.emit("before-add",s),s.defaultPrevented||(a?n.push(l):n.splice(e++,0,l),this._set("length",n.length),r&&(o.reset(l),this.emit("after-add",o)))):(a?n.push(l):n.splice(e++,0,l),this._set("length",n.length),o.reset(l),this.emit("after-add",o));m.release(o),m.release(s)}else{if(a)for(const e of i)n.push(e);else n.splice(e,0,...i);this._set("length",n.length)}}return(i&&i.length||a&&a.length)&&this._notifyChangeEvent(i,a),a}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const i=m.acquire();i.target=this,i.cancellable=!0,i.type=e,this.emit("before-changes",i),t=i.defaultPrevented,m.release(i)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=m.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),m.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const e=t.changes;S.clear(),F.clear(),x.clear();for(const{added:t,removed:i}of e){if(t)if(0===x.size&&0===F.size)for(const e of t)S.add(e);else for(const e of t)F.has(e)?(x.add(e),F.delete(e)):x.has(e)||S.add(e);if(i)if(0===x.size&&0===S.size)for(const e of i)F.add(e);else for(const e of i)S.has(e)?S.delete(e):(x.delete(e),F.add(e))}const i=r.A.acquire();S.forEach((e=>{i.push(e)}));const n=r.A.acquire();F.forEach((e=>{n.push(e)}));const s=this._items,a=t.items,o=r.A.acquire();if(x.forEach((e=>{a.indexOf(e)!==s.indexOf(e)&&o.push(e)})),t.listeners&&(i.length||n.length||o.length)){const e={target:this,added:i,removed:n,moved:o},s=t.listeners.length;for(let i=0;i<s;i++){const n=t.listeners[i];n.removed||n.callback.call(this,e)}}r.A.release(i),r.A.release(n),r.A.release(o)}S.clear(),F.clear(),x.clear()}};E.ofType=e=>{if(!e)return n;if(w.has(e))return w.get(e);let t=null;if("function"==typeof e)t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let i=class extends n{};return(0,s._)([(0,d.s)({Type:e,ensureType:"function"==typeof e?(0,u.e)(e):(0,u.a)(e)})],i.prototype,"itemType",void 0),i=(0,s._)([(0,h.j)(`esri.core.Collection<${t}>`)],i),w.set(e,i),i},(0,s._)([(0,c.Cb)()],E.prototype,"length",void 0),(0,s._)([(0,c.Cb)()],E.prototype,"items",null),E=n=(0,s._)([(0,h.j)("esri.core.Collection")],E);const T=E},74569:(e,t,i)=>{i.d(t,{qM:()=>u});var n=i(91306),s=i(21801),r=i(73796),a=i(84069),o=i(91597),l=i(44567),c=i(92896);i(60947),i(22781),i(32422),i(76506),i(92143),i(31450),i(71552),i(40642),i(34250),i(86656),i(22723),i(17533),i(60991),i(35132),i(89623),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(2906),i(97714),i(86787),i(98380),i(57251);const u={base:r.Z,key:"type",typeMap:{extent:s.Z,multipoint:a.Z,point:o.Z,polyline:c.Z,polygon:l.Z}};(0,n.a)(u)},32422:(e,t,i)=>{i.d(t,{im:()=>m,q9:()=>_,Ji:()=>g,YX:()=>u,aW:()=>d,wp:()=>h,oU:()=>p,l9:()=>f});var n=i(76506),s=i(21801),r=i(73796),a=i(84069),o=i(91597),l=i(44567),c=i(92896);function u(e){return void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax}function d(e){return void 0!==e.points}function h(e){return void 0!==e.x&&void 0!==e.y}function f(e){return void 0!==e.paths}function p(e){return void 0!==e.rings}function m(e){return(0,n.b)(e)?null:e instanceof r.Z?e:h(e)?o.Z.fromJSON(e):f(e)?c.Z.fromJSON(e):p(e)?l.Z.fromJSON(e):d(e)?a.Z.fromJSON(e):u(e)?s.Z.fromJSON(e):null}function g(e){return e?h(e)?"esriGeometryPoint":f(e)?"esriGeometryPolyline":p(e)?"esriGeometryPolygon":u(e)?"esriGeometryEnvelope":d(e)?"esriGeometryMultipoint":null:null}i(40642),i(71552),i(34250),i(92143),i(31450),i(91306),i(86656),i(22723),i(17533),i(60991),i(60947),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(2906),i(35132),i(89623),i(97714),i(86787),i(98380);const y={esriGeometryPoint:o.Z,esriGeometryPolyline:c.Z,esriGeometryPolygon:l.Z,esriGeometryEnvelope:s.Z,esriGeometryMultipoint:a.Z};function _(e){return e&&y[e]||null}},1709:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(14249);function s(e){return"oid"===e.type||"esriFieldTypeOID"===e.type}function r(e){return"global-id"===e.type||"esriFieldTypeGlobalID"===e.type}i(60991),i(76506),i(92143),i(31450),i(71552),i(40642),i(60217),i(74569),i(91306),i(21801),i(34250),i(86656),i(22723),i(17533),i(73796),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(97714),i(60947),i(2906),i(91597),i(86787),i(35132),i(89623),i(84069),i(44567),i(98380),i(92896),i(22781),i(57251),i(32422);class a{constructor(e){if(this.fields=e,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!e)return;const t=[];for(const a of e){const e=a&&a.name;if(e){const l=o(e);this._fieldsMap.set(e,a),this._fieldsMap.set(l,a),t.push(l),"date"===(i=a).type||"esriFieldTypeDate"===i.type?(this.dateFields.push(a),this._dateFieldsSet.add(a)):(0,n.H7)(a)&&(this._numericFieldsSet.add(a),this.numericFields.push(a)),s(a)||r(a)||(a.editable=null==a.editable||!!a.editable,a.nullable=null==a.nullable||!!a.nullable)}}var i;t.sort(),this.uid=t.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const e of this.fields)s(e)||r(e)||e.nullable||void 0!==(0,n.os)(e)||this._requiredFields.push(e)}return this._requiredFields}has(e){return null!=this.get(e)}get(e){return null!=e?this._fieldsMap.get(e)||this._fieldsMap.get(o(e)):void 0}isDateField(e){return this._dateFieldsSet.has(this.get(e))}isNumericField(e){return this._numericFieldsSet.has(this.get(e))}normalizeFieldName(e){const t=this.get(e);if(t)return t.name}}function o(e){return e.toLowerCase().trim()}},14249:(e,t,i)=>{i.d(t,{io:()=>y,AB:()=>g,gd:()=>m,Mu:()=>v,Q0:()=>p,YN:()=>u,UF:()=>h,O5:()=>_,os:()=>S,H7:()=>U,qN:()=>q,v5:()=>A,Pz:()=>P,Qc:()=>k,vP:()=>V});var n,s,r=i(60991),a=(i(76506),i(71552)),o=i(60217);i(92143),i(31450),i(40642),i(74569),i(91306),i(21801),i(34250),i(86656),i(22723),i(17533),i(73796),i(74673),i(21972),i(23639),i(91055),i(6906),i(50406),i(97714),i(60947),i(2906),i(91597),i(86787),i(35132),i(89623),i(84069),i(44567),i(98380),i(92896),i(22781),i(57251),i(32422),(s=n||(n={})).VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",s.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value";const l=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],c=["field","normalizationField"];function u(e,t){if(null!=e&&null!=t)for(const i of Array.isArray(e)?e:[e])if(d(l,i,t),"visualVariables"in i&&i.visualVariables)for(const e of i.visualVariables)d(c,e,t)}function d(e,t,i){if(e)for(const n of e){const e=(0,a.g)(n,t),s=e&&"function"!=typeof e&&i.get(e);s&&(0,a.s)(n,s.name,t)}}function h(e,t){if(null!=e&&null!=t&&t.fields.length)if("startField"in e){const i=t.get(e.startField),n=t.get(e.endField);e.startField=i&&i.name||null,e.endField=n&&n.name||null}else{const i=t.get(e.startTimeField),n=t.get(e.endTimeField);e.startTimeField=i&&i.name||null,e.endTimeField=n&&n.name||null}}const f=new Set;function p(e,t){return e&&t?(f.clear(),m(f,e,t),Array.from(f).sort()):[]}function m(e,t,i){var n;if(i)if(null!=t&&null!=(n=t.fields)&&n.length)if(i.includes("*"))for(const{name:i}of t.fields)e.add(i);else for(const n of i)g(e,t,n);else{if(i.includes("*"))return e.clear(),void e.add("*");for(const t of i)e.add(t)}}function g(e,t,i){if("string"==typeof i)if(t){const n=t.get(i);n&&e.add(n.name)}else e.add(i)}async function y(e,t,i){var n;if(!i)return;const{arcadeUtils:s}=await(0,o.l)(),r=s.extractFieldNames(i,null==t||null==(n=t.fields)?void 0:n.map((e=>e.name)));for(const i of r)g(e,t,i)}function _({displayField:e,fields:t}){return e||(t&&t.length?b(t,"name-or-title")||b(t,"unique-identifier")||b(t,"type-or-category")||function(e){for(const t of e){if(!t||!t.name)continue;const e=t.name.toLowerCase();if(e.indexOf("name")>-1||e.indexOf("title")>-1)return t.name}return null}(t):null)}function b(e,t){for(const i of e)if(i&&i.valueType&&i.valueType===t)return i.name;return null}async function v(e,t){const{labelingInfo:n,fieldsIndex:s}=t;n&&n.length&&await Promise.all(n.map((t=>async function(e,t,n){if(!n)return;const s=n.getLabelExpression(),a=n.where;if("arcade"===s.type)await y(e,t,s.expression);else{const i=s.expression.match(/{[^}]*}/g);i&&i.forEach((i=>{g(e,t,i.slice(1,-1))}))}await async function(e,t,n){if(n&&"1=1"!==n){const s=(await Promise.all([i.e(2274),i.e(5777)]).then(i.bind(i,72274))).WhereClause.create(n,t);if(!s.isStandardized)throw new r.Z("fieldUtils:collectFilterFields","Where clause is not standardized");m(e,t,s.fieldNames)}}(e,t,a)}(e,s,t))))}function S(e){const t=e.defaultValue;return void 0!==t&&O(e,t)?t:e.nullable?null:void 0}function F(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function x(e){return null===e||F(e)}const w="isInteger"in Number?Number.isInteger:e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e;function I(e){return null===e||w(e)}function E(e){return null!=e&&"string"==typeof e}function T(e){return null===e||E(e)}function N(){return!0}function O(e,t){let i;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":i=e.nullable?I:w;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":i=e.nullable?x:F;break;case"string":case"esriFieldTypeString":i=e.nullable?T:E;break;default:i=N}return 1===arguments.length?i:i(t)}const A=["integer","small-integer","single","double"],C=new Set([...A,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function U(e){return null!=e&&C.has(e.type)}function q(e){return null!=e&&("string"===e.type||"esriFieldTypeString"===e.type)}var G,M;function P(e){return null==e||"number"==typeof e&&isNaN(e)?null:e}function k(e,t){return e.nullable&&null===t?null:U(e)&&!function(e,t){const i="string"==typeof e?D(e):e;return!!i&&(i.isInteger?w(t)&&t>=i.min&&t<=i.max:t>=i.min&&t<=i.max)}(e.type,Number(t))?G.OUT_OF_RANGE:O(e,t)?e.domain?function(e,t){switch(e.type){case"range":{const i="range"in e?e.range[0]:e.minValue,s="range"in e?e.range[1]:e.maxValue;if(+t<i||+t>s)return n.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(null==e.codedValues||e.codedValues.every((e=>null==e||e.code!==t)))return n.INVALID_CODED_VALUE}return null}(e.domain,t):null:M.INVALID_TYPE}function D(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return B;case"esriFieldTypeInteger":case"integer":return L;case"esriFieldTypeSingle":case"single":return R;case"esriFieldTypeDouble":case"double":return $}}!function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"}(G||(G={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(M||(M={}));const B={min:-32768,max:32767,isInteger:!0},L={min:-2147483648,max:2147483647,isInteger:!0},R={min:-34e37,max:12e37,isInteger:!1},$={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function V(e,t,i){switch(e){case n.INVALID_CODED_VALUE:return`Value ${i} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case n.VALUE_OUT_OF_RANGE:return`Value ${i} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case M.INVALID_TYPE:return`Value ${i} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case G.OUT_OF_RANGE:{const{min:e,max:n}=D(t.type);return`Value ${i} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${e} to ${n}`}}}}}]);