/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.22/esri/copyright.txt for details.
*/
import{b as t,clone as n}from"../../core/lang.js";import r,{e as s,i as e,a as i}from"../SpatialReference.js";import{e as o}from"../../chunks/Ellipsoid.js";import"../../chunks/tslib.es6.js";import"../../chunks/JSONSupport.js";import"../../core/Accessor.js";import"../../chunks/deprecate.js";import"../../chunks/Logger.js";import"../../config.js";import"../../chunks/object.js";import"../../chunks/string.js";import"../../core/accessorSupport/decorators/property.js";import"../../chunks/ensureType.js";import"../../chunks/metadata.js";import"../../chunks/handleUtils.js";import"../../chunks/ArrayPool.js";import"../../core/accessorSupport/decorators/subclass.js";import"../../core/Error.js";import"../../core/scheduling.js";import"../../chunks/nextTick.js";import"../../core/promiseUtils.js";import"../../chunks/writer.js";function a(t){return 57.29577951308232*t}function c(t){return.017453292519943*t}function p(t){return t/o.radius}function u(t){return Math.PI/2-2*Math.atan(Math.exp(-t/o.radius))}function h(t){return null!=t.wkid||null!=t.wkt}const l=[0,0];function m(t,n,r,s,e){const i=t,o=e;if(o.spatialReference=r,"x"in i&&"x"in o)[o.x,o.y]=n(i.x,i.y,l,s);else if("xmin"in i&&"xmin"in o)[o.xmin,o.ymin]=n(i.xmin,i.ymin,l,s),[o.xmax,o.ymax]=n(i.xmax,i.ymax,l,s);else if("paths"in i&&"paths"in o||"rings"in i&&"rings"in o){const t="paths"in i?i.paths:i.rings,r=[];let e;for(let i=0;i<t.length;i++){const o=t[i];e=[],r.push(e);for(let t=0;t<o.length;t++)e.push(n(o[t][0],o[t][1],[0,0],s)),o[t].length>2&&e[t].push(o[t][2]),o[t].length>3&&e[t].push(o[t][3])}"paths"in o?o.paths=r:o.rings=r}else if("points"in i&&"points"in o){const t=i.points,r=[];for(let e=0;e<t.length;e++)r[e]=n(t[e][0],t[e][1],[0,0],s),t[e].length>2&&r[e].push(t[e][2]),t[e].length>3&&r[e].push(t[e][3]);o.points=r}return e}function f(t,n){const r=t&&(h(t)?t:t.spatialReference),o=n&&(h(n)?n:n.spatialReference);return!(t&&"type"in t&&"mesh"===t.type||n&&"type"in n&&"mesh"===n.type||!r||!o)&&(!!s(o,r)||(e(o)&&i(r)||e(r)&&i(o)))}function j(o,a){if(t(o))return null;const c=o.spatialReference,p=a&&(h(a)?a:a.spatialReference);return f(c,p)?s(c,p)?n(o):e(p)?m(o,x,r.WebMercator,!1,n(o)):i(p)?m(o,g,r.WGS84,!1,n(o)):null:null}function x(t,n,r=[0,0]){n>89.99999?n=89.99999:n<-89.99999&&(n=-89.99999);const s=c(n);return r[0]=c(t)*o.radius,r[1]=o.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),r}function g(t,n,r=[0,0],s=!1){const e=a(t/o.radius);return r[0]=s?e:e-360*Math.floor((e+180)/360),r[1]=a(Math.PI/2-2*Math.atan(Math.exp(-n/o.radius))),r}function k(t,s=!1,e=n(t)){return m(t,x,r.WebMercator,s,e)}function d(t,s=!1,e=n(t)){return m(t,g,r.WGS84,s,e)}export{f as canProject,k as geographicToWebMercator,x as lngLatToXY,j as project,d as webMercatorToGeographic,p as x2lon,g as xyToLngLat,u as y2lat};
